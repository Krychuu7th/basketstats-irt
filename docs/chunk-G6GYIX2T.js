import{A as ks,B as Os,C as xi,g as Ps,k as On,m as Ci,p as Di,q as Ms,r as Rs,s as Nt,u as Ii,y as Ei,z as Fn}from"./chunk-TOLDVNLI.js";import{$ as se,$a as M,A as ps,Ab as ee,B as fi,Ba as _s,Bb as nt,Cb as vi,D as ms,E as bn,Ea as In,Fa as vs,Fb as De,Hb as xs,I as wn,Ib as yi,Ja as k,Jb as bi,Ka as I,Nb as vt,Pa as En,R as pi,Ra as it,S as Cn,T as gt,Ta as xn,Tb as Ss,U as gs,Ua as be,V as mi,Va as _i,X as et,Y as J,Z as re,Za as we,_a as Me,_b as Re,a as N,b as z,ba as $,bb as Fe,bc as rt,ca as gi,cb as Sn,d as Qe,dc as kn,e as Je,eb as ys,g as Vt,ga as L,gb as bs,gc as Ve,ha as Ae,hb as ws,ia as oe,ib as Cs,j,ja as q,jb as T,k as di,kb as P,l as yn,lb as ce,mb as Ds,n as us,nb as Is,nc as yt,o as ds,oa as tt,oc as wi,pa as ae,pb as Ce,pc as bt,qa as le,qb as W,qc as As,rb as V,s as hi,sa as Dn,sb as An,tb as Tn,tc as wt,ub as Es,vc as Ts,wa as Te,wb as Pn,xa as G,xb as Mn,y as hs,yb as Rn,z as fs,zb as _t}from"./chunk-YXDHR4WX.js";var zs=(()=>{let e=class e{constructor(i,r){this._renderer=i,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(i,r){this._renderer.setProperty(this._elementRef.nativeElement,i,r)}registerOnTouched(i){this.onTouched=i}registerOnChange(i){this.onChange=i}setDisabledState(i){this.setProperty("disabled",i)}};e.\u0275fac=function(r){return new(r||e)(I(En),I(Te))},e.\u0275dir=q({type:e});let t=e;return t})(),Ha=(()=>{let e=class e extends zs{};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=Dn(e)))(s||e)}})(),e.\u0275dir=q({type:e,features:[be]});let t=e;return t})(),Bn=new se("");var Ka={provide:Bn,useExisting:et(()=>ki),multi:!0};function za(){let t=kn()?kn().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var Ua=new se(""),ki=(()=>{let e=class e extends zs{constructor(i,r,s){super(i,r),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!za())}writeValue(i){let r=i??"";this.setProperty("value",r)}_handleInput(i){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(i)}_compositionStart(){this._composing=!0}_compositionEnd(i){this._composing=!1,this._compositionMode&&this.onChange(i)}};e.\u0275fac=function(r){return new(r||e)(I(En),I(Te),I(Ua,8))},e.\u0275dir=q({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,s){r&1&&W("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[De([Ka]),be]});let t=e;return t})();function Ue(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}function Us(t){return t!=null&&typeof t.length=="number"}var Ht=new se(""),Kt=new se(""),Ga=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,st=class{static min(e){return Wa(e)}static max(e){return $a(e)}static required(e){return Za(e)}static requiredTrue(e){return qa(e)}static email(e){return Ya(e)}static minLength(e){return Xa(e)}static maxLength(e){return Qa(e)}static pattern(e){return Ja(e)}static nullValidator(e){return Gs(e)}static compose(e){return Xs(e)}static composeAsync(e){return Js(e)}};function Wa(t){return e=>{if(Ue(e.value)||Ue(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function $a(t){return e=>{if(Ue(e.value)||Ue(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}function Za(t){return Ue(t.value)?{required:!0}:null}function qa(t){return t.value===!0?null:{required:!0}}function Ya(t){return Ue(t.value)||Ga.test(t.value)?null:{email:!0}}function Xa(t){return e=>Ue(e.value)||!Us(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}function Qa(t){return e=>Us(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}function Ja(t){if(!t)return Gs;let e,n;return typeof t=="string"?(n="",t.charAt(0)!=="^"&&(n+="^"),n+=t,t.charAt(t.length-1)!=="$"&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),i=>{if(Ue(i.value))return null;let r=i.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}function Gs(t){return null}function Ws(t){return t!=null}function $s(t){return Ss(t)?us(t):t}function Zs(t){let e={};return t.forEach(n=>{e=n!=null?N(N({},e),n):e}),Object.keys(e).length===0?null:e}function qs(t,e){return e.map(n=>n(t))}function el(t){return!t.validate}function Ys(t){return t.map(e=>el(e)?e:n=>e.validate(n))}function Xs(t){if(!t)return null;let e=t.filter(Ws);return e.length==0?null:function(n){return Zs(qs(n,e))}}function Qs(t){return t!=null?Xs(Ys(t)):null}function Js(t){if(!t)return null;let e=t.filter(Ws);return e.length==0?null:function(n){let i=qs(n,e).map($s);return hs(i).pipe(hi(Zs))}}function eo(t){return t!=null?Js(Ys(t)):null}function Fs(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function to(t){return t._rawValidators}function io(t){return t._rawAsyncValidators}function Vn(t){return t?Array.isArray(t)?t:[t]:[]}function Ai(t,e){return Array.isArray(t)?t.includes(e):t===e}function Vs(t,e){let n=Vn(e);return Vn(t).forEach(r=>{Ai(n,r)||n.push(r)}),n}function Ns(t,e){return Vn(e).filter(n=>!Ai(t,n))}var Ti=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Qs(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=eo(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},ge=class extends Ti{get formDirective(){return null}get path(){return null}},ot=class extends Ti{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Pi=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},tl={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},md=z(N({},tl),{"[class.ng-submitted]":"isSubmitted"}),no=(()=>{let e=class e extends Pi{constructor(i){super(i)}};e.\u0275fac=function(r){return new(r||e)(I(ot,2))},e.\u0275dir=q({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,s){r&2&&Fe("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[be]});let t=e;return t})(),ro=(()=>{let e=class e extends Pi{constructor(i){super(i)}};e.\u0275fac=function(r){return new(r||e)(I(ge,10))},e.\u0275dir=q({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,s){r&2&&Fe("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[be]});let t=e;return t})();var Lt="VALID",Si="INVALID",Ct="PENDING",Bt="DISABLED";function jn(t){return(Oi(t)?t.validators:t)||null}function il(t){return Array.isArray(t)?Qs(t):t||null}function Hn(t,e){return(Oi(e)?e.asyncValidators:t)||null}function nl(t){return Array.isArray(t)?eo(t):t||null}function Oi(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function so(t,e,n){let i=t.controls;if(!(e?Object.keys(i):i).length)throw new mi(1e3,"");if(!i[n])throw new mi(1001,"")}function oo(t,e,n){t._forEachChild((i,r)=>{if(n[r]===void 0)throw new mi(1002,"")})}var Dt=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Lt}get invalid(){return this.status===Si}get pending(){return this.status==Ct}get disabled(){return this.status===Bt}get enabled(){return this.status!==Bt}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Vs(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Vs(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Ns(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Ns(e,this._rawAsyncValidators))}hasValidator(e){return Ai(this._rawValidators,e)}hasAsyncValidator(e){return Ai(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Ct,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Bt,this.errors=null,this._forEachChild(i=>{i.disable(z(N({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(z(N({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Lt,this._forEachChild(i=>{i.enable(z(N({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(z(N({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Lt||this.status===Ct)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Bt:Lt}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Ct,this._hasOwnPendingAsyncValidator=!0;let n=$s(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((i,r)=>i&&i._find(r),this)}getError(e,n){let i=n?this.get(n):this;return i&&i.errors?i.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new G,this.statusChanges=new G}_calculateStatus(){return this._allControlsDisabled()?Bt:this.errors?Si:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ct)?Ct:this._anyControlsHaveStatus(Si)?Si:Lt}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Oi(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=il(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=nl(this._rawAsyncValidators)}},Ge=class extends Dt{constructor(e,n,i){super(jn(n),Hn(i,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,i={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){oo(this,!0,e),Object.keys(e).forEach(i=>{so(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(i=>{let r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,i)=>(e[i]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,i)=>i._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let i=this.controls[n];i&&e(i,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,i]of Object.entries(this.controls))if(this.contains(n)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,i,r)=>((i.enabled||this.disabled)&&(n[r]=i.value),n))}_reduceChildren(e,n){let i=e;return this._forEachChild((r,s)=>{i=n(i,r,s)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Nn=class extends Ge{};var Kn=new se("CallSetDisabledState",{providedIn:"root",factory:()=>zn}),zn="always";function Fi(t,e){return[...e.path,t]}function Ln(t,e,n=zn){Un(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),sl(t,e),al(t,e),ol(t,e),rl(t,e)}function Ls(t,e,n=!0){let i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),Ri(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function Mi(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function rl(t,e){if(e.valueAccessor.setDisabledState){let n=i=>{e.valueAccessor.setDisabledState(i)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function Un(t,e){let n=to(t);e.validator!==null?t.setValidators(Fs(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let i=io(t);e.asyncValidator!==null?t.setAsyncValidators(Fs(i,e.asyncValidator)):typeof i=="function"&&t.setAsyncValidators([i]);let r=()=>t.updateValueAndValidity();Mi(e._rawValidators,r),Mi(e._rawAsyncValidators,r)}function Ri(t,e){let n=!1;if(t!==null){if(e.validator!==null){let r=to(t);if(Array.isArray(r)&&r.length>0){let s=r.filter(o=>o!==e.validator);s.length!==r.length&&(n=!0,t.setValidators(s))}}if(e.asyncValidator!==null){let r=io(t);if(Array.isArray(r)&&r.length>0){let s=r.filter(o=>o!==e.asyncValidator);s.length!==r.length&&(n=!0,t.setAsyncValidators(s))}}}let i=()=>{};return Mi(e._rawValidators,i),Mi(e._rawAsyncValidators,i),n}function sl(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&ao(t,e)})}function ol(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&ao(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function ao(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function al(t,e){let n=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function ll(t,e){t==null,Un(t,e)}function cl(t,e){return Ri(t,e)}function lo(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function ul(t){return Object.getPrototypeOf(t.constructor)===Ha}function dl(t,e){t._syncPendingControls(),e.forEach(n=>{let i=n.control;i.updateOn==="submit"&&i._pendingChange&&(n.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function co(t,e){if(!e)return null;Array.isArray(e);let n,i,r;return e.forEach(s=>{s.constructor===ki?n=s:ul(s)?i=s:r=s}),r||i||n||null}function hl(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function Bs(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function js(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var me=class extends Dt{constructor(e=null,n,i){super(jn(n),Hn(i,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Oi(n)&&(n.nonNullable||n.initialValueIsDefault)&&(js(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Bs(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Bs(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){js(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var fl=t=>t instanceof me,pl=(()=>{let e=class e extends ge{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return Fi(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=Dn(e)))(s||e)}})(),e.\u0275dir=q({type:e,features:[be]});let t=e;return t})();var ml={provide:ot,useExisting:et(()=>Gn)},Hs=Promise.resolve(),Gn=(()=>{let e=class e extends ot{constructor(i,r,s,o,a,l){super(),this._changeDetectorRef=a,this.callSetDisabledState=l,this.control=new me,this._registered=!1,this.name="",this.update=new G,this._parent=i,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=co(this,o)}ngOnChanges(i){if(this._checkForErrors(),!this._registered||"name"in i){if(this._registered&&(this._checkName(),this.formDirective)){let r=i.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in i&&this._updateDisabled(i),lo(i,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Ln(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(i){Hs.then(()=>{this.control.setValue(i,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(i){let r=i.isDisabled.currentValue,s=r!==0&&rt(r);Hs.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(i){return this._parent?Fi(i,this._parent):[i]}};e.\u0275fac=function(r){return new(r||e)(I(ge,9),I(Ht,10),I(Kt,10),I(Bn,10),I(Re,8),I(Kn,8))},e.\u0275dir=q({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[L.None,"disabled","isDisabled"],model:[L.None,"ngModel","model"],options:[L.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[De([ml]),be,tt]});let t=e;return t})();var uo=new se("");var gl={provide:ge,useExisting:et(()=>Vi)},Vi=(()=>{let e=class e extends ge{constructor(i,r,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new G,this._setValidators(i),this._setAsyncValidators(r)}ngOnChanges(i){this._checkFormPresent(),i.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Ri(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(i){let r=this.form.get(i.path);return Ln(r,i,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(i),r}getControl(i){return this.form.get(i.path)}removeControl(i){Ls(i.control||null,i,!1),hl(this.directives,i)}addFormGroup(i){this._setUpFormContainer(i)}removeFormGroup(i){this._cleanUpFormContainer(i)}getFormGroup(i){return this.form.get(i.path)}addFormArray(i){this._setUpFormContainer(i)}removeFormArray(i){this._cleanUpFormContainer(i)}getFormArray(i){return this.form.get(i.path)}updateModel(i,r){this.form.get(i.path).setValue(r)}onSubmit(i){return this.submitted=!0,dl(this.form,this.directives),this.ngSubmit.emit(i),i?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(i=void 0){this.form.reset(i),this.submitted=!1}_updateDomValue(){this.directives.forEach(i=>{let r=i.control,s=this.form.get(i.path);r!==s&&(Ls(r||null,i),fl(s)&&(Ln(s,i,this.callSetDisabledState),i.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(i){let r=this.form.get(i.path);ll(r,i),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(i){if(this.form){let r=this.form.get(i.path);r&&cl(r,i)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Un(this.form,this),this._oldForm&&Ri(this._oldForm,this)}_checkFormPresent(){this.form}};e.\u0275fac=function(r){return new(r||e)(I(Ht,10),I(Kt,10),I(Kn,8))},e.\u0275dir=q({type:e,selectors:[["","formGroup",""]],hostBindings:function(r,s){r&1&&W("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{form:[L.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[De([gl]),be,tt]});let t=e;return t})(),_l={provide:ge,useExisting:et(()=>ho)},ho=(()=>{let e=class e extends pl{constructor(i,r,s){super(),this.name=null,this._parent=i,this._setValidators(r),this._setAsyncValidators(s)}_checkParentType(){fo(this._parent)}};e.\u0275fac=function(r){return new(r||e)(I(ge,13),I(Ht,10),I(Kt,10))},e.\u0275dir=q({type:e,selectors:[["","formGroupName",""]],inputs:{name:[L.None,"formGroupName","name"]},features:[De([_l]),be]});let t=e;return t})(),vl={provide:ge,useExisting:et(()=>Ni)},Ni=(()=>{let e=class e extends ge{constructor(i,r,s){super(),this.name=null,this._parent=i,this._setValidators(r),this._setAsyncValidators(s)}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return Fi(this.name==null?this.name:this.name.toString(),this._parent)}_checkParentType(){fo(this._parent)}};e.\u0275fac=function(r){return new(r||e)(I(ge,13),I(Ht,10),I(Kt,10))},e.\u0275dir=q({type:e,selectors:[["","formArrayName",""]],inputs:{name:[L.None,"formArrayName","name"]},features:[De([vl]),be]});let t=e;return t})();function fo(t){return!(t instanceof ho)&&!(t instanceof Vi)&&!(t instanceof Ni)}var yl={provide:ot,useExisting:et(()=>Wn)},Wn=(()=>{let e=class e extends ot{set isDisabled(i){}constructor(i,r,s,o,a){super(),this._ngModelWarningConfig=a,this._added=!1,this.name=null,this.update=new G,this._ngModelWarningSent=!1,this._parent=i,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=co(this,o)}ngOnChanges(i){this._added||this._setUpControl(),lo(i,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}get path(){return Fi(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(r){return new(r||e)(I(ge,13),I(Ht,10),I(Kt,10),I(Bn,10),I(uo,8))},e.\u0275dir=q({type:e,selectors:[["","formControlName",""]],inputs:{name:[L.None,"formControlName","name"],isDisabled:[L.None,"disabled","isDisabled"],model:[L.None,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[De([yl]),be,tt]});let t=e;return t})();var bl=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=oe({type:e}),e.\u0275inj=re({});let t=e;return t})(),jt=class extends Dt{constructor(e,n,i){super(jn(n),Hn(i,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,n={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(e,n,i={}){this.controls.splice(e,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(e,n={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(e,n,i={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),n&&(this.controls.splice(r,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,n={}){oo(this,!1,e),e.forEach((i,r)=>{so(this,!1,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(e.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e=[],n={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((n,i)=>i._syncPendingControls()?!0:n,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((n,i)=>{e(n,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(n=>n.enabled&&e(n))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function Ks(t){return!!t&&(t.asyncValidators!==void 0||t.validators!==void 0||t.updateOn!==void 0)}var po=(()=>{let e=class e{constructor(){this.useNonNullable=!1}get nonNullable(){let i=new e;return i.useNonNullable=!0,i}group(i,r=null){let s=this._reduceControls(i),o={};return Ks(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new Ge(s,o)}record(i,r=null){let s=this._reduceControls(i);return new Nn(s,r)}control(i,r,s){let o={};return this.useNonNullable?(Ks(r)?o=r:(o.validators=r,o.asyncValidators=s),new me(i,z(N({},o),{nonNullable:!0}))):new me(i,r,s)}array(i,r,s){let o=i.map(a=>this._createControl(a));return new jt(o,r,s)}_reduceControls(i){let r={};return Object.keys(i).forEach(s=>{r[s]=this._createControl(i[s])}),r}_createControl(i){if(i instanceof me)return i;if(i instanceof Dt)return i;if(Array.isArray(i)){let r=i[0],s=i.length>1?i[1]:null,o=i.length>2?i[2]:null;return this.control(r,s,o)}else return this.control(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var _d=(()=>{let e=class e{static withConfig(i){return{ngModule:e,providers:[{provide:uo,useValue:i.warnOnNgModelWithFormControl??"always"},{provide:Kn,useValue:i.callSetDisabledState??zn}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=oe({type:e}),e.\u0275inj=re({imports:[bl]});let t=e;return t})();var Dl=["list"],Il=t=>({"p-steps p-component":!0,"p-readonly":t}),El=(t,e)=>({"p-highlight p-steps-current":t,"p-disabled":e}),xl=()=>({exact:!1});function Sl(t,e){if(t&1&&(T(0,"span",12),ee(1),P()),t&2){let n=V(2).$implicit;k(),nt(n.label)}}function Al(t,e){if(t&1&&ce(0,"span",13),t&2){let n=V(2).$implicit;M("innerHTML",n.label,In)}}function Tl(t,e){if(t&1){let n=Ce();T(0,"a",9),W("click",function(r){ae(n);let s=V(),o=s.$implicit,a=s.index,l=V();return le(l.onItemClick(r,o,a))})("keydown",function(r){ae(n);let s=V(),o=s.$implicit,a=s.index,l=V();return le(l.onItemKeydown(r,o,a))}),T(1,"span",10),ee(2),P(),we(3,Sl,2,1,"span",11)(4,Al,1,1,"ng-template",null,3,vt),P()}if(t&2){let n=_t(5),i=V(),r=i.$implicit,s=i.index,o=V();M("routerLink",r.routerLink)("queryParams",r.queryParams)("routerLinkActive","p-menuitem-link-active")("routerLinkActiveOptions",r.routerLinkActiveOptions||xs(19,xl))("target",r.target)("fragment",r.fragment)("queryParamsHandling",r.queryParamsHandling)("preserveFragment",r.preserveFragment)("skipLocationChange",r.skipLocationChange)("replaceUrl",r.replaceUrl)("state",r.state)("ariaCurrentWhenActive",o.exact?"step":void 0),Me("tabindex",o.getItemTabIndex(r,s))("aria-selected",s===o.activeIndex)("aria-expanded",s===o.activeIndex)("aria-disabled",r.disabled||o.readonly&&s!==o.activeIndex),k(2),nt(s+1),k(),M("ngIf",r.escape!==!1)("ngIfElse",n)}}function Pl(t,e){if(t&1&&(T(0,"span",12),ee(1),P()),t&2){let n=V(2).$implicit;k(),nt(n.label)}}function Ml(t,e){if(t&1&&ce(0,"span",13),t&2){let n=V(2).$implicit;M("innerHTML",n.label,In)}}function Rl(t,e){if(t&1){let n=Ce();T(0,"a",14),W("click",function(r){ae(n);let s=V(),o=s.$implicit,a=s.index,l=V();return le(l.onItemClick(r,o,a))})("keydown",function(r){ae(n);let s=V(),o=s.$implicit,a=s.index,l=V();return le(l.onItemKeydown(r,o,a))}),T(1,"span",10),ee(2),P(),we(3,Pl,2,1,"span",11)(4,Ml,1,1,"ng-template",null,4,vt),P()}if(t&2){let n=_t(5),i=V(),r=i.$implicit,s=i.index,o=V();M("target",r.target)("ariaCurrentWhenActive",o.exact&&(!r.disabled||o.readonly)?"step":void 0),Me("href",r.url,vs)("tabindex",o.getItemTabIndex(r,s))("aria-selected",s===o.activeIndex)("aria-expanded",s===o.activeIndex)("aria-disabled",r.disabled||o.readonly&&s!==o.activeIndex),k(2),nt(s+1),k(),M("ngIf",r.escape!==!1)("ngIfElse",n)}}function kl(t,e){if(t&1&&(T(0,"li",7,1),we(2,Tl,6,20,"a",8)(3,Rl,6,10,"ng-template",null,2,vt),P()),t&2){let n=e.$implicit,i=e.index,r=_t(4),s=V();Sn(n.styleClass),M("ngStyle",n.style)("tooltipOptions",n.tooltipOptions)("ngClass",bi(10,El,s.isActive(n,i),n.disabled||s.readonly&&!s.isActive(n,i))),Me("aria-current",s.isActive(n,i)?"step":void 0)("id",n.id)("data-pc-section","menuitem"),k(2),M("ngIf",s.isClickableRouterLink(n))("ngIfElse",r)}}var mo=(()=>{class t{router;route;cd;activeIndex=0;model;readonly=!0;style;styleClass;exact=!0;activeIndexChange=new G;listViewChild;constructor(n,i,r){this.router=n,this.route=i,this.cd=r}subscription;ngOnInit(){this.subscription=this.router.events.subscribe(()=>this.cd.markForCheck())}onItemClick(n,i,r){if(this.readonly||i.disabled){n.preventDefault();return}this.activeIndexChange.emit(r),!i.url&&!i.routerLink&&n.preventDefault(),i.command&&i.command({originalEvent:n,item:i,index:r})}onItemKeydown(n,i,r){switch(n.code){case"ArrowRight":{this.navigateToNextItem(n.target),n.preventDefault();break}case"ArrowLeft":{this.navigateToPrevItem(n.target),n.preventDefault();break}case"Home":{this.navigateToFirstItem(n.target),n.preventDefault();break}case"End":{this.navigateToLastItem(n.target),n.preventDefault();break}case"Tab":if(r!==this.activeIndex){let s=Ii.find(this.listViewChild.nativeElement,'[data-pc-section="menuitem"]');s[r].children[0].tabIndex="-1",s[this.activeIndex].children[0].tabIndex="0"}break;case"Enter":case"Space":{this.onItemClick(n,i,r),n.preventDefault();break}default:break}}navigateToNextItem(n){let i=this.findNextItem(n);i&&this.setFocusToMenuitem(n,i)}navigateToPrevItem(n){let i=this.findPrevItem(n);i&&this.setFocusToMenuitem(n,i)}navigateToFirstItem(n){let i=this.findFirstItem();i&&this.setFocusToMenuitem(n,i)}navigateToLastItem(n){let i=this.findLastItem();i&&this.setFocusToMenuitem(n,i)}findNextItem(n){let i=n.parentElement.nextElementSibling;return i?i.children[0]:null}findPrevItem(n){let i=n.parentElement.previousElementSibling;return i?i.children[0]:null}findFirstItem(){let n=Ii.findSingle(this.listViewChild.nativeElement,'[data-pc-section="menuitem"]');return n?n.children[0]:null}findLastItem(){let n=Ii.find(this.listViewChild.nativeElement,'[data-pc-section="menuitem"]');return n?n[n.length-1].children[0]:null}setFocusToMenuitem(n,i){n.tabIndex="-1",i.tabIndex="0",i.focus()}isClickableRouterLink(n){return n.routerLink&&!this.readonly&&!n.disabled}isActive(n,i){if(n.routerLink){let r=Array.isArray(n.routerLink)?n.routerLink:[n.routerLink];return this.router.isActive(this.router.createUrlTree(r,{relativeTo:this.route}).toString(),!1)}return i===this.activeIndex}getItemTabIndex(n,i){return n.disabled?"-1":!n.disabled&&this.activeIndex===i?n.tabindex||"0":n.tabindex??"-1"}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}static \u0275fac=function(i){return new(i||t)(I(Di),I(Ci),I(Re))};static \u0275cmp=Ae({type:t,selectors:[["p-steps"]],viewQuery:function(i,r){if(i&1&&Pn(Dl,5),i&2){let s;Mn(s=Rn())&&(r.listViewChild=s.first)}},hostAttrs:[1,"p-element"],inputs:{activeIndex:"activeIndex",model:"model",readonly:"readonly",style:"style",styleClass:"styleClass",exact:"exact"},outputs:{activeIndexChange:"activeIndexChange"},decls:4,vars:9,consts:[["list",""],["menuitem",""],["elseBlock",""],["htmlLabel",""],["htmlRouteLabel",""],[3,"ngClass","ngStyle"],["class","p-steps-item","pTooltip","",3,"ngStyle","class","tooltipOptions","ngClass",4,"ngFor","ngForOf"],["pTooltip","",1,"p-steps-item",3,"ngStyle","tooltipOptions","ngClass"],["class","p-menuitem-link",3,"routerLink","queryParams","routerLinkActive","routerLinkActiveOptions","target","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state","ariaCurrentWhenActive","click","keydown",4,"ngIf","ngIfElse"],[1,"p-menuitem-link",3,"click","keydown","routerLink","queryParams","routerLinkActive","routerLinkActiveOptions","target","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state","ariaCurrentWhenActive"],[1,"p-steps-number"],["class","p-steps-title",4,"ngIf","ngIfElse"],[1,"p-steps-title"],[1,"p-steps-title",3,"innerHTML"],[1,"p-menuitem-link",3,"click","keydown","target","ariaCurrentWhenActive"]],template:function(i,r){i&1&&(T(0,"nav",5)(1,"ul",null,0),we(3,kl,5,13,"li",6),P()()),i&2&&(Sn(r.styleClass),M("ngClass",yi(7,Il,r.readonly))("ngStyle",r.style),Me("data-pc-name","steps"),k(),Me("data-pc-section","menu"),k(2),M("ngForOf",r.model))},dependencies:[yt,wi,bt,As,Ms,Rs,Ei],styles:[`@layer primeng{.p-steps{position:relative}.p-steps ul{padding:0;margin:0;list-style-type:none;display:flex}.p-steps-item{position:relative;display:flex;justify-content:center;flex:1 1 auto}.p-steps-item .p-menuitem-link{display:inline-flex;flex-direction:column;align-items:center;overflow:hidden;text-decoration:none}.p-steps.p-steps-readonly .p-steps-item{cursor:auto}.p-steps-item.p-steps-current .p-menuitem-link{cursor:default}.p-steps-title{white-space:nowrap}.p-steps-number{display:flex;align-items:center;justify-content:center}.p-steps-title{display:block}}
`],encapsulation:2,changeDetection:0})}return t})(),Md=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=oe({type:t});static \u0275inj=re({imports:[wt,Nt,Fn,Nt,Fn]})}return t})();var go=(()=>{class t{el;ngModel;cd;filled;constructor(n,i,r){this.el=n,this.ngModel=i,this.cd=r}ngAfterViewInit(){this.updateFilledState(),this.cd.detectChanges()}ngDoCheck(){this.updateFilledState()}onInput(){this.updateFilledState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length||this.ngModel&&this.ngModel.model}static \u0275fac=function(i){return new(i||t)(I(Te),I(Gn,8),I(Re))};static \u0275dir=q({type:t,selectors:[["","pInputText",""]],hostAttrs:[1,"p-inputtext","p-component","p-element"],hostVars:2,hostBindings:function(i,r){i&1&&W("input",function(o){return r.onInput(o)}),i&2&&Fe("p-filled",r.filled)}})}return t})(),kd=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=oe({type:t});static \u0275inj=re({imports:[wt]})}return t})();var Vl=["*"],_o=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275cmp=Ae({type:t,selectors:[["p-floatLabel"]],ngContentSelectors:Vl,decls:2,vars:0,consts:[[1,"p-float-label"]],template:function(i,r){i&1&&(An(),T(0,"span",0),Tn(1),P())},encapsulation:2,changeDetection:0})}return t})(),Nd=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=oe({type:t});static \u0275inj=re({imports:[wt,On,Nt,On]})}return t})();var Li,Ll=new Uint8Array(16);function qn(){if(!Li&&(Li=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Li))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Li(Ll)}var Q=[];for(let t=0;t<256;++t)Q.push((t+256).toString(16).slice(1));function vo(t,e=0){return Q[t[e+0]]+Q[t[e+1]]+Q[t[e+2]]+Q[t[e+3]]+"-"+Q[t[e+4]]+Q[t[e+5]]+"-"+Q[t[e+6]]+Q[t[e+7]]+"-"+Q[t[e+8]]+Q[t[e+9]]+"-"+Q[t[e+10]]+Q[t[e+11]]+Q[t[e+12]]+Q[t[e+13]]+Q[t[e+14]]+Q[t[e+15]]}var Bl=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Yn={randomUUID:Bl};function jl(t,e,n){if(Yn.randomUUID&&!e&&!t)return Yn.randomUUID();t=t||{};let i=t.random||(t.rng||qn)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,e){n=n||0;for(let r=0;r<16;++r)e[n+r]=i[r];return e}return vo(i)}var Xn=jl;var Kl=(t,e)=>({"pi-circle":t,"pi-plus-circle":e});function zl(t,e){if(t&1){let n=Ce();Ds(0),T(1,"p-floatLabel")(2,"input",9),W("keyup.enter",function(){ae(n);let r=V();return le(r.confirmTeamName())}),P(),T(3,"label",10),ee(4,"Nazwa dru\u017Cyny"),P()(),T(5,"p-button",11),W("onClick",function(){ae(n);let r=V();return le(r.confirmTeamName())}),P(),Is()}if(t&2){let n=V();k(2),M("id","teamName-"+n.teamId),k(),M("for","teamName-"+n.teamId),k(2),M("rounded",!0)}}function Ul(t,e){if(t&1){let n=Ce();T(0,"h1"),ee(1),P(),T(2,"p-button",12),W("onClick",function(){ae(n);let r=V();return le(r.editName=!0)}),P()}if(t&2){let n=V();k(),nt(n.teamNameControl.value),k(),M("rounded",!0)("text",!0)}}function Gl(t,e){if(t&1){let n=Ce();T(0,"p-button",18),W("onClick",function(){ae(n);let r=V().index,s=V();return le(s.removePlayer(r))}),P()}t&2&&M("rounded",!0)("text",!0)}function Wl(t,e){if(t&1&&(T(0,"div",13)(1,"div",14),ce(2,"i",15),P(),T(3,"p-floatLabel"),ce(4,"input",16),T(5,"label",10),ee(6),P()(),we(7,Gl,1,2,"p-button",17),P()),t&2){let n=e.$implicit,i=e.index,r=V();M("formGroup",n),k(2),M("ngClass",bi(6,Kl,i<=4,i>4)),k(2),M("id","playerName-"+r.teamId+"-"+i),k(),M("for","playerName-"+r.teamId+"-"+i),k(),vi("Zawodnik #",i+1,""),k(),M("ngIf",r.teamPlayersArray.length>3)}}function $l(t,e){if(t&1){let n=Ce();T(0,"p-button",19),W("click",function(){ae(n);let r=V();return le(r.addPlayer())}),P()}t&2&&M("rounded",!0)}var yo=(()=>{let e=class e{constructor(){this.teamId=Xn(),this.editName=!0,this.items=[{icon:"pi pi-check",command:()=>{this.teamPlayersArray.removeAt(this.playerIndex)}},{icon:"pi pi-times",command:()=>{}}]}ngOnInit(){this.teamNameControl.value&&(this.editName=!1)}confirmTeamName(){if(this.teamNameControl.markAsDirty(),this.teamNameControl.invalid){this.teamNameControl.updateValueAndValidity();return}this.editName=!1}addPlayer(){this.teamPlayersArray.length>=12||this.teamPlayersArray?.push(new Ge({name:new me(null,[st.required])}))}removePlayer(i){this.teamPlayersArray.length<=3||this.teamPlayersArray.removeAt(i)}get teamPlayersArray(){return this.form.controls.players}get teamPlayersControls(){return this.teamPlayersArray.controls}get teamNameControl(){return this.form.controls.name}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Ae({type:e,selectors:[["app-team-definition"]],inputs:{form:"form"},decls:11,vars:7,consts:[["readonlyName",""],[1,"team-definition-box",3,"formGroup"],[1,"team-headline"],["src","https://picsum.photos/120/120","width","120","height","120",1,"team-logo",3,"alt"],[1,"team-name"],[4,"ngIf","ngIfElse"],["formArrayName","players",1,"players-list"],["class","player mb-4",3,"formGroup",4,"ngFor","ngForOf"],["icon","pi pi-plus","pTooltip","Dodaj zawodnika",3,"rounded","click",4,"ngIf"],["pInputText","","type","text","formControlName","name",1,"name-input",3,"keyup.enter","id"],[3,"for"],["icon","pi pi-check",3,"onClick","rounded"],["icon","pi pi-pencil",3,"onClick","rounded","text"],[1,"player","mb-4",3,"formGroup"],[1,"player-number"],[1,"pi",3,"ngClass"],["type","text","pInputText","","formControlName","name",3,"id"],["class","ms-1","icon","pi pi-trash","severity","danger",3,"rounded","text","onClick",4,"ngIf"],["icon","pi pi-trash","severity","danger",1,"ms-1",3,"onClick","rounded","text"],["icon","pi pi-plus","pTooltip","Dodaj zawodnika",3,"click","rounded"]],template:function(r,s){if(r&1&&(T(0,"div",1)(1,"div",2),ce(2,"img",3),T(3,"div",4)(4,"div"),we(5,zl,6,3,"ng-container",5)(6,Ul,3,3,"ng-template",null,0,vt),P()()(),T(8,"div",6),we(9,Wl,8,9,"div",7)(10,$l,1,1,"p-button",8),P()()),r&2){let o=_t(7);M("formGroup",s.form),k(2),Es("alt","Team ",s.teamNameControl.value," logo"),k(3),M("ngIf",s.editName)("ngIfElse",o),k(4),M("ngForOf",s.teamPlayersControls),k(),M("ngIf",s.teamPlayersArray.length<12)}},dependencies:[yt,wi,bt,xi,Ei,go,_o,ki,no,ro,Vi,Wn,Ni],styles:[".team-definition-box[_ngcontent-%COMP%]{min-width:400px}.team-headline[_ngcontent-%COMP%]{display:flex;margin-bottom:30px}.team-headline[_ngcontent-%COMP%]   .team-logo[_ngcontent-%COMP%]{border-radius:10px}.team-headline[_ngcontent-%COMP%]   .team-name[_ngcontent-%COMP%]{width:calc(100% - 120px);display:flex;align-items:flex-end;padding:0 15px}.team-headline[_ngcontent-%COMP%]   .team-name[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;align-items:center}.team-headline[_ngcontent-%COMP%]   .team-name[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 10px 0 0}.team-headline[_ngcontent-%COMP%]   .team-name[_ngcontent-%COMP%]   .name-input[_ngcontent-%COMP%]{max-width:180px;margin:0 10px 0 0}.players-list[_ngcontent-%COMP%]   .player[_ngcontent-%COMP%]{display:flex;flex-direction:row;min-height:40px}.players-list[_ngcontent-%COMP%]   .player[_ngcontent-%COMP%]   .player-number[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;max-width:40px;text-align:center}.players-list[_ngcontent-%COMP%]   .player[_ngcontent-%COMP%]   .player-number[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-top:5px}.players-list[_ngcontent-%COMP%]   .player[_ngcontent-%COMP%]   .player-name[_ngcontent-%COMP%]{display:flex;align-items:center;padding-left:20px}.players-list[_ngcontent-%COMP%]   p-button[_ngcontent-%COMP%]{display:inline-block}@media screen and (max-width: 1024px){.columns[_ngcontent-%COMP%]{flex-direction:column;align-items:center}}"]});let t=e;return t})();function Bi(t,e=0){return ql(t)?Number(t):e}function ql(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}function bo(t){return Array.isArray(t)?t:[t]}function te(t){return t instanceof Te?t.nativeElement:t}var Jn;try{Jn=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Jn=!1}var er=(()=>{let e=class e{constructor(i){this._platformId=i,this.isBrowser=this._platformId?Ts(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||Jn)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}};e.\u0275fac=function(r){return new(r||e)($(_s))},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var zt;function Yl(){if(zt==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>zt=!0}))}finally{zt=zt||!1}return zt}function ji(t){return Yl()?t:!!t.capture}var Qn;function Xl(){if(Qn==null){let t=typeof document<"u"?document.head:null;Qn=!!(t&&(t.createShadowRoot||t.attachShadow))}return Qn}function tr(t){if(Xl()){let e=t.getRootNode?t.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function Ut(t){return t.composedPath?t.composedPath()[0]:t.target}var Jl=new se("cdk-dir-doc",{providedIn:"root",factory:ec});function ec(){return gi(Ve)}var tc=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function ic(t){let e=t?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?tc.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var ir=(()=>{let e=class e{constructor(i){if(this.value="ltr",this.change=new G,i){let r=i.body?i.body.dir:null,s=i.documentElement?i.documentElement.dir:null;this.value=ic(r||s||"ltr")}}ngOnDestroy(){this.change.complete()}};e.\u0275fac=function(r){return new(r||e)($(Jl,8))},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var sc=20,wo=(()=>{let e=class e{constructor(i,r,s){this._ngZone=i,this._platform=r,this._scrolled=new j,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=s}register(i){this.scrollContainers.has(i)||this.scrollContainers.set(i,i.elementScrolled().subscribe(()=>this._scrolled.next(i)))}deregister(i){let r=this.scrollContainers.get(i);r&&(r.unsubscribe(),this.scrollContainers.delete(i))}scrolled(i=sc){return this._platform.isBrowser?new Vt(r=>{this._globalSubscription||this._addGlobalListener();let s=i>0?this._scrolled.pipe(bn(i)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{s.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):ds()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((i,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(i,r){let s=this.getAncestorScrollContainers(i);return this.scrolled(r).pipe(ms(o=>!o||s.indexOf(o)>-1))}getAncestorScrollContainers(i){let r=[];return this.scrollContainers.forEach((s,o)=>{this._scrollableContainsElement(o,i)&&r.push(o)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(i,r){let s=te(r),o=i.getElementRef().nativeElement;do if(s==o)return!0;while(s=s.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let i=this._getWindow();return fs(i.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}};e.\u0275fac=function(r){return new(r||e)($(it),$(er),$(Ve,8))},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var oc=20,Co=(()=>{let e=class e{constructor(i,r,s){this._platform=i,this._change=new j,this._changeListener=o=>{this._change.next(o)},this._document=s,r.runOutsideAngular(()=>{if(i.isBrowser){let o=this._getWindow();o.addEventListener("resize",this._changeListener),o.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let i=this._getWindow();i.removeEventListener("resize",this._changeListener),i.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let i={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),i}getViewportRect(){let i=this.getViewportScrollPosition(),{width:r,height:s}=this.getViewportSize();return{top:i.top,left:i.left,bottom:i.top+s,right:i.left+r,height:s,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let i=this._document,r=this._getWindow(),s=i.documentElement,o=s.getBoundingClientRect(),a=-o.top||i.body.scrollTop||r.scrollY||s.scrollTop||0,l=-o.left||i.body.scrollLeft||r.scrollX||s.scrollLeft||0;return{top:a,left:l}}change(i=oc){return i>0?this._change.pipe(bn(i)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let i=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:i.innerWidth,height:i.innerHeight}:{width:0,height:0}}};e.\u0275fac=function(r){return new(r||e)($(er),$(it),$(Ve,8))},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Do=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=oe({type:e}),e.\u0275inj=re({});let t=e;return t})();function Io(t){return t.buttons===0||t.detail===0}function Eo(t){let e=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}function cr(t,e,n){for(let i in e)if(e.hasOwnProperty(i)){let r=e[i];r?t.setProperty(i,r,n?.has(i)?"important":""):t.removeProperty(i)}return t}function It(t,e){let n=e?"":"none";cr(t.style,{"touch-action":e?"":"none","-webkit-user-drag":e?"":"none","-webkit-tap-highlight-color":e?"":"transparent","user-select":n,"-ms-user-select":n,"-webkit-user-select":n,"-moz-user-select":n})}function xo(t,e,n){cr(t.style,{position:e?"":"fixed",top:e?"":"0",opacity:e?"":"0",left:e?"":"-999em"},n)}function Ui(t,e){return e&&e!="none"?t+" "+e:t}function So(t){let e=t.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(t)*e}function lc(t){let e=getComputedStyle(t),n=nr(e,"transition-property"),i=n.find(a=>a==="transform"||a==="all");if(!i)return 0;let r=n.indexOf(i),s=nr(e,"transition-duration"),o=nr(e,"transition-delay");return So(s[r])+So(o[r])}function nr(t,e){return t.getPropertyValue(e).split(",").map(i=>i.trim())}function ur(t){let e=t.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height,x:e.x,y:e.y}}function sr(t,e,n){let{top:i,bottom:r,left:s,right:o}=t;return n>=i&&n<=r&&e>=s&&e<=o}function Wt(t,e,n){t.top+=e,t.bottom=t.top+t.height,t.left+=n,t.right=t.left+t.width}function Ao(t,e,n,i){let{top:r,right:s,bottom:o,left:a,width:l,height:c}=t,u=l*e,h=c*e;return i>r-h&&i<o+h&&n>a-u&&n<s+u}var Gi=class{constructor(e){this._document=e,this.positions=new Map}clear(){this.positions.clear()}cache(e){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),e.forEach(n=>{this.positions.set(n,{scrollPosition:{top:n.scrollTop,left:n.scrollLeft},clientRect:ur(n)})})}handleScroll(e){let n=Ut(e),i=this.positions.get(n);if(!i)return null;let r=i.scrollPosition,s,o;if(n===this._document){let c=this.getViewportScrollPosition();s=c.top,o=c.left}else s=n.scrollTop,o=n.scrollLeft;let a=r.top-s,l=r.left-o;return this.positions.forEach((c,u)=>{c.clientRect&&n!==u&&n.contains(u)&&Wt(c.clientRect,a,l)}),r.top=s,r.left=o,{top:a,left:l}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}};function To(t){let e=t.cloneNode(!0),n=e.querySelectorAll("[id]"),i=t.nodeName.toLowerCase();e.removeAttribute("id");for(let r=0;r<n.length;r++)n[r].removeAttribute("id");return i==="canvas"?Ro(t,e):(i==="input"||i==="select"||i==="textarea")&&Mo(t,e),Po("canvas",t,e,Ro),Po("input, textarea, select",t,e,Mo),e}function Po(t,e,n,i){let r=e.querySelectorAll(t);if(r.length){let s=n.querySelectorAll(t);for(let o=0;o<r.length;o++)i(r[o],s[o])}}var cc=0;function Mo(t,e){e.type!=="file"&&(e.value=t.value),e.type==="radio"&&e.name&&(e.name=`mat-clone-${e.name}-${cc++}`)}function Ro(t,e){let n=e.getContext("2d");if(n)try{n.drawImage(t,0,0)}catch{}}var ko=ji({passive:!0}),Hi=ji({passive:!1}),uc=800,rr=new Set(["position"]),or=class{get disabled(){return this._disabled||!!(this._dropContainer&&this._dropContainer.disabled)}set disabled(e){e!==this._disabled&&(this._disabled=e,this._toggleNativeDragInteractions(),this._handles.forEach(n=>It(n,e)))}constructor(e,n,i,r,s,o){this._config=n,this._document=i,this._ngZone=r,this._viewportRuler=s,this._dragDropRegistry=o,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new j,this._pointerMoveSubscription=Je.EMPTY,this._pointerUpSubscription=Je.EMPTY,this._scrollSubscription=Je.EMPTY,this._resizeSubscription=Je.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new j,this.started=new j,this.released=new j,this.ended=new j,this.entered=new j,this.exited=new j,this.dropped=new j,this.moved=this._moveEvents,this._pointerDown=a=>{if(this.beforeStarted.next(),this._handles.length){let l=this._getTargetHandle(a);l&&!this._disabledHandles.has(l)&&!this.disabled&&this._initializeDragSequence(l,a)}else this.disabled||this._initializeDragSequence(this._rootElement,a)},this._pointerMove=a=>{let l=this._getPointerPositionOnPage(a);if(!this._hasStartedDragging){let u=Math.abs(l.x-this._pickupPositionOnPage.x),h=Math.abs(l.y-this._pickupPositionOnPage.y);if(u+h>=this._config.dragStartThreshold){let f=Date.now()>=this._dragStartTime+this._getDragStartDelay(a),v=this._dropContainer;if(!f){this._endDragSequence(a);return}(!v||!v.isDragging()&&!v.isReceiving())&&(a.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(a)))}return}a.preventDefault();let c=this._getConstrainedPointerPosition(l);if(this._hasMoved=!0,this._lastKnownPointerPosition=l,this._updatePointerDirectionDelta(c),this._dropContainer)this._updateActiveDropContainer(c,l);else{let u=this.constrainPosition?this._initialDomRect:this._pickupPositionOnPage,h=this._activeTransform;h.x=c.x-u.x+this._passiveTransform.x,h.y=c.y-u.y+this._passiveTransform.y,this._applyRootElementTransform(h.x,h.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:c,event:a,distance:this._getDragDistance(c),delta:this._pointerDirectionDelta})})},this._pointerUp=a=>{this._endDragSequence(a)},this._nativeDragStart=a=>{if(this._handles.length){let l=this._getTargetHandle(a);l&&!this._disabledHandles.has(l)&&!this.disabled&&a.preventDefault()}else this.disabled||a.preventDefault()},this.withRootElement(e).withParent(n.parentDragRef||null),this._parentPositions=new Gi(i),o.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(e){this._handles=e.map(i=>te(i)),this._handles.forEach(i=>It(i,this.disabled)),this._toggleNativeDragInteractions();let n=new Set;return this._disabledHandles.forEach(i=>{this._handles.indexOf(i)>-1&&n.add(i)}),this._disabledHandles=n,this}withPreviewTemplate(e){return this._previewTemplate=e,this}withPlaceholderTemplate(e){return this._placeholderTemplate=e,this}withRootElement(e){let n=te(e);return n!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{n.addEventListener("mousedown",this._pointerDown,Hi),n.addEventListener("touchstart",this._pointerDown,ko),n.addEventListener("dragstart",this._nativeDragStart,Hi)}),this._initialTransform=void 0,this._rootElement=n),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(e){return this._boundaryElement=e?te(e):null,this._resizeSubscription.unsubscribe(),e&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(e){return this._parentDragRef=e,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(e){!this._disabledHandles.has(e)&&this._handles.indexOf(e)>-1&&(this._disabledHandles.add(e),It(e,!0))}enableHandle(e){this._disabledHandles.has(e)&&(this._disabledHandles.delete(e),It(e,this.disabled))}withDirection(e){return this._direction=e,this}_withDropContainer(e){this._dropContainer=e}getFreeDragPosition(){let e=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:e.x,y:e.y}}setFreeDragPosition(e){return this._activeTransform={x:0,y:0},this._passiveTransform.x=e.x,this._passiveTransform.y=e.y,this._dropContainer||this._applyRootElementTransform(e.x,e.y),this}withPreviewContainer(e){return this._previewContainer=e,this}_sortFromLastPointerPosition(){let e=this._lastKnownPointerPosition;e&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(e),e)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview?.remove(),this._previewRef?.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(e){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),!!this._hasStartedDragging))if(this.released.next({source:this,event:e}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(e),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;let n=this._getPointerPositionOnPage(e);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(n),dropPoint:n,event:e})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(e){Gt(e)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();let n=this._dropContainer;if(n){let i=this._rootElement,r=i.parentNode,s=this._placeholder=this._createPlaceholderElement(),o=this._anchor=this._anchor||this._document.createComment(""),a=this._getShadowRoot();r.insertBefore(o,i),this._initialTransform=i.style.transform||"",this._preview=this._createPreviewElement(),xo(i,!1,rr),this._document.body.appendChild(r.replaceChild(s,i)),this._getPreviewInsertionPoint(r,a).appendChild(this._preview),this.started.next({source:this,event:e}),n.start(),this._initialContainer=n,this._initialIndex=n.getItemIndex(this)}else this.started.next({source:this,event:e}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(n?n.getScrollableParents():[])}_initializeDragSequence(e,n){this._parentDragRef&&n.stopPropagation();let i=this.isDragging(),r=Gt(n),s=!r&&n.button!==0,o=this._rootElement,a=Ut(n),l=!r&&this._lastTouchEventTime&&this._lastTouchEventTime+uc>Date.now(),c=r?Eo(n):Io(n);if(a&&a.draggable&&n.type==="mousedown"&&n.preventDefault(),i||s||l||c)return;if(this._handles.length){let d=o.style;this._rootElementTapHighlight=d.webkitTapHighlightColor||"",d.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._initialDomRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(d=>this._updateOnScroll(d)),this._boundaryElement&&(this._boundaryRect=ur(this._boundaryElement));let u=this._previewTemplate;this._pickupPositionInElement=u&&u.template&&!u.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialDomRect,e,n);let h=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(n);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:h.x,y:h.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,n)}_cleanupDragArtifacts(e){xo(this._rootElement,!0,rr),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialDomRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{let n=this._dropContainer,i=n.getItemIndex(this),r=this._getPointerPositionOnPage(e),s=this._getDragDistance(r),o=n._isOverContainer(r.x,r.y);this.ended.next({source:this,distance:s,dropPoint:r,event:e}),this.dropped.next({item:this,currentIndex:i,previousIndex:this._initialIndex,container:n,previousContainer:this._initialContainer,isPointerOverContainer:o,distance:s,dropPoint:r,event:e}),n.drop(this,i,this._initialIndex,this._initialContainer,o,s,r,e),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:e,y:n},{x:i,y:r}){let s=this._initialContainer._getSiblingContainerFromPosition(this,e,n);!s&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(e,n)&&(s=this._initialContainer),s&&s!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=s,this._dropContainer.enter(this,e,n,s===this._initialContainer&&s.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:s,currentIndex:s.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(i,r),this._dropContainer._sortItem(this,e,n,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(e,n):this._applyPreviewTransform(e-this._pickupPositionInElement.x,n-this._pickupPositionInElement.y))}_createPreviewElement(){let e=this._previewTemplate,n=this.previewClass,i=e?e.template:null,r;if(i&&e){let s=e.matchSize?this._initialDomRect:null,o=e.viewContainer.createEmbeddedView(i,e.context);o.detectChanges(),r=Fo(o,this._document),this._previewRef=o,e.matchSize?Vo(r,s):r.style.transform=zi(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else r=To(this._rootElement),Vo(r,this._initialDomRect),this._initialTransform&&(r.style.transform=this._initialTransform);return cr(r.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},rr),It(r,!1),r.classList.add("cdk-drag-preview"),r.setAttribute("dir",this._direction),n&&(Array.isArray(n)?n.forEach(s=>r.classList.add(s)):r.classList.add(n)),r}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();let e=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(e.left,e.top);let n=lc(this._preview);return n===0?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(i=>{let r=o=>{(!o||Ut(o)===this._preview&&o.propertyName==="transform")&&(this._preview?.removeEventListener("transitionend",r),i(),clearTimeout(s))},s=setTimeout(r,n*1.5);this._preview.addEventListener("transitionend",r)}))}_createPlaceholderElement(){let e=this._placeholderTemplate,n=e?e.template:null,i;return n?(this._placeholderRef=e.viewContainer.createEmbeddedView(n,e.context),this._placeholderRef.detectChanges(),i=Fo(this._placeholderRef,this._document)):i=To(this._rootElement),i.style.pointerEvents="none",i.classList.add("cdk-drag-placeholder"),i}_getPointerPositionInElement(e,n,i){let r=n===this._rootElement?null:n,s=r?r.getBoundingClientRect():e,o=Gt(i)?i.targetTouches[0]:i,a=this._getViewportScrollPosition(),l=o.pageX-s.left-a.left,c=o.pageY-s.top-a.top;return{x:s.left-e.left+l,y:s.top-e.top+c}}_getPointerPositionOnPage(e){let n=this._getViewportScrollPosition(),i=Gt(e)?e.touches[0]||e.changedTouches[0]||{pageX:0,pageY:0}:e,r=i.pageX-n.left,s=i.pageY-n.top;if(this._ownerSVGElement){let o=this._ownerSVGElement.getScreenCTM();if(o){let a=this._ownerSVGElement.createSVGPoint();return a.x=r,a.y=s,a.matrixTransform(o.inverse())}}return{x:r,y:s}}_getConstrainedPointerPosition(e){let n=this._dropContainer?this._dropContainer.lockAxis:null,{x:i,y:r}=this.constrainPosition?this.constrainPosition(e,this,this._initialDomRect,this._pickupPositionInElement):e;if(this.lockAxis==="x"||n==="x"?r=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):(this.lockAxis==="y"||n==="y")&&(i=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){let{x:s,y:o}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,a=this._boundaryRect,{width:l,height:c}=this._getPreviewRect(),u=a.top+o,h=a.bottom-(c-o),d=a.left+s,f=a.right-(l-s);i=Oo(i,d,f),r=Oo(r,u,h)}return{x:i,y:r}}_updatePointerDirectionDelta(e){let{x:n,y:i}=e,r=this._pointerDirectionDelta,s=this._pointerPositionAtLastDirectionChange,o=Math.abs(n-s.x),a=Math.abs(i-s.y);return o>this._config.pointerDirectionChangeThreshold&&(r.x=n>s.x?1:-1,s.x=n),a>this._config.pointerDirectionChangeThreshold&&(r.y=i>s.y?1:-1,s.y=i),r}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;let e=this._handles.length>0||!this.isDragging();e!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=e,It(this._rootElement,e))}_removeRootElementListeners(e){e.removeEventListener("mousedown",this._pointerDown,Hi),e.removeEventListener("touchstart",this._pointerDown,ko),e.removeEventListener("dragstart",this._nativeDragStart,Hi)}_applyRootElementTransform(e,n){let i=zi(e,n),r=this._rootElement.style;this._initialTransform==null&&(this._initialTransform=r.transform&&r.transform!="none"?r.transform:""),r.transform=Ui(i,this._initialTransform)}_applyPreviewTransform(e,n){let i=this._previewTemplate?.template?void 0:this._initialTransform,r=zi(e,n);this._preview.style.transform=Ui(r,i)}_getDragDistance(e){let n=this._pickupPositionOnPage;return n?{x:e.x-n.x,y:e.y-n.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:e,y:n}=this._passiveTransform;if(e===0&&n===0||this.isDragging()||!this._boundaryElement)return;let i=this._rootElement.getBoundingClientRect(),r=this._boundaryElement.getBoundingClientRect();if(r.width===0&&r.height===0||i.width===0&&i.height===0)return;let s=r.left-i.left,o=i.right-r.right,a=r.top-i.top,l=i.bottom-r.bottom;r.width>i.width?(s>0&&(e+=s),o>0&&(e-=o)):e=0,r.height>i.height?(a>0&&(n+=a),l>0&&(n-=l)):n=0,(e!==this._passiveTransform.x||n!==this._passiveTransform.y)&&this.setFreeDragPosition({y:n,x:e})}_getDragStartDelay(e){let n=this.dragStartDelay;return typeof n=="number"?n:Gt(e)?n.touch:n?n.mouse:0}_updateOnScroll(e){let n=this._parentPositions.handleScroll(e);if(n){let i=Ut(e);this._boundaryRect&&i!==this._boundaryElement&&i.contains(this._boundaryElement)&&Wt(this._boundaryRect,n.top,n.left),this._pickupPositionOnPage.x+=n.left,this._pickupPositionOnPage.y+=n.top,this._dropContainer||(this._activeTransform.x-=n.left,this._activeTransform.y-=n.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return this._cachedShadowRoot===void 0&&(this._cachedShadowRoot=tr(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(e,n){let i=this._previewContainer||"global";if(i==="parent")return e;if(i==="global"){let r=this._document;return n||r.fullscreenElement||r.webkitFullscreenElement||r.mozFullScreenElement||r.msFullscreenElement||r.body}return te(i)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialDomRect),this._previewRect}_getTargetHandle(e){return this._handles.find(n=>e.target&&(e.target===n||n.contains(e.target)))}};function zi(t,e){return`translate3d(${Math.round(t)}px, ${Math.round(e)}px, 0)`}function Oo(t,e,n){return Math.max(e,Math.min(n,t))}function Gt(t){return t.type[0]==="t"}function Fo(t,e){let n=t.rootNodes;if(n.length===1&&n[0].nodeType===e.ELEMENT_NODE)return n[0];let i=e.createElement("div");return n.forEach(r=>i.appendChild(r)),i}function Vo(t,e){t.style.width=`${e.width}px`,t.style.height=`${e.height}px`,t.style.transform=zi(e.left,e.top)}function dr(t,e,n){let i=No(e,t.length-1),r=No(n,t.length-1);if(i===r)return;let s=t[i],o=r<i?-1:1;for(let a=i;a!==r;a+=o)t[a]=t[a+o];t[r]=s}function No(t,e){return Math.max(0,Math.min(e,t))}var ar=class{constructor(e,n){this._element=e,this._dragDropRegistry=n,this._itemPositions=[],this.orientation="vertical",this._previousSwap={drag:null,delta:0,overlaps:!1}}start(e){this.withItems(e)}sort(e,n,i,r){let s=this._itemPositions,o=this._getItemIndexFromPointerPosition(e,n,i,r);if(o===-1&&s.length>0)return null;let a=this.orientation==="horizontal",l=s.findIndex(g=>g.drag===e),c=s[o],u=s[l].clientRect,h=c.clientRect,d=l>o?1:-1,f=this._getItemOffsetPx(u,h,d),v=this._getSiblingOffsetPx(l,s,d),p=s.slice();return dr(s,l,o),s.forEach((g,m)=>{if(p[m]===g)return;let y=g.drag===e,b=y?f:v,_=y?e.getPlaceholderElement():g.drag.getRootElement();g.offset+=b,a?(_.style.transform=Ui(`translate3d(${Math.round(g.offset)}px, 0, 0)`,g.initialTransform),Wt(g.clientRect,0,b)):(_.style.transform=Ui(`translate3d(0, ${Math.round(g.offset)}px, 0)`,g.initialTransform),Wt(g.clientRect,b,0))}),this._previousSwap.overlaps=sr(h,n,i),this._previousSwap.drag=c.drag,this._previousSwap.delta=a?r.x:r.y,{previousIndex:l,currentIndex:o}}enter(e,n,i,r){let s=r==null||r<0?this._getItemIndexFromPointerPosition(e,n,i):r,o=this._activeDraggables,a=o.indexOf(e),l=e.getPlaceholderElement(),c=o[s];if(c===e&&(c=o[s+1]),!c&&(s==null||s===-1||s<o.length-1)&&this._shouldEnterAsFirstChild(n,i)&&(c=o[0]),a>-1&&o.splice(a,1),c&&!this._dragDropRegistry.isDragging(c)){let u=c.getRootElement();u.parentElement.insertBefore(l,u),o.splice(s,0,e)}else te(this._element).appendChild(l),o.push(e);l.style.transform="",this._cacheItemPositions()}withItems(e){this._activeDraggables=e.slice(),this._cacheItemPositions()}withSortPredicate(e){this._sortPredicate=e}reset(){this._activeDraggables.forEach(e=>{let n=e.getRootElement();if(n){let i=this._itemPositions.find(r=>r.drag===e)?.initialTransform;n.style.transform=i||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(e){return(this.orientation==="horizontal"&&this.direction==="rtl"?this._itemPositions.slice().reverse():this._itemPositions).findIndex(i=>i.drag===e)}updateOnScroll(e,n){this._itemPositions.forEach(({clientRect:i})=>{Wt(i,e,n)}),this._itemPositions.forEach(({drag:i})=>{this._dragDropRegistry.isDragging(i)&&i._sortFromLastPointerPosition()})}_cacheItemPositions(){let e=this.orientation==="horizontal";this._itemPositions=this._activeDraggables.map(n=>{let i=n.getVisibleElement();return{drag:n,offset:0,initialTransform:i.style.transform||"",clientRect:ur(i)}}).sort((n,i)=>e?n.clientRect.left-i.clientRect.left:n.clientRect.top-i.clientRect.top)}_getItemOffsetPx(e,n,i){let r=this.orientation==="horizontal",s=r?n.left-e.left:n.top-e.top;return i===-1&&(s+=r?n.width-e.width:n.height-e.height),s}_getSiblingOffsetPx(e,n,i){let r=this.orientation==="horizontal",s=n[e].clientRect,o=n[e+i*-1],a=s[r?"width":"height"]*i;if(o){let l=r?"left":"top",c=r?"right":"bottom";i===-1?a-=o.clientRect[l]-s[c]:a+=s[l]-o.clientRect[c]}return a}_shouldEnterAsFirstChild(e,n){if(!this._activeDraggables.length)return!1;let i=this._itemPositions,r=this.orientation==="horizontal";if(i[0].drag!==this._activeDraggables[0]){let o=i[i.length-1].clientRect;return r?e>=o.right:n>=o.bottom}else{let o=i[0].clientRect;return r?e<=o.left:n<=o.top}}_getItemIndexFromPointerPosition(e,n,i,r){let s=this.orientation==="horizontal",o=this._itemPositions.findIndex(({drag:a,clientRect:l})=>{if(a===e)return!1;if(r){let c=s?r.x:r.y;if(a===this._previousSwap.drag&&this._previousSwap.overlaps&&c===this._previousSwap.delta)return!1}return s?n>=Math.floor(l.left)&&n<Math.floor(l.right):i>=Math.floor(l.top)&&i<Math.floor(l.bottom)});return o===-1||!this._sortPredicate(o,e)?-1:o}},Lo=.05,Ho=.05,Ee=function(t){return t[t.NONE=0]="NONE",t[t.UP=1]="UP",t[t.DOWN=2]="DOWN",t}(Ee||{}),ue=function(t){return t[t.NONE=0]="NONE",t[t.LEFT=1]="LEFT",t[t.RIGHT=2]="RIGHT",t}(ue||{}),lr=class{constructor(e,n,i,r,s){this._dragDropRegistry=n,this._ngZone=r,this._viewportRuler=s,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new j,this.entered=new j,this.exited=new j,this.dropped=new j,this.sorted=new j,this.receivingStarted=new j,this.receivingStopped=new j,this._isDragging=!1,this._draggables=[],this._siblings=[],this._activeSiblings=new Set,this._viewportScrollSubscription=Je.EMPTY,this._verticalScrollDirection=Ee.NONE,this._horizontalScrollDirection=ue.NONE,this._stopScrollTimers=new j,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),ps(0,yn).pipe(gt(this._stopScrollTimers)).subscribe(()=>{let o=this._scrollNode,a=this.autoScrollStep;this._verticalScrollDirection===Ee.UP?o.scrollBy(0,-a):this._verticalScrollDirection===Ee.DOWN&&o.scrollBy(0,a),this._horizontalScrollDirection===ue.LEFT?o.scrollBy(-a,0):this._horizontalScrollDirection===ue.RIGHT&&o.scrollBy(a,0)})},this.element=te(e),this._document=i,this.withScrollableParents([this.element]),n.registerDropContainer(this),this._parentPositions=new Gi(i),this._sortStrategy=new ar(this.element,n),this._sortStrategy.withSortPredicate((o,a)=>this.sortPredicate(o,a,this))}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(e,n,i,r){this._draggingStarted(),r==null&&this.sortingDisabled&&(r=this._draggables.indexOf(e)),this._sortStrategy.enter(e,n,i,r),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:e,container:this,currentIndex:this.getItemIndex(e)})}exit(e){this._reset(),this.exited.next({item:e,container:this})}drop(e,n,i,r,s,o,a,l={}){this._reset(),this.dropped.next({item:e,currentIndex:n,previousIndex:i,container:this,previousContainer:r,isPointerOverContainer:s,distance:o,dropPoint:a,event:l})}withItems(e){let n=this._draggables;return this._draggables=e,e.forEach(i=>i._withDropContainer(this)),this.isDragging()&&(n.filter(r=>r.isDragging()).every(r=>e.indexOf(r)===-1)?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(e){return this._sortStrategy.direction=e,this}connectedTo(e){return this._siblings=e.slice(),this}withOrientation(e){return this._sortStrategy.orientation=e,this}withScrollableParents(e){let n=te(this.element);return this._scrollableElements=e.indexOf(n)===-1?[n,...e]:e.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(e){return this._isDragging?this._sortStrategy.getItemIndex(e):this._draggables.indexOf(e)}isReceiving(){return this._activeSiblings.size>0}_sortItem(e,n,i,r){if(this.sortingDisabled||!this._domRect||!Ao(this._domRect,Lo,n,i))return;let s=this._sortStrategy.sort(e,n,i,r);s&&this.sorted.next({previousIndex:s.previousIndex,currentIndex:s.currentIndex,container:this,item:e})}_startScrollingIfNecessary(e,n){if(this.autoScrollDisabled)return;let i,r=Ee.NONE,s=ue.NONE;if(this._parentPositions.positions.forEach((o,a)=>{a===this._document||!o.clientRect||i||Ao(o.clientRect,Lo,e,n)&&([r,s]=dc(a,o.clientRect,this._sortStrategy.direction,e,n),(r||s)&&(i=a))}),!r&&!s){let{width:o,height:a}=this._viewportRuler.getViewportSize(),l={width:o,height:a,top:0,right:o,bottom:a,left:0};r=Ko(l,n),s=zo(l,e),i=window}i&&(r!==this._verticalScrollDirection||s!==this._horizontalScrollDirection||i!==this._scrollNode)&&(this._verticalScrollDirection=r,this._horizontalScrollDirection=s,this._scrollNode=i,(r||s)&&i?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){let e=te(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=e.msScrollSnapType||e.scrollSnapType||"",e.scrollSnapType=e.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){let e=te(this.element);this._parentPositions.cache(this._scrollableElements),this._domRect=this._parentPositions.positions.get(e).clientRect}_reset(){this._isDragging=!1;let e=te(this.element).style;e.scrollSnapType=e.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(n=>n._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_isOverContainer(e,n){return this._domRect!=null&&sr(this._domRect,e,n)}_getSiblingContainerFromPosition(e,n,i){return this._siblings.find(r=>r._canReceive(e,n,i))}_canReceive(e,n,i){if(!this._domRect||!sr(this._domRect,n,i)||!this.enterPredicate(e,this))return!1;let r=this._getShadowRoot().elementFromPoint(n,i);if(!r)return!1;let s=te(this.element);return r===s||s.contains(r)}_startReceiving(e,n){let i=this._activeSiblings;!i.has(e)&&n.every(r=>this.enterPredicate(r,this)||this._draggables.indexOf(r)>-1)&&(i.add(e),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:e,receiver:this,items:n}))}_stopReceiving(e){this._activeSiblings.delete(e),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:e,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(e=>{if(this.isDragging()){let n=this._parentPositions.handleScroll(e);n&&this._sortStrategy.updateOnScroll(n.top,n.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){let e=tr(te(this.element));this._cachedShadowRoot=e||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){let e=this._sortStrategy.getActiveItemsSnapshot().filter(n=>n.isDragging());this._siblings.forEach(n=>n._startReceiving(this,e))}};function Ko(t,e){let{top:n,bottom:i,height:r}=t,s=r*Ho;return e>=n-s&&e<=n+s?Ee.UP:e>=i-s&&e<=i+s?Ee.DOWN:Ee.NONE}function zo(t,e){let{left:n,right:i,width:r}=t,s=r*Ho;return e>=n-s&&e<=n+s?ue.LEFT:e>=i-s&&e<=i+s?ue.RIGHT:ue.NONE}function dc(t,e,n,i,r){let s=Ko(e,r),o=zo(e,i),a=Ee.NONE,l=ue.NONE;if(s){let c=t.scrollTop;s===Ee.UP?c>0&&(a=Ee.UP):t.scrollHeight-c>t.clientHeight&&(a=Ee.DOWN)}if(o){let c=t.scrollLeft;n==="rtl"?o===ue.RIGHT?c<0&&(l=ue.RIGHT):t.scrollWidth+c>t.clientWidth&&(l=ue.LEFT):o===ue.LEFT?c>0&&(l=ue.LEFT):t.scrollWidth-c>t.clientWidth&&(l=ue.RIGHT)}return[a,l]}var Ki=ji({passive:!1,capture:!0}),hc=(()=>{let e=class e{constructor(i,r){this._ngZone=i,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=s=>s.isDragging(),this.pointerMove=new j,this.pointerUp=new j,this.scroll=new j,this._preventDefaultWhileDragging=s=>{this._activeDragInstances.length>0&&s.preventDefault()},this._persistentTouchmoveListener=s=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&s.preventDefault(),this.pointerMove.next(s))},this._document=r}registerDropContainer(i){this._dropInstances.has(i)||this._dropInstances.add(i)}registerDragItem(i){this._dragInstances.add(i),this._dragInstances.size===1&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,Ki)})}removeDropContainer(i){this._dropInstances.delete(i)}removeDragItem(i){this._dragInstances.delete(i),this.stopDragging(i),this._dragInstances.size===0&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,Ki)}startDragging(i,r){if(!(this._activeDragInstances.indexOf(i)>-1)&&(this._activeDragInstances.push(i),this._activeDragInstances.length===1)){let s=r.type.startsWith("touch");this._globalListeners.set(s?"touchend":"mouseup",{handler:o=>this.pointerUp.next(o),options:!0}).set("scroll",{handler:o=>this.scroll.next(o),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:Ki}),s||this._globalListeners.set("mousemove",{handler:o=>this.pointerMove.next(o),options:Ki}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((o,a)=>{this._document.addEventListener(a,o.handler,o.options)})})}}stopDragging(i){let r=this._activeDragInstances.indexOf(i);r>-1&&(this._activeDragInstances.splice(r,1),this._activeDragInstances.length===0&&this._clearGlobalListeners())}isDragging(i){return this._activeDragInstances.indexOf(i)>-1}scrolled(i){let r=[this.scroll];return i&&i!==this._document&&r.push(new Vt(s=>this._ngZone.runOutsideAngular(()=>{let a=l=>{this._activeDragInstances.length&&s.next(l)};return i.addEventListener("scroll",a,!0),()=>{i.removeEventListener("scroll",a,!0)}}))),fi(...r)}ngOnDestroy(){this._dragInstances.forEach(i=>this.removeDragItem(i)),this._dropInstances.forEach(i=>this.removeDropContainer(i)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((i,r)=>{this._document.removeEventListener(r,i.handler,i.options)}),this._globalListeners.clear()}};e.\u0275fac=function(r){return new(r||e)($(it),$(Ve))},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),fc={dragStartThreshold:5,pointerDirectionChangeThreshold:5},hr=(()=>{let e=class e{constructor(i,r,s,o){this._document=i,this._ngZone=r,this._viewportRuler=s,this._dragDropRegistry=o}createDrag(i,r=fc){return new or(i,r,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(i){return new lr(i,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}};e.\u0275fac=function(r){return new(r||e)($(Ve),$(it),$(Co),$(hc))},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Bo=new se("CDK_DRAG_PARENT");var pc=new se("CdkDragHandle");var Uo=new se("CDK_DRAG_CONFIG"),mc="cdk-drag",Go=new se("CdkDropList"),Wo=(()=>{let e=class e{get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(i){this._disabled=i,this._dragRef.disabled=this._disabled}constructor(i,r,s,o,a,l,c,u,h,d,f){this.element=i,this.dropContainer=r,this._ngZone=o,this._viewContainerRef=a,this._dir=c,this._changeDetectorRef=h,this._selfHandle=d,this._parentDrag=f,this._destroyed=new j,this._handles=new di([]),this.started=new G,this.released=new G,this.ended=new G,this.entered=new G,this.exited=new G,this.dropped=new G,this.moved=new Vt(v=>{let p=this._dragRef.moved.pipe(hi(g=>({source:this,pointerPosition:g.pointerPosition,event:g.event,delta:g.delta,distance:g.distance}))).subscribe(v);return()=>{p.unsubscribe()}}),this._dragRef=u.createDrag(i,{dragStartThreshold:l&&l.dragStartThreshold!=null?l.dragStartThreshold:5,pointerDirectionChangeThreshold:l&&l.pointerDirectionChangeThreshold!=null?l.pointerDirectionChangeThreshold:5,zIndex:l?.zIndex}),this._dragRef.data=this,e._dragInstances.push(this),l&&this._assignDefaults(l),r&&(this._dragRef._withDropContainer(r._dropListRef),r.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(i){this._dragRef.setFreeDragPosition(i)}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(wn(1),gt(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._setupHandlesListener(),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})})}ngOnChanges(i){let r=i.rootElementSelector,s=i.freeDragPosition;r&&!r.firstChange&&this._updateRootElement(),s&&!s.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);let i=e._dragInstances.indexOf(this);i>-1&&e._dragInstances.splice(i,1),this._ngZone.runOutsideAngular(()=>{this._handles.complete(),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_addHandle(i){let r=this._handles.getValue();r.push(i),this._handles.next(r)}_removeHandle(i){let r=this._handles.getValue(),s=r.indexOf(i);s>-1&&(r.splice(s,1),this._handles.next(r))}_setPreviewTemplate(i){this._previewTemplate=i}_resetPreviewTemplate(i){i===this._previewTemplate&&(this._previewTemplate=null)}_setPlaceholderTemplate(i){this._placeholderTemplate=i}_resetPlaceholderTemplate(i){i===this._placeholderTemplate&&(this._placeholderTemplate=null)}_updateRootElement(){let i=this.element.nativeElement,r=i;this.rootElementSelector&&(r=i.closest!==void 0?i.closest(this.rootElementSelector):i.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(r||i)}_getBoundaryElement(){let i=this.boundaryElement;return i?typeof i=="string"?this.element.nativeElement.closest(i):te(i):null}_syncInputs(i){i.beforeStarted.subscribe(()=>{if(!i.isDragging()){let r=this._dir,s=this.dragStartDelay,o=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,a=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;i.disabled=this.disabled,i.lockAxis=this.lockAxis,i.dragStartDelay=typeof s=="object"&&s?s:Bi(s),i.constrainPosition=this.constrainPosition,i.previewClass=this.previewClass,i.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(o).withPreviewTemplate(a).withPreviewContainer(this.previewContainer||"global"),r&&i.withDirection(r.value)}}),i.beforeStarted.pipe(wn(1)).subscribe(()=>{if(this._parentDrag){i.withParent(this._parentDrag._dragRef);return}let r=this.element.nativeElement.parentElement;for(;r;){if(r.classList.contains(mc)){i.withParent(e._dragInstances.find(s=>s.element.nativeElement===r)?._dragRef||null);break}r=r.parentElement}})}_handleEvents(i){i.started.subscribe(r=>{this.started.emit({source:this,event:r.event}),this._changeDetectorRef.markForCheck()}),i.released.subscribe(r=>{this.released.emit({source:this,event:r.event})}),i.ended.subscribe(r=>{this.ended.emit({source:this,distance:r.distance,dropPoint:r.dropPoint,event:r.event}),this._changeDetectorRef.markForCheck()}),i.entered.subscribe(r=>{this.entered.emit({container:r.container.data,item:this,currentIndex:r.currentIndex})}),i.exited.subscribe(r=>{this.exited.emit({container:r.container.data,item:this})}),i.dropped.subscribe(r=>{this.dropped.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,previousContainer:r.previousContainer.data,container:r.container.data,isPointerOverContainer:r.isPointerOverContainer,item:this,distance:r.distance,dropPoint:r.dropPoint,event:r.event})})}_assignDefaults(i){let{lockAxis:r,dragStartDelay:s,constrainPosition:o,previewClass:a,boundaryElement:l,draggingDisabled:c,rootElementSelector:u,previewContainer:h}=i;this.disabled=c??!1,this.dragStartDelay=s||0,r&&(this.lockAxis=r),o&&(this.constrainPosition=o),a&&(this.previewClass=a),l&&(this.boundaryElement=l),u&&(this.rootElementSelector=u),h&&(this.previewContainer=h)}_setupHandlesListener(){this._handles.pipe(gs(i=>{let r=i.map(s=>s.element);this._selfHandle&&this.rootElementSelector&&r.push(this.element),this._dragRef.withHandles(r)}),Cn(i=>fi(...i.map(r=>r._stateChanges.pipe(pi(r))))),gt(this._destroyed)).subscribe(i=>{let r=this._dragRef,s=i.element.nativeElement;i.disabled?r.disableHandle(s):r.enableHandle(s)})}};e._dragInstances=[],e.\u0275fac=function(r){return new(r||e)(I(Te),I(Go,12),I(Ve),I(it),I(xn),I(Uo,8),I(ir,8),I(hr),I(Re),I(pc,10),I(Bo,12))},e.\u0275dir=q({type:e,selectors:[["","cdkDrag",""]],hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(r,s){r&2&&Fe("cdk-drag-disabled",s.disabled)("cdk-drag-dragging",s._dragRef.isDragging())},inputs:{data:[L.None,"cdkDragData","data"],lockAxis:[L.None,"cdkDragLockAxis","lockAxis"],rootElementSelector:[L.None,"cdkDragRootElement","rootElementSelector"],boundaryElement:[L.None,"cdkDragBoundary","boundaryElement"],dragStartDelay:[L.None,"cdkDragStartDelay","dragStartDelay"],freeDragPosition:[L.None,"cdkDragFreeDragPosition","freeDragPosition"],disabled:[L.HasDecoratorInputTransform,"cdkDragDisabled","disabled",rt],constrainPosition:[L.None,"cdkDragConstrainPosition","constrainPosition"],previewClass:[L.None,"cdkDragPreviewClass","previewClass"],previewContainer:[L.None,"cdkDragPreviewContainer","previewContainer"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],standalone:!0,features:[De([{provide:Bo,useExisting:e}]),_i,tt]});let t=e;return t})(),jo=new se("CdkDropListGroup");var gc=0,$o=(()=>{let e=class e{get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(i){this._dropListRef.disabled=this._disabled=i}constructor(i,r,s,o,a,l,c){this.element=i,this._changeDetectorRef=s,this._scrollDispatcher=o,this._dir=a,this._group=l,this._destroyed=new j,this.connectedTo=[],this.id=`cdk-drop-list-${gc++}`,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.dropped=new G,this.entered=new G,this.exited=new G,this.sorted=new G,this._unsortedItems=new Set,this._dropListRef=r.createDropList(i),this._dropListRef.data=this,c&&this._assignDefaults(c),this._dropListRef.enterPredicate=(u,h)=>this.enterPredicate(u.data,h.data),this._dropListRef.sortPredicate=(u,h,d)=>this.sortPredicate(u,h.data,d.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),e._dropLists.push(this),l&&l._items.add(this)}addItem(i){this._unsortedItems.add(i),this._dropListRef.isDragging()&&this._syncItemsWithRef()}removeItem(i){this._unsortedItems.delete(i),this._dropListRef.isDragging()&&this._syncItemsWithRef()}getSortedItems(){return Array.from(this._unsortedItems).sort((i,r)=>i._dragRef.getVisibleElement().compareDocumentPosition(r._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){let i=e._dropLists.indexOf(this);i>-1&&e._dropLists.splice(i,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(i){this._dir&&this._dir.change.pipe(pi(this._dir.value),gt(this._destroyed)).subscribe(r=>i.withDirection(r)),i.beforeStarted.subscribe(()=>{let r=bo(this.connectedTo).map(s=>{if(typeof s=="string"){let o=e._dropLists.find(a=>a.id===s);return o}return s});if(this._group&&this._group._items.forEach(s=>{r.indexOf(s)===-1&&r.push(s)}),!this._scrollableParentsResolved){let s=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(o=>o.getElementRef().nativeElement);this._dropListRef.withScrollableParents(s),this._scrollableParentsResolved=!0}i.disabled=this.disabled,i.lockAxis=this.lockAxis,i.sortingDisabled=this.sortingDisabled,i.autoScrollDisabled=this.autoScrollDisabled,i.autoScrollStep=Bi(this.autoScrollStep,2),i.connectedTo(r.filter(s=>s&&s!==this).map(s=>s._dropListRef)).withOrientation(this.orientation)})}_handleEvents(i){i.beforeStarted.subscribe(()=>{this._syncItemsWithRef(),this._changeDetectorRef.markForCheck()}),i.entered.subscribe(r=>{this.entered.emit({container:this,item:r.item.data,currentIndex:r.currentIndex})}),i.exited.subscribe(r=>{this.exited.emit({container:this,item:r.item.data}),this._changeDetectorRef.markForCheck()}),i.sorted.subscribe(r=>{this.sorted.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,container:this,item:r.item.data})}),i.dropped.subscribe(r=>{this.dropped.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,previousContainer:r.previousContainer.data,container:r.container.data,item:r.item.data,isPointerOverContainer:r.isPointerOverContainer,distance:r.distance,dropPoint:r.dropPoint,event:r.event}),this._changeDetectorRef.markForCheck()}),fi(i.receivingStarted,i.receivingStopped).subscribe(()=>this._changeDetectorRef.markForCheck())}_assignDefaults(i){let{lockAxis:r,draggingDisabled:s,sortingDisabled:o,listAutoScrollDisabled:a,listOrientation:l}=i;this.disabled=s??!1,this.sortingDisabled=o??!1,this.autoScrollDisabled=a??!1,this.orientation=l||"vertical",r&&(this.lockAxis=r)}_syncItemsWithRef(){this._dropListRef.withItems(this.getSortedItems().map(i=>i._dragRef))}};e._dropLists=[],e.\u0275fac=function(r){return new(r||e)(I(Te),I(hr),I(Re),I(wo),I(ir,8),I(jo,12),I(Uo,8))},e.\u0275dir=q({type:e,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(r,s){r&2&&(Me("id",s.id),Fe("cdk-drop-list-disabled",s.disabled)("cdk-drop-list-dragging",s._dropListRef.isDragging())("cdk-drop-list-receiving",s._dropListRef.isReceiving()))},inputs:{connectedTo:[L.None,"cdkDropListConnectedTo","connectedTo"],data:[L.None,"cdkDropListData","data"],orientation:[L.None,"cdkDropListOrientation","orientation"],id:"id",lockAxis:[L.None,"cdkDropListLockAxis","lockAxis"],disabled:[L.HasDecoratorInputTransform,"cdkDropListDisabled","disabled",rt],sortingDisabled:[L.HasDecoratorInputTransform,"cdkDropListSortingDisabled","sortingDisabled",rt],enterPredicate:[L.None,"cdkDropListEnterPredicate","enterPredicate"],sortPredicate:[L.None,"cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:[L.HasDecoratorInputTransform,"cdkDropListAutoScrollDisabled","autoScrollDisabled",rt],autoScrollStep:[L.None,"cdkDropListAutoScrollStep","autoScrollStep"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],standalone:!0,features:[De([{provide:jo,useValue:void 0},{provide:Go,useExisting:e}]),_i]});let t=e;return t})();var Kh=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=oe({type:e}),e.\u0275inj=re({providers:[hr],imports:[Do]});let t=e;return t})();var vc=t=>({"mb-3":t});function yc(t,e){if(t&1&&(T(0,"div",3),ee(1),P()),t&2){let n=e.$implicit,i=e.$index;M("ngClass",yi(2,vc,i===4)),k(),vi(" ",n.name," ")}}var Zo=(()=>{let e=class e{drop(i){dr(this.players,i.previousIndex,i.currentIndex)}get players(){return this.team.players}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Ae({type:e,selectors:[["app-team-reorder"]],inputs:{team:"team"},decls:7,vars:0,consts:[[1,"team-reorder-box"],[1,"starting-five"],["cdkDropList","",1,"player-list",3,"cdkDropListDropped"],["cdkDrag","",1,"player-box",3,"ngClass"]],template:function(r,s){r&1&&(T(0,"div",0)(1,"div",1)(2,"span"),ee(3,"Pierwsza pi\u0105tka"),P()(),T(4,"div",2),W("cdkDropListDropped",function(a){return s.drop(a)}),ws(5,yc,2,4,"div",3,bs),P()()),r&2&&(k(5),Cs(s.players))},dependencies:[yt,$o,Wo],styles:[".team-reorder-box[_ngcontent-%COMP%]{min-width:320px;position:relative;padding-top:20px}.team-reorder-box[_ngcontent-%COMP%]   .starting-five[_ngcontent-%COMP%]{position:absolute;left:-10px;top:10px;width:calc(100% + 20px);height:315px;border:2px solid;border-radius:15px;z-index:-1}.team-reorder-box[_ngcontent-%COMP%]   .starting-five[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;top:-16px;left:12px;background:var(--input-background);padding:0 3px}.player-list[_ngcontent-%COMP%]{width:300px;max-width:100%;display:block;background:#fff0;border-radius:6px}.player-box[_ngcontent-%COMP%]{padding:15px 10px;border:solid 1px var(--input-border-color);background-color:var(--input-background);display:flex;flex-direction:row;align-items:center;cursor:move;font-size:14px;border-radius:10px;margin-bottom:10px}"]});let t=e;return t})();var H=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Z=Object.keys,ne=Array.isArray;typeof Promise<"u"&&!H.Promise&&(H.Promise=Promise);function he(t,e){return typeof e!="object"||Z(e).forEach(function(n){t[n]=e[n]}),t}var Qt=Object.getPrototypeOf,wc={}.hasOwnProperty;function ve(t,e){return wc.call(t,e)}function Tt(t,e){typeof e=="function"&&(e=e(Qt(t))),(typeof Reflect>"u"?Z:Reflect.ownKeys)(e).forEach(n=>{Ke(t,n,e[n])})}var aa=Object.defineProperty;function Ke(t,e,n,i){aa(t,e,he(n&&ve(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},i))}function Mt(t){return{from:function(e){return t.prototype=Object.create(e.prototype),Ke(t.prototype,"constructor",t),{extend:Tt.bind(null,t.prototype)}}}}var Cc=Object.getOwnPropertyDescriptor;function $r(t,e){let n=Cc(t,e),i;return n||(i=Qt(t))&&$r(i,e)}var Dc=[].slice;function pn(t,e,n){return Dc.call(t,e,n)}function la(t,e){return e(t)}function $t(t){if(!t)throw new Error("Assertion Failed")}function ca(t){H.setImmediate?setImmediate(t):setTimeout(t,0)}function ua(t,e){return t.reduce((n,i,r)=>{var s=e(i,r);return s&&(n[s[0]]=s[1]),n},{})}function Ic(t,e,n){try{t.apply(null,n)}catch(i){e&&e(i)}}function He(t,e){if(typeof e=="string"&&ve(t,e))return t[e];if(!e)return t;if(typeof e!="string"){for(var n=[],i=0,r=e.length;i<r;++i){var s=He(t,e[i]);n.push(s)}return n}var o=e.indexOf(".");if(o!==-1){var a=t[e.substr(0,o)];return a==null?void 0:He(a,e.substr(o+1))}}function Pe(t,e,n){if(!(!t||e===void 0)&&!("isFrozen"in Object&&Object.isFrozen(t)))if(typeof e!="string"&&"length"in e){$t(typeof n!="string"&&"length"in n);for(var i=0,r=e.length;i<r;++i)Pe(t,e[i],n[i])}else{var s=e.indexOf(".");if(s!==-1){var o=e.substr(0,s),a=e.substr(s+1);if(a==="")n===void 0?ne(t)&&!isNaN(parseInt(o))?t.splice(o,1):delete t[o]:t[o]=n;else{var l=t[o];(!l||!ve(t,o))&&(l=t[o]={}),Pe(l,a,n)}}else n===void 0?ne(t)&&!isNaN(parseInt(e))?t.splice(e,1):delete t[e]:t[e]=n}}function Ec(t,e){typeof e=="string"?Pe(t,e,void 0):"length"in e&&[].map.call(e,function(n){Pe(t,n,void 0)})}function da(t){var e={};for(var n in t)ve(t,n)&&(e[n]=t[n]);return e}var xc=[].concat;function ha(t){return xc.apply([],t)}var fa="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(ha([8,16,32,64].map(t=>["Int","Uint","Float"].map(e=>e+t+"Array")))).filter(t=>H[t]),Sc=fa.map(t=>H[t]);ua(fa,t=>[t,!0]);var $e=null;function si(t){$e=typeof WeakMap<"u"&&new WeakMap;let e=yr(t);return $e=null,e}function yr(t){if(!t||typeof t!="object")return t;let e=$e&&$e.get(t);if(e)return e;if(ne(t)){e=[],$e&&$e.set(t,e);for(var n=0,i=t.length;n<i;++n)e.push(yr(t[n]))}else if(Sc.indexOf(t.constructor)>=0)e=t;else{let s=Qt(t);e=s===Object.prototype?{}:Object.create(s),$e&&$e.set(t,e);for(var r in t)ve(t,r)&&(e[r]=yr(t[r]))}return e}var{toString:Ac}={};function br(t){return Ac.call(t).slice(8,-1)}var wr=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Tc=typeof wr=="symbol"?function(t){var e;return t!=null&&(e=t[wr])&&e.apply(t)}:function(){return null},St={};function Be(t){var e,n,i,r;if(arguments.length===1){if(ne(t))return t.slice();if(this===St&&typeof t=="string")return[t];if(r=Tc(t)){for(n=[];i=r.next(),!i.done;)n.push(i.value);return n}if(t==null)return[t];if(e=t.length,typeof e=="number"){for(n=new Array(e);e--;)n[e]=t[e];return n}return[t]}for(e=arguments.length,n=new Array(e);e--;)n[e]=arguments[e];return n}var Zr=typeof Symbol<"u"?t=>t[Symbol.toStringTag]==="AsyncFunction":()=>!1,Oe=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function pa(t,e){Oe=t,ma=e}var ma=()=>!0,Pc=!new Error("").stack;function ft(){if(Pc)try{throw ft.arguments,new Error}catch(t){return t}return new Error}function Cr(t,e){var n=t.stack;return n?(e=e||0,n.indexOf(t.name)===0&&(e+=(t.name+t.message).split(`
`).length),n.split(`
`).slice(e).filter(ma).map(i=>`
`+i).join("")):""}var Mc=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],ga=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],qr=Mc.concat(ga),Rc={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Rt(t,e){this._e=ft(),this.name=t,this.message=e}Mt(Rt).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+Cr(this._e,2))}},toString:function(){return this.name+": "+this.message}});function _a(t,e){return t+". Errors: "+Object.keys(e).map(n=>e[n].toString()).filter((n,i,r)=>r.indexOf(n)===i).join(`
`)}function rn(t,e,n,i){this._e=ft(),this.failures=e,this.failedKeys=i,this.successCount=n,this.message=_a(t,e)}Mt(rn).from(Rt);function qt(t,e){this._e=ft(),this.name="BulkError",this.failures=Object.keys(e).map(n=>e[n]),this.failuresByPos=e,this.message=_a(t,e)}Mt(qt).from(Rt);var Yr=qr.reduce((t,e)=>(t[e]=e+"Error",t),{}),kc=Rt,S=qr.reduce((t,e)=>{var n=e+"Error";function i(r,s){this._e=ft(),this.name=n,r?typeof r=="string"?(this.message=`${r}${s?`
 `+s:""}`,this.inner=s||null):typeof r=="object"&&(this.message=`${r.name} ${r.message}`,this.inner=r):(this.message=Rc[e]||n,this.inner=null)}return Mt(i).from(kc),t[e]=i,t},{});S.Syntax=SyntaxError;S.Type=TypeError;S.Range=RangeError;var qo=ga.reduce((t,e)=>(t[e+"Error"]=S[e],t),{});function Oc(t,e){if(!t||t instanceof Rt||t instanceof TypeError||t instanceof SyntaxError||!t.name||!qo[t.name])return t;var n=new qo[t.name](e||t.message,t);return"stack"in t&&Ke(n,"stack",{get:function(){return this.inner.stack}}),n}var mn=qr.reduce((t,e)=>(["Syntax","Type","Range"].indexOf(e)===-1&&(t[e+"Error"]=S[e]),t),{});mn.ModifyError=rn;mn.DexieError=Rt;mn.BulkError=qt;function B(){}function oi(t){return t}function Fc(t,e){return t==null||t===oi?e:function(n){return e(t(n))}}function dt(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function Vc(t,e){return t===B?e:function(){var n=t.apply(this,arguments);n!==void 0&&(arguments[0]=n);var i=this.onsuccess,r=this.onerror;this.onsuccess=null,this.onerror=null;var s=e.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?dt(i,this.onsuccess):i),r&&(this.onerror=this.onerror?dt(r,this.onerror):r),s!==void 0?s:n}}function Nc(t,e){return t===B?e:function(){t.apply(this,arguments);var n=this.onsuccess,i=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?dt(n,this.onsuccess):n),i&&(this.onerror=this.onerror?dt(i,this.onerror):i)}}function Lc(t,e){return t===B?e:function(n){var i=t.apply(this,arguments);he(n,i);var r=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var o=e.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?dt(r,this.onsuccess):r),s&&(this.onerror=this.onerror?dt(s,this.onerror):s),i===void 0?o===void 0?void 0:o:he(i,o)}}function Bc(t,e){return t===B?e:function(){return e.apply(this,arguments)===!1?!1:t.apply(this,arguments)}}function Xr(t,e){return t===B?e:function(){var n=t.apply(this,arguments);if(n&&typeof n.then=="function"){for(var i=this,r=arguments.length,s=new Array(r);r--;)s[r]=arguments[r];return n.then(function(){return e.apply(i,s)})}return e.apply(this,arguments)}}var Jt={},jc=100,Hc=20,va=100,[Dr,sn,Ir]=typeof Promise>"u"?[]:(()=>{let t=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[t,Qt(t),t];let e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,Qt(e),t]})(),ya=sn&&sn.then,Xi=Dr&&Dr.constructor,Qr=!!Ir,Er=!1,Kc=Ir?()=>{Ir.then(Wi)}:H.setImmediate?setImmediate.bind(null,Wi):H.MutationObserver?()=>{var t=document.createElement("div");new MutationObserver(()=>{Wi(),t=null}).observe(t,{attributes:!0}),t.setAttribute("i","1")}:()=>{setTimeout(Wi,0)},ei=function(t,e){Zt.push([t,e]),on&&(Kc(),on=!1)},xr=!0,on=!0,ct=[],Qi=[],Sr=null,Ar=oi,At={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Qo,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(t=>{try{Qo(t[0],t[1])}catch{}})}},x=At,Zt=[],ut=0,Ji=[];function w(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=B,this._lib=!1;var e=this._PSD=x;if(Oe&&(this._stackHolder=ft(),this._prev=null,this._numPrev=0),typeof t!="function"){if(t!==Jt)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&Pr(this,this._value);return}this._state=null,this._value=null,++e.ref,wa(this,t)}var Tr={get:function(){var t=x,e=an;function n(i,r){var s=!t.global&&(t!==x||e!==an);let o=s&&!ze();var a=new w((l,c)=>{Jr(this,new ba(cn(i,t,s,o),cn(r,t,s,o),l,c,t))});return Oe&&Ia(a,this),a}return n.prototype=Jt,n},set:function(t){Ke(this,"then",t&&t.prototype===Jt?Tr:{get:function(){return t},set:Tr.set})}};Tt(w.prototype,{then:Tr,_then:function(t,e){Jr(this,new ba(null,null,t,e,x))},catch:function(t){if(arguments.length===1)return this.then(null,t);var e=arguments[0],n=arguments[1];return typeof e=="function"?this.then(null,i=>i instanceof e?n(i):en(i)):this.then(null,i=>i&&i.name===e?n(i):en(i))},finally:function(t){return this.then(e=>(t(),e),e=>(t(),en(e)))},stack:{get:function(){if(this._stack)return this._stack;try{Er=!0;var t=Da(this,[],Hc),e=t.join(`
From previous: `);return this._state!==null&&(this._stack=e),e}finally{Er=!1}}},timeout:function(t,e){return t<1/0?new w((n,i)=>{var r=setTimeout(()=>i(new S.Timeout(e)),t);this.then(n,i).finally(clearTimeout.bind(null,r))}):this}});typeof Symbol<"u"&&Symbol.toStringTag&&Ke(w.prototype,Symbol.toStringTag,"Dexie.Promise");At.env=Ea();function ba(t,e,n,i,r){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof e=="function"?e:null,this.resolve=n,this.reject=i,this.psd=r}Tt(w,{all:function(){var t=Be.apply(null,arguments).map(ln);return new w(function(e,n){t.length===0&&e([]);var i=t.length;t.forEach((r,s)=>w.resolve(r).then(o=>{t[s]=o,--i||e(t)},n))})},resolve:t=>{if(t instanceof w)return t;if(t&&typeof t.then=="function")return new w((n,i)=>{t.then(n,i)});var e=new w(Jt,!0,t);return Ia(e,Sr),e},reject:en,race:function(){var t=Be.apply(null,arguments).map(ln);return new w((e,n)=>{t.map(i=>w.resolve(i).then(e,n))})},PSD:{get:()=>x,set:t=>x=t},totalEchoes:{get:()=>an},newPSD:qe,usePSD:Ot,scheduler:{get:()=>ei,set:t=>{ei=t}},rejectionMapper:{get:()=>Ar,set:t=>{Ar=t}},follow:(t,e)=>new w((n,i)=>qe((r,s)=>{var o=x;o.unhandleds=[],o.onunhandled=s,o.finalize=dt(function(){Uc(()=>{this.unhandleds.length===0?r():s(this.unhandleds[0])})},o.finalize),t()},e,n,i))});Xi&&(Xi.allSettled&&Ke(w,"allSettled",function(){let t=Be.apply(null,arguments).map(ln);return new w(e=>{t.length===0&&e([]);let n=t.length,i=new Array(n);t.forEach((r,s)=>w.resolve(r).then(o=>i[s]={status:"fulfilled",value:o},o=>i[s]={status:"rejected",reason:o}).then(()=>--n||e(i)))})}),Xi.any&&typeof AggregateError<"u"&&Ke(w,"any",function(){let t=Be.apply(null,arguments).map(ln);return new w((e,n)=>{t.length===0&&n(new AggregateError([]));let i=t.length,r=new Array(i);t.forEach((s,o)=>w.resolve(s).then(a=>e(a),a=>{r[o]=a,--i||n(new AggregateError(r))}))})}));function wa(t,e){try{e(n=>{if(t._state===null){if(n===t)throw new TypeError("A promise cannot be resolved with itself.");var i=t._lib&&ai();n&&typeof n.then=="function"?wa(t,(r,s)=>{n instanceof w?n._then(r,s):n.then(r,s)}):(t._state=!0,t._value=n,Ca(t)),i&&li()}},Pr.bind(null,t))}catch(n){Pr(t,n)}}function Pr(t,e){if(Qi.push(e),t._state===null){var n=t._lib&&ai();e=Ar(e),t._state=!1,t._value=e,Oe&&e!==null&&typeof e=="object"&&!e._promise&&Ic(()=>{var i=$r(e,"stack");e._promise=t,Ke(e,"stack",{get:()=>Er?i&&(i.get?i.get.apply(e):i.value):t.stack})}),Gc(t),Ca(t),n&&li()}}function Ca(t){var e=t._listeners;t._listeners=[];for(var n=0,i=e.length;n<i;++n)Jr(t,e[n]);var r=t._PSD;--r.ref||r.finalize(),ut===0&&(++ut,ei(()=>{--ut===0&&es()},[]))}function Jr(t,e){if(t._state===null){t._listeners.push(e);return}var n=t._state?e.onFulfilled:e.onRejected;if(n===null)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++ut,ei(zc,[n,t,e])}function zc(t,e,n){try{Sr=e;var i,r=e._value;e._state?i=t(r):(Qi.length&&(Qi=[]),i=t(r),Qi.indexOf(r)===-1&&Wc(e)),n.resolve(i)}catch(s){n.reject(s)}finally{Sr=null,--ut===0&&es(),--n.psd.ref||n.psd.finalize()}}function Da(t,e,n){if(e.length===n)return e;var i="";if(t._state===!1){var r=t._value,s,o;r!=null?(s=r.name||"Error",o=r.message||r,i=Cr(r,0)):(s=r,o=""),e.push(s+(o?": "+o:"")+i)}return Oe&&(i=Cr(t._stackHolder,2),i&&e.indexOf(i)===-1&&e.push(i),t._prev&&Da(t._prev,e,n)),e}function Ia(t,e){var n=e?e._numPrev+1:0;n<jc&&(t._prev=e,t._numPrev=n)}function Wi(){ai()&&li()}function ai(){var t=xr;return xr=!1,on=!1,t}function li(){var t,e,n;do for(;Zt.length>0;)for(t=Zt,Zt=[],n=t.length,e=0;e<n;++e){var i=t[e];i[0].apply(null,i[1])}while(Zt.length>0);xr=!0,on=!0}function es(){var t=ct;ct=[],t.forEach(i=>{i._PSD.onunhandled.call(null,i._value,i)});for(var e=Ji.slice(0),n=e.length;n;)e[--n]()}function Uc(t){function e(){t(),Ji.splice(Ji.indexOf(e),1)}Ji.push(e),++ut,ei(()=>{--ut===0&&es()},[])}function Gc(t){ct.some(e=>e._value===t._value)||ct.push(t)}function Wc(t){for(var e=ct.length;e;)if(ct[--e]._value===t._value){ct.splice(e,1);return}}function en(t){return new w(Jt,!1,t)}function U(t,e){var n=x;return function(){var i=ai(),r=x;try{return Ye(n,!0),t.apply(this,arguments)}catch(s){e&&e(s)}finally{Ye(r,!1),i&&li()}}}var ie={awaits:0,echoes:0,id:0},$c=0,tn=[],fr=0,an=0,Zc=0;function qe(t,e,n,i){var r=x,s=Object.create(r);s.parent=r,s.ref=0,s.global=!1,s.id=++Zc;var o=At.env;s.env=Qr?{Promise:w,PromiseProp:{value:w,configurable:!0,writable:!0},all:w.all,race:w.race,allSettled:w.allSettled,any:w.any,resolve:w.resolve,reject:w.reject,nthen:Yo(o.nthen,s),gthen:Yo(o.gthen,s)}:{},e&&he(s,e),++r.ref,s.finalize=function(){--this.parent.ref||this.parent.finalize()};var a=Ot(s,t,n,i);return s.ref===0&&s.finalize(),a}function kt(){return ie.id||(ie.id=++$c),++ie.awaits,ie.echoes+=va,ie.id}function ze(){return ie.awaits?(--ie.awaits===0&&(ie.id=0),ie.echoes=ie.awaits*va,!0):!1}(""+ya).indexOf("[native code]")===-1&&(kt=ze=B);function ln(t){return ie.echoes&&t&&t.constructor===Xi?(kt(),t.then(e=>(ze(),e),e=>(ze(),Y(e)))):t}function qc(t){++an,(!ie.echoes||--ie.echoes===0)&&(ie.echoes=ie.id=0),tn.push(x),Ye(t,!0)}function Yc(){var t=tn[tn.length-1];tn.pop(),Ye(t,!1)}function Ye(t,e){var n=x;if((e?ie.echoes&&(!fr++||t!==x):fr&&(!--fr||t!==x))&&xa(e?qc.bind(null,t):Yc),t!==x&&(x=t,n===At&&(At.env=Ea()),Qr)){var i=At.env.Promise,r=t.env;sn.then=r.nthen,i.prototype.then=r.gthen,(n.global||t.global)&&(Object.defineProperty(H,"Promise",r.PromiseProp),i.all=r.all,i.race=r.race,i.resolve=r.resolve,i.reject=r.reject,r.allSettled&&(i.allSettled=r.allSettled),r.any&&(i.any=r.any))}}function Ea(){var t=H.Promise;return Qr?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(H,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject,nthen:sn.then,gthen:t.prototype.then}:{}}function Ot(t,e,n,i,r){var s=x;try{return Ye(t,!0),e(n,i,r)}finally{Ye(s,!1)}}function xa(t){ya.call(Dr,t)}function cn(t,e,n,i){return typeof t!="function"?t:function(){var r=x;n&&kt(),Ye(e,!0);try{return t.apply(this,arguments)}finally{Ye(r,!1),i&&xa(ze)}}}function Yo(t,e){return function(n,i){return t.call(this,cn(n,e),cn(i,e))}}var Xo="unhandledrejection";function Qo(t,e){var n;try{n=e.onuncatched(t)}catch{}if(n!==!1)try{var i,r={promise:e,reason:t};if(H.document&&document.createEvent?(i=document.createEvent("Event"),i.initEvent(Xo,!0,!0),he(i,r)):H.CustomEvent&&(i=new CustomEvent(Xo,{detail:r}),he(i,r)),i&&H.dispatchEvent&&(dispatchEvent(i),!H.PromiseRejectionEvent&&H.onunhandledrejection))try{H.onunhandledrejection(i)}catch{}Oe&&i&&!i.defaultPrevented&&console.warn(`Unhandled rejection: ${t.stack||t}`)}catch{}}var Y=w.reject;function Mr(t,e,n,i){if(!t.idbdb||!t._state.openComplete&&!x.letThrough&&!t._vip){if(t._state.openComplete)return Y(new S.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._options.autoOpen)return Y(new S.DatabaseClosed);t.open().catch(B)}return t._state.dbReadyPromise.then(()=>Mr(t,e,n,i))}else{var r=t._createTransaction(e,n,t._dbSchema);try{r.create(),t._state.PR1398_maxLoop=3}catch(s){return s.name===Yr.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>Mr(t,e,n,i))):Y(s)}return r._promise(e,(s,o)=>qe(()=>(x.trans=r,i(s,o,r)))).then(s=>r._completion.then(()=>s))}}var Jo="3.2.7",lt="\uFFFF",Rr=-1/0,Ne="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Sa="String expected.",Yt=[],gn=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Xc=gn,Qc=gn,Aa=t=>!/(dexie\.js|dexie\.min\.js)/.test(t),_n="__dbnames",pr="readonly",mr="readwrite";function ht(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}var Ta={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function $i(t){return typeof t=="string"&&!/\./.test(t)?e=>(e[t]===void 0&&t in e&&(e=si(e),delete e[t]),e):e=>e}var kr=class{_trans(e,n,i){let r=this._tx||x.trans,s=this.name;function o(l,c,u){if(!u.schema[s])throw new S.NotFound("Table "+s+" not part of transaction");return n(u.idbtrans,u)}let a=ai();try{return r&&r.db===this.db?r===x.trans?r._promise(e,o,i):qe(()=>r._promise(e,o,i),{trans:r,transless:x.transless||x}):Mr(this.db,e,[this.name],o)}finally{a&&li()}}get(e,n){return e&&e.constructor===Object?this.where(e).first(n):this._trans("readonly",i=>this.core.get({trans:i,key:e}).then(r=>this.hook.reading.fire(r))).then(n)}where(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(ne(e))return new this.db.WhereClause(this,`[${e.join("+")}]`);let n=Z(e);if(n.length===1)return this.where(n[0]).equals(e[n[0]]);let i=this.schema.indexes.concat(this.schema.primKey).filter(c=>{if(c.compound&&n.every(u=>c.keyPath.indexOf(u)>=0)){for(let u=0;u<n.length;++u)if(n.indexOf(c.keyPath[u])===-1)return!1;return!0}return!1}).sort((c,u)=>c.keyPath.length-u.keyPath.length)[0];if(i&&this.db._maxKey!==lt){let c=i.keyPath.slice(0,n.length);return this.where(c).equals(c.map(u=>e[u]))}!i&&Oe&&console.warn(`The query ${JSON.stringify(e)} on ${this.name} would benefit of a compound index [${n.join("+")}]`);let{idxByName:r}=this.schema,s=this.db._deps.indexedDB;function o(c,u){try{return s.cmp(c,u)===0}catch{return!1}}let[a,l]=n.reduce(([c,u],h)=>{let d=r[h],f=e[h];return[c||d,c||!d?ht(u,d&&d.multi?v=>{let p=He(v,h);return ne(p)&&p.some(g=>o(f,g))}:v=>o(f,He(v,h))):u]},[null,null]);return a?this.where(a.name).equals(e[a.keyPath]).filter(l):i?this.filter(l):this.where(n).equals("")}filter(e){return this.toCollection().and(e)}count(e){return this.toCollection().count(e)}offset(e){return this.toCollection().offset(e)}limit(e){return this.toCollection().limit(e)}each(e){return this.toCollection().each(e)}toArray(e){return this.toCollection().toArray(e)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(e){return new this.db.Collection(new this.db.WhereClause(this,ne(e)?`[${e.join("+")}]`:e))}reverse(){return this.toCollection().reverse()}mapToClass(e){this.schema.mappedClass=e;let n=i=>{if(!i)return i;let r=Object.create(e.prototype);for(var s in i)if(ve(i,s))try{r[s]=i[s]}catch{}return r};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),e}defineClass(){function e(n){he(this,n)}return this.mapToClass(e)}add(e,n){let{auto:i,keyPath:r}=this.schema.primKey,s=e;return r&&i&&(s=$i(r)(e)),this._trans("readwrite",o=>this.core.mutate({trans:o,type:"add",keys:n!=null?[n]:null,values:[s]})).then(o=>o.numFailures?w.reject(o.failures[0]):o.lastResult).then(o=>{if(r)try{Pe(e,r,o)}catch{}return o})}update(e,n){if(typeof e=="object"&&!ne(e)){let i=He(e,this.schema.primKey.keyPath);if(i===void 0)return Y(new S.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?Z(n).forEach(r=>{Pe(e,r,n[r])}):n(e,{value:e,primKey:i})}catch{}return this.where(":id").equals(i).modify(n)}else return this.where(":id").equals(e).modify(n)}put(e,n){let{auto:i,keyPath:r}=this.schema.primKey,s=e;return r&&i&&(s=$i(r)(e)),this._trans("readwrite",o=>this.core.mutate({trans:o,type:"put",values:[s],keys:n!=null?[n]:null})).then(o=>o.numFailures?w.reject(o.failures[0]):o.lastResult).then(o=>{if(r)try{Pe(e,r,o)}catch{}return o})}delete(e){return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"delete",keys:[e]})).then(n=>n.numFailures?w.reject(n.failures[0]):void 0)}clear(){return this._trans("readwrite",e=>this.core.mutate({trans:e,type:"deleteRange",range:Ta})).then(e=>e.numFailures?w.reject(e.failures[0]):void 0)}bulkGet(e){return this._trans("readonly",n=>this.core.getMany({keys:e,trans:n}).then(i=>i.map(r=>this.hook.reading.fire(r))))}bulkAdd(e,n,i){let r=Array.isArray(n)?n:void 0;i=i||(r?void 0:n);let s=i?i.allKeys:void 0;return this._trans("readwrite",o=>{let{auto:a,keyPath:l}=this.schema.primKey;if(l&&r)throw new S.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(r&&r.length!==e.length)throw new S.InvalidArgument("Arguments objects and keys must have the same length");let c=e.length,u=l&&a?e.map($i(l)):e;return this.core.mutate({trans:o,type:"add",keys:r,values:u,wantResults:s}).then(({numFailures:h,results:d,lastResult:f,failures:v})=>{let p=s?d:f;if(h===0)return p;throw new qt(`${this.name}.bulkAdd(): ${h} of ${c} operations failed`,v)})})}bulkPut(e,n,i){let r=Array.isArray(n)?n:void 0;i=i||(r?void 0:n);let s=i?i.allKeys:void 0;return this._trans("readwrite",o=>{let{auto:a,keyPath:l}=this.schema.primKey;if(l&&r)throw new S.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(r&&r.length!==e.length)throw new S.InvalidArgument("Arguments objects and keys must have the same length");let c=e.length,u=l&&a?e.map($i(l)):e;return this.core.mutate({trans:o,type:"put",keys:r,values:u,wantResults:s}).then(({numFailures:h,results:d,lastResult:f,failures:v})=>{let p=s?d:f;if(h===0)return p;throw new qt(`${this.name}.bulkPut(): ${h} of ${c} operations failed`,v)})})}bulkDelete(e){let n=e.length;return this._trans("readwrite",i=>this.core.mutate({trans:i,type:"delete",keys:e})).then(({numFailures:i,lastResult:r,failures:s})=>{if(i===0)return r;throw new qt(`${this.name}.bulkDelete(): ${i} of ${n} operations failed`,s)})}};function ci(t){var e={},n=function(a,l){if(l){for(var c=arguments.length,u=new Array(c-1);--c;)u[c-1]=arguments[c];return e[a].subscribe.apply(null,u),t}else if(typeof a=="string")return e[a]};n.addEventType=s;for(var i=1,r=arguments.length;i<r;++i)s(arguments[i]);return n;function s(a,l,c){if(typeof a=="object")return o(a);l||(l=Bc),c||(c=B);var u={subscribers:[],fire:c,subscribe:function(h){u.subscribers.indexOf(h)===-1&&(u.subscribers.push(h),u.fire=l(u.fire,h))},unsubscribe:function(h){u.subscribers=u.subscribers.filter(function(d){return d!==h}),u.fire=u.subscribers.reduce(l,c)}};return e[a]=n[a]=u,u}function o(a){Z(a).forEach(function(l){var c=a[l];if(ne(c))s(l,a[l][0],a[l][1]);else if(c==="asap")var u=s(l,oi,function(){for(var d=arguments.length,f=new Array(d);d--;)f[d]=arguments[d];u.subscribers.forEach(function(v){ca(function(){v.apply(null,f)})})});else throw new S.InvalidArgument("Invalid event config")})}}function ui(t,e){return Mt(e).from({prototype:t}),e}function Jc(t){return ui(kr.prototype,function(n,i,r){this.db=t,this._tx=r,this.name=n,this.schema=i,this.hook=t._allTables[n]?t._allTables[n].hook:ci(null,{creating:[Vc,B],reading:[Fc,oi],updating:[Lc,B],deleting:[Nc,B]})})}function Et(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function gr(t,e){t.filter=ht(t.filter,e)}function _r(t,e,n){var i=t.replayFilter;t.replayFilter=i?()=>ht(i(),e()):e,t.justLimit=n&&!i}function eu(t,e){t.isMatch=ht(t.isMatch,e)}function nn(t,e){if(t.isPrimKey)return e.primaryKey;let n=e.getIndexByKeyPath(t.index);if(!n)throw new S.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return n}function ea(t,e,n){let i=nn(t,e.schema);return e.openCursor({trans:n,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:i,range:t.range}})}function Zi(t,e,n,i){let r=t.replayFilter?ht(t.filter,t.replayFilter()):t.filter;if(t.or){let s={},o=(a,l,c)=>{if(!r||r(l,c,d=>l.stop(d),d=>l.fail(d))){var u=l.primaryKey,h=""+u;h==="[object ArrayBuffer]"&&(h=""+new Uint8Array(u)),ve(s,h)||(s[h]=!0,e(a,l,c))}};return Promise.all([t.or._iterate(o,n),ta(ea(t,i,n),t.algorithm,o,!t.keysOnly&&t.valueMapper)])}else return ta(ea(t,i,n),ht(t.algorithm,r),e,!t.keysOnly&&t.valueMapper)}function ta(t,e,n,i){var r=i?(o,a,l)=>n(i(o),a,l):n,s=U(r);return t.then(o=>{if(o)return o.start(()=>{var a=()=>o.continue();(!e||e(o,l=>a=l,l=>{o.stop(l),a=B},l=>{o.fail(l),a=B}))&&s(o.value,o,l=>a=l),a()})})}function de(t,e){try{let n=ia(t),i=ia(e);if(n!==i)return n==="Array"?1:i==="Array"?-1:n==="binary"?1:i==="binary"?-1:n==="string"?1:i==="string"?-1:n==="Date"?1:i!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return t>e?1:t<e?-1:0;case"binary":return iu(na(t),na(e));case"Array":return tu(t,e)}}catch{}return NaN}function tu(t,e){let n=t.length,i=e.length,r=n<i?n:i;for(let s=0;s<r;++s){let o=de(t[s],e[s]);if(o!==0)return o}return n===i?0:n<i?-1:1}function iu(t,e){let n=t.length,i=e.length,r=n<i?n:i;for(let s=0;s<r;++s)if(t[s]!==e[s])return t[s]<e[s]?-1:1;return n===i?0:n<i?-1:1}function ia(t){let e=typeof t;if(e!=="object")return e;if(ArrayBuffer.isView(t))return"binary";let n=br(t);return n==="ArrayBuffer"?"binary":n}function na(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}var Or=class{_read(e,n){var i=this._ctx;return i.error?i.table._trans(null,Y.bind(null,i.error)):i.table._trans("readonly",e).then(n)}_write(e){var n=this._ctx;return n.error?n.table._trans(null,Y.bind(null,n.error)):n.table._trans("readwrite",e,"locked")}_addAlgorithm(e){var n=this._ctx;n.algorithm=ht(n.algorithm,e)}_iterate(e,n){return Zi(this._ctx,e,n,this._ctx.table.core)}clone(e){var n=Object.create(this.constructor.prototype),i=Object.create(this._ctx);return e&&he(i,e),n._ctx=i,n}raw(){return this._ctx.valueMapper=null,this}each(e){var n=this._ctx;return this._read(i=>Zi(n,e,i,n.table.core))}count(e){return this._read(n=>{let i=this._ctx,r=i.table.core;if(Et(i,!0))return r.count({trans:n,query:{index:nn(i,r.schema),range:i.range}}).then(o=>Math.min(o,i.limit));var s=0;return Zi(i,()=>(++s,!1),n,r).then(()=>s)}).then(e)}sortBy(e,n){let i=e.split(".").reverse(),r=i[0],s=i.length-1;function o(c,u){return u?o(c[i[u]],u-1):c[r]}var a=this._ctx.dir==="next"?1:-1;function l(c,u){var h=o(c,s),d=o(u,s);return h<d?-a:h>d?a:0}return this.toArray(function(c){return c.sort(l)}).then(n)}toArray(e){return this._read(n=>{var i=this._ctx;if(i.dir==="next"&&Et(i,!0)&&i.limit>0){let{valueMapper:r}=i,s=nn(i,i.table.core.schema);return i.table.core.query({trans:n,limit:i.limit,values:!0,query:{index:s,range:i.range}}).then(({result:o})=>r?o.map(r):o)}else{let r=[];return Zi(i,s=>r.push(s),n,i.table.core).then(()=>r)}},e)}offset(e){var n=this._ctx;return e<=0?this:(n.offset+=e,Et(n)?_r(n,()=>{var i=e;return(r,s)=>i===0?!0:i===1?(--i,!1):(s(()=>{r.advance(i),i=0}),!1)}):_r(n,()=>{var i=e;return()=>--i<0}),this)}limit(e){return this._ctx.limit=Math.min(this._ctx.limit,e),_r(this._ctx,()=>{var n=e;return function(i,r,s){return--n<=0&&r(s),n>=0}},!0),this}until(e,n){return gr(this._ctx,function(i,r,s){return e(i.value)?(r(s),n):!0}),this}first(e){return this.limit(1).toArray(function(n){return n[0]}).then(e)}last(e){return this.reverse().first(e)}filter(e){return gr(this._ctx,function(n){return e(n.value)}),eu(this._ctx,e),this}and(e){return this.filter(e)}or(e){return new this.db.WhereClause(this._ctx.table,e,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(i,r){e(r.key,r)})}eachUniqueKey(e){return this._ctx.unique="unique",this.eachKey(e)}eachPrimaryKey(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(i,r){e(r.primaryKey,r)})}keys(e){var n=this._ctx;n.keysOnly=!n.isMatch;var i=[];return this.each(function(r,s){i.push(s.key)}).then(function(){return i}).then(e)}primaryKeys(e){var n=this._ctx;if(n.dir==="next"&&Et(n,!0)&&n.limit>0)return this._read(r=>{var s=nn(n,n.table.core.schema);return n.table.core.query({trans:r,values:!1,limit:n.limit,query:{index:s,range:n.range}})}).then(({result:r})=>r).then(e);n.keysOnly=!n.isMatch;var i=[];return this.each(function(r,s){i.push(s.primaryKey)}).then(function(){return i}).then(e)}uniqueKeys(e){return this._ctx.unique="unique",this.keys(e)}firstKey(e){return this.limit(1).keys(function(n){return n[0]}).then(e)}lastKey(e){return this.reverse().firstKey(e)}distinct(){var e=this._ctx,n=e.index&&e.table.schema.idxByName[e.index];if(!n||!n.multi)return this;var i={};return gr(this._ctx,function(r){var s=r.primaryKey.toString(),o=ve(i,s);return i[s]=!0,!o}),this}modify(e){var n=this._ctx;return this._write(i=>{var r;if(typeof e=="function")r=e;else{var s=Z(e),o=s.length;r=function(p){for(var g=!1,m=0;m<o;++m){var y=s[m],b=e[y];He(p,y)!==b&&(Pe(p,y,b),g=!0)}return g}}let a=n.table.core,{outbound:l,extractKey:c}=a.schema.primaryKey,u=this.db._options.modifyChunkSize||200,h=[],d=0,f=[],v=(p,g)=>{let{failures:m,numFailures:y}=g;d+=p-y;for(let b of Z(m))h.push(m[b])};return this.clone().primaryKeys().then(p=>{let g=m=>{let y=Math.min(u,p.length-m);return a.getMany({trans:i,keys:p.slice(m,m+y),cache:"immutable"}).then(b=>{let _=[],C=[],D=l?[]:null,E=[];for(let O=0;O<y;++O){let K=b[O],F={value:si(K),primKey:p[m+O]};r.call(F,F.value,F)!==!1&&(F.value==null?E.push(p[m+O]):!l&&de(c(K),c(F.value))!==0?(E.push(p[m+O]),_.push(F.value)):(C.push(F.value),l&&D.push(p[m+O])))}let A=Et(n)&&n.limit===1/0&&(typeof e!="function"||e===vr)&&{index:n.index,range:n.range};return Promise.resolve(_.length>0&&a.mutate({trans:i,type:"add",values:_}).then(O=>{for(let K in O.failures)E.splice(parseInt(K),1);v(_.length,O)})).then(()=>(C.length>0||A&&typeof e=="object")&&a.mutate({trans:i,type:"put",keys:D,values:C,criteria:A,changeSpec:typeof e!="function"&&e}).then(O=>v(C.length,O))).then(()=>(E.length>0||A&&e===vr)&&a.mutate({trans:i,type:"delete",keys:E,criteria:A}).then(O=>v(E.length,O))).then(()=>p.length>m+y&&g(m+u))})};return g(0).then(()=>{if(h.length>0)throw new rn("Error modifying one or more objects",h,d,f);return p.length})})})}delete(){var e=this._ctx,n=e.range;return Et(e)&&(e.isPrimKey&&!Qc||n.type===3)?this._write(i=>{let{primaryKey:r}=e.table.core.schema,s=n;return e.table.core.count({trans:i,query:{index:r,range:s}}).then(o=>e.table.core.mutate({trans:i,type:"deleteRange",range:s}).then(({failures:a,lastResult:l,results:c,numFailures:u})=>{if(u)throw new rn("Could not delete some values",Object.keys(a).map(h=>a[h]),o-u);return o-u}))}):this.modify(vr)}},vr=(t,e)=>e.value=null;function nu(t){return ui(Or.prototype,function(n,i){this.db=t;let r=Ta,s=null;if(i)try{r=i()}catch(c){s=c}let o=n._ctx,a=o.table,l=a.hook.reading.fire;this._ctx={table:a,index:o.index,isPrimKey:!o.index||a.schema.primKey.keyPath&&o.index===a.schema.primKey.name,range:r,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:s,or:o.or,valueMapper:l!==oi?l:null}})}function ru(t,e){return t<e?-1:t===e?0:1}function su(t,e){return t>e?-1:t===e?0:1}function _e(t,e,n){var i=t instanceof un?new t.Collection(t):t;return i._ctx.error=n?new n(e):new TypeError(e),i}function xt(t){return new t.Collection(t,()=>Pa("")).limit(0)}function ou(t){return t==="next"?e=>e.toUpperCase():e=>e.toLowerCase()}function au(t){return t==="next"?e=>e.toLowerCase():e=>e.toUpperCase()}function lu(t,e,n,i,r,s){for(var o=Math.min(t.length,i.length),a=-1,l=0;l<o;++l){var c=e[l];if(c!==i[l])return r(t[l],n[l])<0?t.substr(0,l)+n[l]+n.substr(l+1):r(t[l],i[l])<0?t.substr(0,l)+i[l]+n.substr(l+1):a>=0?t.substr(0,a)+e[a]+n.substr(a+1):null;r(t[l],c)<0&&(a=l)}return o<i.length&&s==="next"?t+n.substr(t.length):o<t.length&&s==="prev"?t.substr(0,n.length):a<0?null:t.substr(0,a)+i[a]+n.substr(a+1)}function qi(t,e,n,i){var r,s,o,a,l,c,u,h=n.length;if(!n.every(p=>typeof p=="string"))return _e(t,Sa);function d(p){r=ou(p),s=au(p),o=p==="next"?ru:su;var g=n.map(function(m){return{lower:s(m),upper:r(m)}}).sort(function(m,y){return o(m.lower,y.lower)});a=g.map(function(m){return m.upper}),l=g.map(function(m){return m.lower}),c=p,u=p==="next"?"":i}d("next");var f=new t.Collection(t,()=>We(a[0],l[h-1]+i));f._ondirectionchange=function(p){d(p)};var v=0;return f._addAlgorithm(function(p,g,m){var y=p.key;if(typeof y!="string")return!1;var b=s(y);if(e(b,l,v))return!0;for(var _=null,C=v;C<h;++C){var D=lu(y,b,a[C],l[C],o,c);D===null&&_===null?v=C+1:(_===null||o(_,D)>0)&&(_=D)}return g(_!==null?function(){p.continue(_+u)}:m),!1}),f}function We(t,e,n,i){return{type:2,lower:t,upper:e,lowerOpen:n,upperOpen:i}}function Pa(t){return{type:1,lower:t,upper:t}}var un=class{get Collection(){return this._ctx.table.db.Collection}between(e,n,i,r){i=i!==!1,r=r===!0;try{return this._cmp(e,n)>0||this._cmp(e,n)===0&&(i||r)&&!(i&&r)?xt(this):new this.Collection(this,()=>We(e,n,!i,!r))}catch{return _e(this,Ne)}}equals(e){return e==null?_e(this,Ne):new this.Collection(this,()=>Pa(e))}above(e){return e==null?_e(this,Ne):new this.Collection(this,()=>We(e,void 0,!0))}aboveOrEqual(e){return e==null?_e(this,Ne):new this.Collection(this,()=>We(e,void 0,!1))}below(e){return e==null?_e(this,Ne):new this.Collection(this,()=>We(void 0,e,!1,!0))}belowOrEqual(e){return e==null?_e(this,Ne):new this.Collection(this,()=>We(void 0,e))}startsWith(e){return typeof e!="string"?_e(this,Sa):this.between(e,e+lt,!0,!0)}startsWithIgnoreCase(e){return e===""?this.startsWith(e):qi(this,(n,i)=>n.indexOf(i[0])===0,[e],lt)}equalsIgnoreCase(e){return qi(this,(n,i)=>n===i[0],[e],"")}anyOfIgnoreCase(){var e=Be.apply(St,arguments);return e.length===0?xt(this):qi(this,(n,i)=>i.indexOf(n)!==-1,e,"")}startsWithAnyOfIgnoreCase(){var e=Be.apply(St,arguments);return e.length===0?xt(this):qi(this,(n,i)=>i.some(r=>n.indexOf(r)===0),e,lt)}anyOf(){let e=Be.apply(St,arguments),n=this._cmp;try{e.sort(n)}catch{return _e(this,Ne)}if(e.length===0)return xt(this);let i=new this.Collection(this,()=>We(e[0],e[e.length-1]));i._ondirectionchange=s=>{n=s==="next"?this._ascending:this._descending,e.sort(n)};let r=0;return i._addAlgorithm((s,o,a)=>{let l=s.key;for(;n(l,e[r])>0;)if(++r,r===e.length)return o(a),!1;return n(l,e[r])===0?!0:(o(()=>{s.continue(e[r])}),!1)}),i}notEqual(e){return this.inAnyRange([[Rr,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){let e=Be.apply(St,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return _e(this,Ne)}let n=e.reduce((i,r)=>i?i.concat([[i[i.length-1][1],r]]):[[Rr,r]],null);return n.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})}inAnyRange(e,n){let i=this._cmp,r=this._ascending,s=this._descending,o=this._min,a=this._max;if(e.length===0)return xt(this);if(!e.every(_=>_[0]!==void 0&&_[1]!==void 0&&r(_[0],_[1])<=0))return _e(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",S.InvalidArgument);let l=!n||n.includeLowers!==!1,c=n&&n.includeUppers===!0;function u(_,C){let D=0,E=_.length;for(;D<E;++D){let A=_[D];if(i(C[0],A[1])<0&&i(C[1],A[0])>0){A[0]=o(A[0],C[0]),A[1]=a(A[1],C[1]);break}}return D===E&&_.push(C),_}let h=r;function d(_,C){return h(_[0],C[0])}let f;try{f=e.reduce(u,[]),f.sort(d)}catch{return _e(this,Ne)}let v=0,p=c?_=>r(_,f[v][1])>0:_=>r(_,f[v][1])>=0,g=l?_=>s(_,f[v][0])>0:_=>s(_,f[v][0])>=0;function m(_){return!p(_)&&!g(_)}let y=p,b=new this.Collection(this,()=>We(f[0][0],f[f.length-1][1],!l,!c));return b._ondirectionchange=_=>{_==="next"?(y=p,h=r):(y=g,h=s),f.sort(d)},b._addAlgorithm((_,C,D)=>{for(var E=_.key;y(E);)if(++v,v===f.length)return C(D),!1;return m(E)?!0:(this._cmp(E,f[v][1])===0||this._cmp(E,f[v][0])===0||C(()=>{h===r?_.continue(f[v][0]):_.continue(f[v][1])}),!1)}),b}startsWithAnyOf(){let e=Be.apply(St,arguments);return e.every(n=>typeof n=="string")?e.length===0?xt(this):this.inAnyRange(e.map(n=>[n,n+lt])):_e(this,"startsWithAnyOf() only works with strings")}};function cu(t){return ui(un.prototype,function(n,i,r){this.db=t,this._ctx={table:n,index:i===":id"?null:i,or:r};let s=t._deps.indexedDB;if(!s)throw new S.MissingAPI;this._cmp=this._ascending=s.cmp.bind(s),this._descending=(o,a)=>s.cmp(a,o),this._max=(o,a)=>s.cmp(o,a)>0?o:a,this._min=(o,a)=>s.cmp(o,a)<0?o:a,this._IDBKeyRange=t._deps.IDBKeyRange})}function ke(t){return U(function(e){return ti(e),t(e.target.error),!1})}function ti(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}var ii="storagemutated",Ze="x-storagemutated-1",Xe=ci(null,ii),Fr=class{_lock(){return $t(!x.global),++this._reculock,this._reculock===1&&!x.global&&(x.lockOwnerFor=this),this}_unlock(){if($t(!x.global),--this._reculock===0)for(x.global||(x.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{Ot(e[1],e[0])}catch{}}return this}_locked(){return this._reculock&&x.lockOwnerFor!==this}create(e){if(!this.mode)return this;let n=this.db.idbdb,i=this.db._state.dbOpenError;if($t(!this.idbtrans),!e&&!n)switch(i&&i.name){case"DatabaseClosedError":throw new S.DatabaseClosed(i);case"MissingAPIError":throw new S.MissingAPI(i.message,i);default:throw new S.OpenFailed(i)}if(!this.active)throw new S.TransactionInactive;return $t(this._completion._state===null),e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),e.onerror=U(r=>{ti(r),this._reject(e.error)}),e.onabort=U(r=>{ti(r),this.active&&this._reject(new S.Abort(e.error)),this.active=!1,this.on("abort").fire(r)}),e.oncomplete=U(()=>{this.active=!1,this._resolve(),"mutatedParts"in e&&Xe.storagemutated.fire(e.mutatedParts)}),this}_promise(e,n,i){if(e==="readwrite"&&this.mode!=="readwrite")return Y(new S.ReadOnly("Transaction is readonly"));if(!this.active)return Y(new S.TransactionInactive);if(this._locked())return new w((s,o)=>{this._blockedFuncs.push([()=>{this._promise(e,n,i).then(s,o)},x])});if(i)return qe(()=>{var s=new w((o,a)=>{this._lock();let l=n(o,a,this);l&&l.then&&l.then(o,a)});return s.finally(()=>this._unlock()),s._lib=!0,s});var r=new w((s,o)=>{var a=n(s,o,this);a&&a.then&&a.then(s,o)});return r._lib=!0,r}_root(){return this.parent?this.parent._root():this}waitFor(e){var n=this._root();let i=w.resolve(e);if(n._waitingFor)n._waitingFor=n._waitingFor.then(()=>i);else{n._waitingFor=i,n._waitingQueue=[];var r=n.idbtrans.objectStore(n.storeNames[0]);(function o(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(r.get(-1/0).onsuccess=o)})()}var s=n._waitingFor;return new w((o,a)=>{i.then(l=>n._waitingQueue.push(U(o.bind(null,l))),l=>n._waitingQueue.push(U(a.bind(null,l)))).finally(()=>{n._waitingFor===s&&(n._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new S.Abort))}table(e){let n=this._memoizedTables||(this._memoizedTables={});if(ve(n,e))return n[e];let i=this.schema[e];if(!i)throw new S.NotFound("Table "+e+" not part of transaction");let r=new this.db.Table(e,i,this);return r.core=this.db.core.table(e),n[e]=r,r}};function uu(t){return ui(Fr.prototype,function(n,i,r,s,o){this.db=t,this.mode=n,this.storeNames=i,this.schema=r,this.chromeTransactionDurability=s,this.idbtrans=null,this.on=ci(this,"complete","error","abort"),this.parent=o||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new w((a,l)=>{this._resolve=a,this._reject=l}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},a=>{var l=this.active;return this.active=!1,this.on.error.fire(a),this.parent?this.parent._reject(a):l&&this.idbtrans&&this.idbtrans.abort(),Y(a)})})}function Vr(t,e,n,i,r,s,o){return{name:t,keyPath:e,unique:n,multi:i,auto:r,compound:s,src:(n&&!o?"&":"")+(i?"*":"")+(r?"++":"")+Ma(e)}}function Ma(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function Ra(t,e,n){return{name:t,primKey:e,indexes:n,mappedClass:null,idxByName:ua(n,i=>[i.name,i])}}function du(t){return t.length===1?t[0]:t}var ni=t=>{try{return t.only([[]]),ni=()=>[[]],[[]]}catch{return ni=()=>lt,lt}};function Nr(t){return t==null?()=>{}:typeof t=="string"?hu(t):e=>He(e,t)}function hu(t){return t.split(".").length===1?n=>n[t]:n=>He(n,t)}function ra(t){return[].slice.call(t)}var fu=0;function Xt(t){return t==null?":id":typeof t=="string"?t:`[${t.join("+")}]`}function pu(t,e,n){function i(u,h){let d=ra(u.objectStoreNames);return{schema:{name:u.name,tables:d.map(f=>h.objectStore(f)).map(f=>{let{keyPath:v,autoIncrement:p}=f,g=ne(v),m=v==null,y={},b={name:f.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:m,compound:g,keyPath:v,autoIncrement:p,unique:!0,extractKey:Nr(v)},indexes:ra(f.indexNames).map(_=>f.index(_)).map(_=>{let{name:C,unique:D,multiEntry:E,keyPath:A}=_,O=ne(A),K={name:C,compound:O,keyPath:A,unique:D,multiEntry:E,extractKey:Nr(A)};return y[Xt(A)]=K,K}),getIndexByKeyPath:_=>y[Xt(_)]};return y[":id"]=b.primaryKey,v!=null&&(y[Xt(v)]=b.primaryKey),b})},hasGetAll:d.length>0&&"getAll"in h.objectStore(d[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function r(u){if(u.type===3)return null;if(u.type===4)throw new Error("Cannot convert never type to IDBKeyRange");let{lower:h,upper:d,lowerOpen:f,upperOpen:v}=u;return h===void 0?d===void 0?null:e.upperBound(d,!!v):d===void 0?e.lowerBound(h,!!f):e.bound(h,d,!!f,!!v)}function s(u){let h=u.name;function d({trans:p,type:g,keys:m,values:y,range:b}){return new Promise((_,C)=>{_=U(_);let D=p.objectStore(h),E=D.keyPath==null,A=g==="put"||g==="add";if(!A&&g!=="delete"&&g!=="deleteRange")throw new Error("Invalid operation type: "+g);let{length:O}=m||y||{length:1};if(m&&y&&m.length!==y.length)throw new Error("Given keys array must have same length as given values array.");if(O===0)return _({numFailures:0,failures:{},results:[],lastResult:void 0});let K,F=[],fe=[],R=0,xe=pe=>{++R,ti(pe)};if(g==="deleteRange"){if(b.type===4)return _({numFailures:R,failures:fe,results:[],lastResult:void 0});b.type===3?F.push(K=D.clear()):F.push(K=D.delete(r(b)))}else{let[pe,ye]=A?E?[y,m]:[y,null]:[m,null];if(A)for(let X=0;X<O;++X)F.push(K=ye&&ye[X]!==void 0?D[g](pe[X],ye[X]):D[g](pe[X])),K.onerror=xe;else for(let X=0;X<O;++X)F.push(K=D[g](pe[X])),K.onerror=xe}let Se=pe=>{let ye=pe.target.result;F.forEach((X,Ft)=>X.error!=null&&(fe[Ft]=X.error)),_({numFailures:R,failures:fe,results:g==="delete"?m:F.map(X=>X.result),lastResult:ye})};K.onerror=pe=>{xe(pe),Se(pe)},K.onsuccess=Se})}function f({trans:p,values:g,query:m,reverse:y,unique:b}){return new Promise((_,C)=>{_=U(_);let{index:D,range:E}=m,A=p.objectStore(h),O=D.isPrimaryKey?A:A.index(D.name),K=y?b?"prevunique":"prev":b?"nextunique":"next",F=g||!("openKeyCursor"in O)?O.openCursor(r(E),K):O.openKeyCursor(r(E),K);F.onerror=ke(C),F.onsuccess=U(fe=>{let R=F.result;if(!R){_(null);return}R.___id=++fu,R.done=!1;let xe=R.continue.bind(R),Se=R.continuePrimaryKey;Se&&(Se=Se.bind(R));let pe=R.advance.bind(R),ye=()=>{throw new Error("Cursor not started")},X=()=>{throw new Error("Cursor not stopped")};R.trans=p,R.stop=R.continue=R.continuePrimaryKey=R.advance=ye,R.fail=U(C),R.next=function(){let Ft=1;return this.start(()=>Ft--?this.continue():this.stop()).then(()=>this)},R.start=Ft=>{let Ba=new Promise((mt,cs)=>{mt=U(mt),F.onerror=ke(cs),R.fail=cs,R.stop=ja=>{R.stop=R.continue=R.continuePrimaryKey=R.advance=X,mt(ja)}}),vn=()=>{if(F.result)try{Ft()}catch(mt){R.fail(mt)}else R.done=!0,R.start=()=>{throw new Error("Cursor behind last entry")},R.stop()};return F.onsuccess=U(mt=>{F.onsuccess=vn,vn()}),R.continue=xe,R.continuePrimaryKey=Se,R.advance=pe,vn(),Ba},_(R)},C)})}function v(p){return g=>new Promise((m,y)=>{m=U(m);let{trans:b,values:_,limit:C,query:D}=g,E=C===1/0?void 0:C,{index:A,range:O}=D,K=b.objectStore(h),F=A.isPrimaryKey?K:K.index(A.name),fe=r(O);if(C===0)return m({result:[]});if(p){let R=_?F.getAll(fe,E):F.getAllKeys(fe,E);R.onsuccess=xe=>m({result:xe.target.result}),R.onerror=ke(y)}else{let R=0,xe=_||!("openKeyCursor"in F)?F.openCursor(fe):F.openKeyCursor(fe),Se=[];xe.onsuccess=pe=>{let ye=xe.result;if(!ye)return m({result:Se});if(Se.push(_?ye.value:ye.primaryKey),++R===C)return m({result:Se});ye.continue()},xe.onerror=ke(y)}})}return{name:h,schema:u,mutate:d,getMany({trans:p,keys:g}){return new Promise((m,y)=>{m=U(m);let b=p.objectStore(h),_=g.length,C=new Array(_),D=0,E=0,A,O=F=>{let fe=F.target;(C[fe._pos]=fe.result)!=null,++E===D&&m(C)},K=ke(y);for(let F=0;F<_;++F)g[F]!=null&&(A=b.get(g[F]),A._pos=F,A.onsuccess=O,A.onerror=K,++D);D===0&&m(C)})},get({trans:p,key:g}){return new Promise((m,y)=>{m=U(m);let _=p.objectStore(h).get(g);_.onsuccess=C=>m(C.target.result),_.onerror=ke(y)})},query:v(a),openCursor:f,count({query:p,trans:g}){let{index:m,range:y}=p;return new Promise((b,_)=>{let C=g.objectStore(h),D=m.isPrimaryKey?C:C.index(m.name),E=r(y),A=E?D.count(E):D.count();A.onsuccess=U(O=>b(O.target.result)),A.onerror=ke(_)})}}}let{schema:o,hasGetAll:a}=i(t,n),l=o.tables.map(u=>s(u)),c={};return l.forEach(u=>c[u.name]=u),{stack:"dbcore",transaction:t.transaction.bind(t),table(u){if(!c[u])throw new Error(`Table '${u}' not found`);return c[u]},MIN_KEY:-1/0,MAX_KEY:ni(e),schema:o}}function mu(t,e){return e.reduce((n,{create:i})=>N(N({},n),i(n)),t)}function gu(t,e,{IDBKeyRange:n,indexedDB:i},r){return{dbcore:mu(pu(e,n,r),t.dbcore)}}function ts({_novip:t},e){let n=e.db,i=gu(t._middlewares,n,t._deps,e);t.core=i.dbcore,t.tables.forEach(r=>{let s=r.name;t.core.schema.tables.some(o=>o.name===s)&&(r.core=t.core.table(s),t[s]instanceof t.Table&&(t[s].core=r.core))})}function dn({_novip:t},e,n,i){n.forEach(r=>{let s=i[r];e.forEach(o=>{let a=$r(o,r);(!a||"value"in a&&a.value===void 0)&&(o===t.Transaction.prototype||o instanceof t.Transaction?Ke(o,r,{get(){return this.table(r)},set(l){aa(this,r,{value:l,writable:!0,configurable:!0,enumerable:!0})}}):o[r]=new t.Table(r,s))})})}function Lr({_novip:t},e){e.forEach(n=>{for(let i in n)n[i]instanceof t.Table&&delete n[i]})}function _u(t,e){return t._cfg.version-e._cfg.version}function vu(t,e,n,i){let r=t._dbSchema,s=t._createTransaction("readwrite",t._storeNames,r);s.create(n),s._completion.catch(i);let o=s._reject.bind(s),a=x.transless||x;qe(()=>{x.trans=s,x.transless=a,e===0?(Z(r).forEach(l=>{is(n,l,r[l].primKey,r[l].indexes)}),ts(t,n),w.follow(()=>t.on.populate.fire(s)).catch(o)):yu(t,e,s,n).catch(o)})}function yu({_novip:t},e,n,i){let r=[],s=t._versions,o=t._dbSchema=ns(t,t.idbdb,i),a=!1;s.filter(u=>u._cfg.version>=e).forEach(u=>{r.push(()=>{let h=o,d=u._cfg.dbschema;jr(t,h,i),jr(t,d,i),o=t._dbSchema=d;let f=ka(h,d);f.add.forEach(p=>{is(i,p[0],p[1].primKey,p[1].indexes)}),f.change.forEach(p=>{if(p.recreate)throw new S.Upgrade("Not yet support for changing primary key");{let g=i.objectStore(p.name);p.add.forEach(m=>Br(g,m)),p.change.forEach(m=>{g.deleteIndex(m.name),Br(g,m)}),p.del.forEach(m=>g.deleteIndex(m))}});let v=u._cfg.contentUpgrade;if(v&&u._cfg.version>e){ts(t,i),n._memoizedTables={},a=!0;let p=da(d);f.del.forEach(b=>{p[b]=h[b]}),Lr(t,[t.Transaction.prototype]),dn(t,[t.Transaction.prototype],Z(p),p),n.schema=p;let g=Zr(v);g&&kt();let m,y=w.follow(()=>{if(m=v(n),m&&g){var b=ze.bind(null,null);m.then(b,b)}});return m&&typeof m.then=="function"?w.resolve(m):y.then(()=>m)}}),r.push(h=>{if(!a||!Xc){let d=u._cfg.dbschema;wu(d,h)}Lr(t,[t.Transaction.prototype]),dn(t,[t.Transaction.prototype],t._storeNames,t._dbSchema),n.schema=t._dbSchema})});function c(){return r.length?w.resolve(r.shift()(n.idbtrans)).then(c):w.resolve()}return c().then(()=>{bu(o,i)})}function ka(t,e){let n={del:[],add:[],change:[]},i;for(i in t)e[i]||n.del.push(i);for(i in e){let r=t[i],s=e[i];if(!r)n.add.push([i,s]);else{let o={name:i,def:s,recreate:!1,del:[],add:[],change:[]};if(""+(r.primKey.keyPath||"")!=""+(s.primKey.keyPath||"")||r.primKey.auto!==s.primKey.auto&&!gn)o.recreate=!0,n.change.push(o);else{let a=r.idxByName,l=s.idxByName,c;for(c in a)l[c]||o.del.push(c);for(c in l){let u=a[c],h=l[c];u?u.src!==h.src&&o.change.push(h):o.add.push(h)}(o.del.length>0||o.add.length>0||o.change.length>0)&&n.change.push(o)}}}return n}function is(t,e,n,i){let r=t.db.createObjectStore(e,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return i.forEach(s=>Br(r,s)),r}function bu(t,e){Z(t).forEach(n=>{e.db.objectStoreNames.contains(n)||is(e,n,t[n].primKey,t[n].indexes)})}function wu(t,e){[].slice.call(e.db.objectStoreNames).forEach(n=>t[n]==null&&e.db.deleteObjectStore(n))}function Br(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function ns(t,e,n){let i={};return pn(e.objectStoreNames,0).forEach(s=>{let o=n.objectStore(s),a=o.keyPath,l=Vr(Ma(a),a||"",!1,!1,!!o.autoIncrement,a&&typeof a!="string",!0),c=[];for(let h=0;h<o.indexNames.length;++h){let d=o.index(o.indexNames[h]);a=d.keyPath;var u=Vr(d.name,a,!!d.unique,!!d.multiEntry,!1,a&&typeof a!="string",!1);c.push(u)}i[s]=Ra(s,l,c)}),i}function Cu({_novip:t},e,n){t.verno=e.version/10;let i=t._dbSchema=ns(t,e,n);t._storeNames=pn(e.objectStoreNames,0),dn(t,[t._allTables],Z(i),i)}function Du(t,e){let n=ns(t,t.idbdb,e),i=ka(n,t._dbSchema);return!(i.add.length||i.change.some(r=>r.add.length||r.change.length))}function jr({_novip:t},e,n){let i=n.db.objectStoreNames;for(let r=0;r<i.length;++r){let s=i[r],o=n.objectStore(s);t._hasGetAll="getAll"in o;for(let a=0;a<o.indexNames.length;++a){let l=o.indexNames[a],c=o.index(l).keyPath,u=typeof c=="string"?c:"["+pn(c).join("+")+"]";if(e[s]){let h=e[s].idxByName[u];h&&(h.name=l,delete e[s].idxByName[u],e[s].idxByName[l]=h)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&H.WorkerGlobalScope&&H instanceof H.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}function Iu(t){return t.split(",").map((e,n)=>{e=e.trim();let i=e.replace(/([&*]|\+\+)/g,""),r=/^\[/.test(i)?i.match(/^\[(.*)\]$/)[1].split("+"):i;return Vr(i,r||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),ne(r),n===0)})}var Hr=class{_parseStoresSpec(e,n){Z(e).forEach(i=>{if(e[i]!==null){var r=Iu(e[i]),s=r.shift();if(s.multi)throw new S.Schema("Primary key cannot be multi-valued");r.forEach(o=>{if(o.auto)throw new S.Schema("Only primary key can be marked as autoIncrement (++)");if(!o.keyPath)throw new S.Schema("Index must have a name and cannot be an empty string")}),n[i]=Ra(i,s,r)}})}stores(e){let n=this.db;this._cfg.storesSource=this._cfg.storesSource?he(this._cfg.storesSource,e):e;let i=n._versions,r={},s={};return i.forEach(o=>{he(r,o._cfg.storesSource),s=o._cfg.dbschema={},o._parseStoresSpec(r,s)}),n._dbSchema=s,Lr(n,[n._allTables,n,n.Transaction.prototype]),dn(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],Z(s),s),n._storeNames=Z(s),this}upgrade(e){return this._cfg.contentUpgrade=Xr(this._cfg.contentUpgrade||B,e),this}};function Eu(t){return ui(Hr.prototype,function(n){this.db=t,this._cfg={version:n,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function rs(t,e){let n=t._dbNamesDB;return n||(n=t._dbNamesDB=new Pt(_n,{addons:[],indexedDB:t,IDBKeyRange:e}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function ss(t){return t&&typeof t.databases=="function"}function xu({indexedDB:t,IDBKeyRange:e}){return ss(t)?Promise.resolve(t.databases()).then(n=>n.map(i=>i.name).filter(i=>i!==_n)):rs(t,e).toCollection().primaryKeys()}function Su({indexedDB:t,IDBKeyRange:e},n){!ss(t)&&n!==_n&&rs(t,e).put({name:n}).catch(B)}function Au({indexedDB:t,IDBKeyRange:e},n){!ss(t)&&n!==_n&&rs(t,e).delete(n).catch(B)}function Kr(t){return qe(function(){return x.letThrough=!0,t()})}function Tu(){var t=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!t||!indexedDB.databases)return Promise.resolve();var e;return new Promise(function(n){var i=function(){return indexedDB.databases().finally(n)};e=setInterval(i,100),i()}).finally(function(){return clearInterval(e)})}function Pu(t){let e=t._state,{indexedDB:n}=t._deps;if(e.isBeingOpened||t.idbdb)return e.dbReadyPromise.then(()=>e.dbOpenError?Y(e.dbOpenError):t);Oe&&(e.openCanceller._stackHolder=ft()),e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;let i=e.openCanceller;function r(){if(e.openCanceller!==i)throw new S.DatabaseClosed("db.open() was cancelled")}let s=e.dbReadyResolve,o=null,a=!1,l=()=>new w((c,u)=>{if(r(),!n)throw new S.MissingAPI;let h=t.name,d=e.autoSchema?n.open(h):n.open(h,Math.round(t.verno*10));if(!d)throw new S.MissingAPI;d.onerror=ke(u),d.onblocked=U(t._fireOnBlocked),d.onupgradeneeded=U(f=>{if(o=d.transaction,e.autoSchema&&!t._options.allowEmptyDB){d.onerror=ti,o.abort(),d.result.close();let p=n.deleteDatabase(h);p.onsuccess=p.onerror=U(()=>{u(new S.NoSuchDatabase(`Database ${h} doesnt exist`))})}else{o.onerror=ke(u);var v=f.oldVersion>Math.pow(2,62)?0:f.oldVersion;a=v<1,t._novip.idbdb=d.result,vu(t,v/10,o,u)}},u),d.onsuccess=U(()=>{o=null;let f=t._novip.idbdb=d.result,v=pn(f.objectStoreNames);if(v.length>0)try{let p=f.transaction(du(v),"readonly");e.autoSchema?Cu(t,f,p):(jr(t,t._dbSchema,p),Du(t,p)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),ts(t,p)}catch{}Yt.push(t),f.onversionchange=U(p=>{e.vcFired=!0,t.on("versionchange").fire(p)}),f.onclose=U(p=>{t.on("close").fire(p)}),a&&Su(t._deps,h),c()},u)}).catch(c=>c&&c.name==="UnknownError"&&e.PR1398_maxLoop>0?(e.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),l()):w.reject(c));return w.race([i,(typeof navigator>"u"?w.resolve():Tu()).then(l)]).then(()=>(r(),e.onReadyBeingFired=[],w.resolve(Kr(()=>t.on.ready.fire(t.vip))).then(function c(){if(e.onReadyBeingFired.length>0){let u=e.onReadyBeingFired.reduce(Xr,B);return e.onReadyBeingFired=[],w.resolve(Kr(()=>u(t.vip))).then(c)}}))).finally(()=>{e.onReadyBeingFired=null,e.isBeingOpened=!1}).then(()=>t).catch(c=>{e.dbOpenError=c;try{o&&o.abort()}catch{}return i===e.openCanceller&&t._close(),Y(c)}).finally(()=>{e.openComplete=!0,s()})}function zr(t){var e=o=>t.next(o),n=o=>t.throw(o),i=s(e),r=s(n);function s(o){return a=>{var l=o(a),c=l.value;return l.done?c:!c||typeof c.then!="function"?ne(c)?Promise.all(c).then(i,r):i(c):c.then(i,r)}}return s(e)()}function Mu(t,e,n){var i=arguments.length;if(i<2)throw new S.InvalidArgument("Too few arguments");for(var r=new Array(i-1);--i;)r[i-1]=arguments[i];n=r.pop();var s=ha(r);return[t,s,n]}function Oa(t,e,n,i,r){return w.resolve().then(()=>{let s=x.transless||x,o=t._createTransaction(e,n,t._dbSchema,i),a={trans:o,transless:s};if(i)o.idbtrans=i.idbtrans;else try{o.create(),t._state.PR1398_maxLoop=3}catch(h){return h.name===Yr.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>Oa(t,e,n,null,r))):Y(h)}let l=Zr(r);l&&kt();let c,u=w.follow(()=>{if(c=r.call(o,o),c)if(l){var h=ze.bind(null,null);c.then(h,h)}else typeof c.next=="function"&&typeof c.throw=="function"&&(c=zr(c))},a);return(c&&typeof c.then=="function"?w.resolve(c).then(h=>o.active?h:Y(new S.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):u.then(()=>c)).then(h=>(i&&o._resolve(),o._completion.then(()=>h))).catch(h=>(o._reject(h),Y(h)))})}function Yi(t,e,n){let i=ne(t)?t.slice():[t];for(let r=0;r<n;++r)i.push(e);return i}function Ru(t){return z(N({},t),{table(e){let n=t.table(e),{schema:i}=n,r={},s=[];function o(d,f,v){let p=Xt(d),g=r[p]=r[p]||[],m=d==null?0:typeof d=="string"?1:d.length,y=f>0,b=z(N({},v),{isVirtual:y,keyTail:f,keyLength:m,extractKey:Nr(d),unique:!y&&v.unique});if(g.push(b),b.isPrimaryKey||s.push(b),m>1){let _=m===2?d[0]:d.slice(0,m-1);o(_,f+1,v)}return g.sort((_,C)=>_.keyTail-C.keyTail),b}let a=o(i.primaryKey.keyPath,0,i.primaryKey);r[":id"]=[a];for(let d of i.indexes)o(d.keyPath,0,d);function l(d){let f=r[Xt(d)];return f&&f[0]}function c(d,f){return{type:d.type===1?2:d.type,lower:Yi(d.lower,d.lowerOpen?t.MAX_KEY:t.MIN_KEY,f),lowerOpen:!0,upper:Yi(d.upper,d.upperOpen?t.MIN_KEY:t.MAX_KEY,f),upperOpen:!0}}function u(d){let f=d.query.index;return f.isVirtual?z(N({},d),{query:{index:f,range:c(d.query.range,f.keyTail)}}):d}return z(N({},n),{schema:z(N({},i),{primaryKey:a,indexes:s,getIndexByKeyPath:l}),count(d){return n.count(u(d))},query(d){return n.query(u(d))},openCursor(d){let{keyTail:f,isVirtual:v,keyLength:p}=d.query.index;if(!v)return n.openCursor(d);function g(m){function y(_){_!=null?m.continue(Yi(_,d.reverse?t.MAX_KEY:t.MIN_KEY,f)):d.unique?m.continue(m.key.slice(0,p).concat(d.reverse?t.MIN_KEY:t.MAX_KEY,f)):m.continue()}return Object.create(m,{continue:{value:y},continuePrimaryKey:{value(_,C){m.continuePrimaryKey(Yi(_,t.MAX_KEY,f),C)}},primaryKey:{get(){return m.primaryKey}},key:{get(){let _=m.key;return p===1?_[0]:_.slice(0,p)}},value:{get(){return m.value}}})}return n.openCursor(u(d)).then(m=>m&&g(m))}})}})}var ku={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:Ru};function os(t,e,n,i){return n=n||{},i=i||"",Z(t).forEach(r=>{if(!ve(e,r))n[i+r]=void 0;else{var s=t[r],o=e[r];if(typeof s=="object"&&typeof o=="object"&&s&&o){let a=br(s),l=br(o);a!==l?n[i+r]=e[r]:a==="Object"?os(s,o,n,i+r+"."):s!==o&&(n[i+r]=e[r])}else s!==o&&(n[i+r]=e[r])}}),Z(e).forEach(r=>{ve(t,r)||(n[i+r]=e[r])}),n}function Ou(t,e){return e.type==="delete"?e.keys:e.keys||e.values.map(t.extractKey)}var Fu={stack:"dbcore",name:"HooksMiddleware",level:2,create:t=>z(N({},t),{table(e){let n=t.table(e),{primaryKey:i}=n.schema;return z(N({},n),{mutate(s){let o=x.trans,{deleting:a,creating:l,updating:c}=o.table(e).hook;switch(s.type){case"add":if(l.fire===B)break;return o._promise("readwrite",()=>u(s),!0);case"put":if(l.fire===B&&c.fire===B)break;return o._promise("readwrite",()=>u(s),!0);case"delete":if(a.fire===B)break;return o._promise("readwrite",()=>u(s),!0);case"deleteRange":if(a.fire===B)break;return o._promise("readwrite",()=>h(s),!0)}return n.mutate(s);function u(f){let v=x.trans,p=f.keys||Ou(i,f);if(!p)throw new Error("Keys missing");return f=f.type==="add"||f.type==="put"?z(N({},f),{keys:p}):N({},f),f.type!=="delete"&&(f.values=[...f.values]),f.keys&&(f.keys=[...f.keys]),Vu(n,f,p).then(g=>{let m=p.map((y,b)=>{let _=g[b],C={onerror:null,onsuccess:null};if(f.type==="delete")a.fire.call(C,y,_,v);else if(f.type==="add"||_===void 0){let D=l.fire.call(C,y,f.values[b],v);y==null&&D!=null&&(y=D,f.keys[b]=y,i.outbound||Pe(f.values[b],i.keyPath,y))}else{let D=os(_,f.values[b]),E=c.fire.call(C,D,y,_,v);if(E){let A=f.values[b];Object.keys(E).forEach(O=>{ve(A,O)?A[O]=E[O]:Pe(A,O,E[O])})}}return C});return n.mutate(f).then(({failures:y,results:b,numFailures:_,lastResult:C})=>{for(let D=0;D<p.length;++D){let E=b?b[D]:p[D],A=m[D];E==null?A.onerror&&A.onerror(y[D]):A.onsuccess&&A.onsuccess(f.type==="put"&&g[D]?f.values[D]:E)}return{failures:y,results:b,numFailures:_,lastResult:C}}).catch(y=>(m.forEach(b=>b.onerror&&b.onerror(y)),Promise.reject(y)))})}function h(f){return d(f.trans,f.range,1e4)}function d(f,v,p){return n.query({trans:f,values:!1,query:{index:i,range:v},limit:p}).then(({result:g})=>u({type:"delete",keys:g,trans:f}).then(m=>m.numFailures>0?Promise.reject(m.failures[0]):g.length<p?{failures:[],numFailures:0,lastResult:void 0}:d(f,z(N({},v),{lower:g[g.length-1],lowerOpen:!0}),p)))}}})}})};function Vu(t,e,n){return e.type==="add"?Promise.resolve([]):t.getMany({trans:e.trans,keys:n,cache:"immutable"})}function Fa(t,e,n){try{if(!e||e.keys.length<t.length)return null;let i=[];for(let r=0,s=0;r<e.keys.length&&s<t.length;++r)de(e.keys[r],t[s])===0&&(i.push(n?si(e.values[r]):e.values[r]),++s);return i.length===t.length?i:null}catch{return null}}var Nu={stack:"dbcore",level:-1,create:t=>({table:e=>{let n=t.table(e);return z(N({},n),{getMany:i=>{if(!i.cache)return n.getMany(i);let r=Fa(i.keys,i.trans._cache,i.cache==="clone");return r?w.resolve(r):n.getMany(i).then(s=>(i.trans._cache={keys:i.keys,values:i.cache==="clone"?si(s):s},s))},mutate:i=>(i.type!=="add"&&(i.trans._cache=null),n.mutate(i))})}})};function as(t){return!("from"in t)}var Le=function(t,e){if(this)he(this,arguments.length?{d:1,from:t,to:arguments.length>1?e:t}:{d:0});else{let n=new Le;return t&&"d"in t&&he(n,t),n}};Tt(Le.prototype,{add(t){return hn(this,t),this},addKey(t){return ri(this,t,t),this},addKeys(t){return t.forEach(e=>ri(this,e,e)),this},[wr](){return Ur(this)}});function ri(t,e,n){let i=de(e,n);if(isNaN(i))return;if(i>0)throw RangeError();if(as(t))return he(t,{from:e,to:n,d:1});let r=t.l,s=t.r;if(de(n,t.from)<0)return r?ri(r,e,n):t.l={from:e,to:n,d:1,l:null,r:null},sa(t);if(de(e,t.to)>0)return s?ri(s,e,n):t.r={from:e,to:n,d:1,l:null,r:null},sa(t);de(e,t.from)<0&&(t.from=e,t.l=null,t.d=s?s.d+1:1),de(n,t.to)>0&&(t.to=n,t.r=null,t.d=t.l?t.l.d+1:1);let o=!t.r;r&&!t.l&&hn(t,r),s&&o&&hn(t,s)}function hn(t,e){function n(i,{from:r,to:s,l:o,r:a}){ri(i,r,s),o&&n(i,o),a&&n(i,a)}as(e)||n(t,e)}function Lu(t,e){let n=Ur(e),i=n.next();if(i.done)return!1;let r=i.value,s=Ur(t),o=s.next(r.from),a=o.value;for(;!i.done&&!o.done;){if(de(a.from,r.to)<=0&&de(a.to,r.from)>=0)return!0;de(r.from,a.from)<0?r=(i=n.next(a.from)).value:a=(o=s.next(r.from)).value}return!1}function Ur(t){let e=as(t)?null:{s:0,n:t};return{next(n){let i=arguments.length>0;for(;e;)switch(e.s){case 0:if(e.s=1,i)for(;e.n.l&&de(n,e.n.from)<0;)e={up:e,n:e.n.l,s:1};else for(;e.n.l;)e={up:e,n:e.n.l,s:1};case 1:if(e.s=2,!i||de(n,e.n.to)<=0)return{value:e.n,done:!1};case 2:if(e.n.r){e.s=3,e={up:e,n:e.n.r,s:0};continue}case 3:e=e.up}return{done:!0}}}}function sa(t){var e,n;let i=(((e=t.r)===null||e===void 0?void 0:e.d)||0)-(((n=t.l)===null||n===void 0?void 0:n.d)||0),r=i>1?"r":i<-1?"l":"";if(r){let s=r==="r"?"l":"r",o=N({},t),a=t[r];t.from=a.from,t.to=a.to,t[r]=a[r],o[r]=a[s],t[s]=o,o.d=oa(o)}t.d=oa(t)}function oa({r:t,l:e}){return(t?e?Math.max(t.d,e.d):t.d:e?e.d:0)+1}var Bu={stack:"dbcore",level:0,create:t=>{let e=t.schema.name,n=new Le(t.MIN_KEY,t.MAX_KEY);return z(N({},t),{table:i=>{let r=t.table(i),{schema:s}=r,{primaryKey:o}=s,{extractKey:a,outbound:l}=o,c=z(N({},r),{mutate:d=>{let f=d.trans,v=f.mutatedParts||(f.mutatedParts={}),p=D=>{let E=`idb://${e}/${i}/${D}`;return v[E]||(v[E]=new Le)},g=p(""),m=p(":dels"),{type:y}=d,[b,_]=d.type==="deleteRange"?[d.range]:d.type==="delete"?[d.keys]:d.values.length<50?[[],d.values]:[],C=d.trans._cache;return r.mutate(d).then(D=>{if(ne(b)){y!=="delete"&&(b=D.results),g.addKeys(b);let E=Fa(b,C);!E&&y!=="add"&&m.addKeys(b),(E||_)&&ju(p,s,E,_)}else if(b){let E={from:b.lower,to:b.upper};m.add(E),g.add(E)}else g.add(n),m.add(n),s.indexes.forEach(E=>p(E.name).add(n));return D})}}),u=({query:{index:d,range:f}})=>{var v,p;return[d,new Le((v=f.lower)!==null&&v!==void 0?v:t.MIN_KEY,(p=f.upper)!==null&&p!==void 0?p:t.MAX_KEY)]},h={get:d=>[o,new Le(d.key)],getMany:d=>[o,new Le().addKeys(d.keys)],count:u,query:u,openCursor:u};return Z(h).forEach(d=>{c[d]=function(f){let{subscr:v}=x;if(v){let p=_=>{let C=`idb://${e}/${i}/${_}`;return v[C]||(v[C]=new Le)},g=p(""),m=p(":dels"),[y,b]=h[d](f);if(p(y.name||"").add(b),!y.isPrimaryKey)if(d==="count")m.add(n);else{let _=d==="query"&&l&&f.values&&r.query(z(N({},f),{values:!1}));return r[d].apply(this,arguments).then(C=>{if(d==="query"){if(l&&f.values)return _.then(({result:E})=>(g.addKeys(E),C));let D=f.values?C.result.map(a):C.result;f.values?g.addKeys(D):m.addKeys(D)}else if(d==="openCursor"){let D=C,E=f.values;return D&&Object.create(D,{key:{get(){return m.addKey(D.primaryKey),D.key}},primaryKey:{get(){let A=D.primaryKey;return m.addKey(A),A}},value:{get(){return E&&g.addKey(D.primaryKey),D.value}}})}return C})}}return r[d].apply(this,arguments)}}),c}})}};function ju(t,e,n,i){function r(s){let o=t(s.name||"");function a(c){return c!=null?s.extractKey(c):null}let l=c=>s.multiEntry&&ne(c)?c.forEach(u=>o.addKey(u)):o.addKey(c);(n||i).forEach((c,u)=>{let h=n&&a(n[u]),d=i&&a(i[u]);de(h,d)!==0&&(h!=null&&l(h),d!=null&&l(d))})}e.indexes.forEach(r)}var Pt=class t{constructor(e,n){this._middlewares={},this.verno=0;let i=t.dependencies;this._options=n=N({addons:t.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};let{addons:r}=n;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;let s={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:B,dbReadyPromise:null,cancelOpen:B,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};s.dbReadyPromise=new w(o=>{s.dbReadyResolve=o}),s.openCanceller=new w((o,a)=>{s.cancelOpen=a}),this._state=s,this.name=e,this.on=ci(this,"populate","blocked","versionchange","close",{ready:[Xr,B]}),this.on.ready.subscribe=la(this.on.ready.subscribe,o=>(a,l)=>{t.vip(()=>{let c=this._state;if(c.openComplete)c.dbOpenError||w.resolve().then(a),l&&o(a);else if(c.onReadyBeingFired)c.onReadyBeingFired.push(a),l&&o(a);else{o(a);let u=this;l||o(function h(){u.on.ready.unsubscribe(a),u.on.ready.unsubscribe(h)})}})}),this.Collection=nu(this),this.Table=Jc(this),this.Transaction=uu(this),this.Version=Eu(this),this.WhereClause=cu(this),this.on("versionchange",o=>{o.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",o=>{!o.newVersion||o.newVersion<o.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${o.oldVersion/10}`)}),this._maxKey=ni(n.IDBKeyRange),this._createTransaction=(o,a,l,c)=>new this.Transaction(o,a,l,this._options.chromeTransactionDurability,c),this._fireOnBlocked=o=>{this.on("blocked").fire(o),Yt.filter(a=>a.name===this.name&&a!==this&&!a._state.vcFired).map(a=>a.on("versionchange").fire(o))},this.use(ku),this.use(Fu),this.use(Bu),this.use(Nu),this.vip=Object.create(this,{_vip:{value:!0}}),r.forEach(o=>o(this))}version(e){if(isNaN(e)||e<.1)throw new S.Type("Given version is not a positive number");if(e=Math.round(e*10)/10,this.idbdb||this._state.isBeingOpened)throw new S.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);let n=this._versions;var i=n.filter(r=>r._cfg.version===e)[0];return i||(i=new this.Version(e),n.push(i),n.sort(_u),i.stores({}),this._state.autoSchema=!1,i)}_whenReady(e){return this.idbdb&&(this._state.openComplete||x.letThrough||this._vip)?e():new w((n,i)=>{if(this._state.openComplete)return i(new S.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen){i(new S.DatabaseClosed);return}this.open().catch(B)}this._state.dbReadyPromise.then(n,i)}).then(e)}use({stack:e,create:n,level:i,name:r}){r&&this.unuse({stack:e,name:r});let s=this._middlewares[e]||(this._middlewares[e]=[]);return s.push({stack:e,create:n,level:i??10,name:r}),s.sort((o,a)=>o.level-a.level),this}unuse({stack:e,name:n,create:i}){return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter(r=>i?r.create!==i:n?r.name!==n:!1)),this}open(){return Pu(this)}_close(){let e=this._state,n=Yt.indexOf(this);if(n>=0&&Yt.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}e.dbReadyPromise=new w(i=>{e.dbReadyResolve=i}),e.openCanceller=new w((i,r)=>{e.cancelOpen=r})}close(){this._close();let e=this._state;this._options.autoOpen=!1,e.dbOpenError=new S.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)}delete(){let e=arguments.length>0,n=this._state;return new w((i,r)=>{let s=()=>{this.close();var o=this._deps.indexedDB.deleteDatabase(this.name);o.onsuccess=U(()=>{Au(this._deps,this.name),i()}),o.onerror=ke(r),o.onblocked=this._fireOnBlocked};if(e)throw new S.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(s):s()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){let e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return Z(this._allTables).map(e=>this._allTables[e])}transaction(){let e=Mu.apply(this,arguments);return this._transaction.apply(this,e)}_transaction(e,n,i){let r=x.trans;(!r||r.db!==this||e.indexOf("!")!==-1)&&(r=null);let s=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");let o,a;try{if(a=n.map(c=>{var u=c instanceof this.Table?c.name:c;if(typeof u!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return u}),e=="r"||e===pr)o=pr;else if(e=="rw"||e==mr)o=mr;else throw new S.InvalidArgument("Invalid transaction mode: "+e);if(r){if(r.mode===pr&&o===mr)if(s)r=null;else throw new S.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");r&&a.forEach(c=>{if(r&&r.storeNames.indexOf(c)===-1)if(s)r=null;else throw new S.SubTransaction("Table "+c+" not included in parent transaction.")}),s&&r&&!r.active&&(r=null)}}catch(c){return r?r._promise(null,(u,h)=>{h(c)}):Y(c)}let l=Oa.bind(null,this,o,a,r,i);return r?r._promise(o,l,"lock"):x.trans?Ot(x.transless,()=>this._whenReady(l)):this._whenReady(l)}table(e){if(!ve(this._allTables,e))throw new S.InvalidTable(`Table ${e} does not exist`);return this._allTables[e]}},Hu=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Gr=class{constructor(e){this._subscribe=e}subscribe(e,n,i){return this._subscribe(!e||typeof e=="function"?{next:e,error:n,complete:i}:e)}[Hu](){return this}};function Va(t,e){return Z(e).forEach(n=>{let i=t[n]||(t[n]=new Le);hn(i,e[n])}),t}function Ku(t){let e=!1,n,i=new Gr(r=>{let s=Zr(t);function o(g){s&&kt();let m=()=>qe(t,{subscr:g,trans:null}),y=x.trans?Ot(x.transless,m):m();return s&&y.then(ze,ze),y}let a=!1,l={},c={},u={get closed(){return a},unsubscribe:()=>{a=!0,Xe.storagemutated.unsubscribe(v)}};r.start&&r.start(u);let h=!1,d=!1;function f(){return Z(c).some(g=>l[g]&&Lu(l[g],c[g]))}let v=g=>{Va(l,g),f()&&p()},p=()=>{if(h||a)return;l={};let g={},m=o(g);d||(Xe(ii,v),d=!0),h=!0,Promise.resolve(m).then(y=>{e=!0,n=y,h=!1,!a&&(f()?p():(l={},c=g,r.next&&r.next(y)))},y=>{h=!1,e=!1,r.error&&r.error(y),u.unsubscribe()})};return p(),u});return i.hasValue=()=>e,i.getValue=()=>n,i}var Wr;try{Wr={indexedDB:H.indexedDB||H.mozIndexedDB||H.webkitIndexedDB||H.msIndexedDB,IDBKeyRange:H.IDBKeyRange||H.webkitIDBKeyRange}}catch{Wr={indexedDB:null,IDBKeyRange:null}}var at=Pt;Tt(at,z(N({},mn),{delete(t){return new at(t,{addons:[]}).delete()},exists(t){return new at(t,{addons:[]}).open().then(e=>(e.close(),!0)).catch("NoSuchDatabaseError",()=>!1)},getDatabaseNames(t){try{return xu(at.dependencies).then(t)}catch{return Y(new S.MissingAPI)}},defineClass(){function t(e){he(this,e)}return t},ignoreTransaction(t){return x.trans?Ot(x.transless,t):t()},vip:Kr,async:function(t){return function(){try{var e=zr(t.apply(this,arguments));return!e||typeof e.then!="function"?w.resolve(e):e}catch(n){return Y(n)}}},spawn:function(t,e,n){try{var i=zr(t.apply(n,e||[]));return!i||typeof i.then!="function"?w.resolve(i):i}catch(r){return Y(r)}},currentTransaction:{get:()=>x.trans||null},waitFor:function(t,e){let n=w.resolve(typeof t=="function"?at.ignoreTransaction(t):t).timeout(e||6e4);return x.trans?x.trans.waitFor(n):n},Promise:w,debug:{get:()=>Oe,set:t=>{pa(t,t==="dexie"?()=>!0:Aa)}},derive:Mt,extend:he,props:Tt,override:la,Events:ci,on:Xe,liveQuery:Ku,extendObservabilitySet:Va,getByKeyPath:He,setByKeyPath:Pe,delByKeyPath:Ec,shallowClone:da,deepClone:si,getObjectDiff:os,cmp:de,asap:ca,minKey:Rr,addons:[],connections:Yt,errnames:Yr,dependencies:Wr,semVer:Jo,version:Jo.split(".").map(t=>parseInt(t)).reduce((t,e,n)=>t+e/Math.pow(10,n*2))}));at.maxKey=ni(at.dependencies.IDBKeyRange);typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Xe(ii,t=>{if(!je){let e;gn?(e=document.createEvent("CustomEvent"),e.initCustomEvent(Ze,!0,!0,t)):e=new CustomEvent(Ze,{detail:t}),je=!0,dispatchEvent(e),je=!1}}),addEventListener(Ze,({detail:t})=>{je||fn(t)}));function fn(t){let e=je;try{je=!0,Xe.storagemutated.fire(t)}finally{je=e}}var je=!1;if(typeof BroadcastChannel<"u"){let t=new BroadcastChannel(Ze);typeof t.unref=="function"&&t.unref(),Xe(ii,e=>{je||t.postMessage(e)}),t.onmessage=e=>{e.data&&fn(e.data)}}else if(typeof self<"u"&&typeof navigator<"u"){Xe(ii,e=>{try{je||(typeof localStorage<"u"&&localStorage.setItem(Ze,JSON.stringify({trig:Math.random(),changedParts:e})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(n=>n.postMessage({type:Ze,changedParts:e})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",e=>{if(e.key===Ze){let n=JSON.parse(e.newValue);n&&fn(n.changedParts)}});let t=self.document&&navigator.serviceWorker;t&&t.addEventListener("message",zu)}function zu({data:t}){t&&t.type===Ze&&fn(t.changedParts)}w.rejectionMapper=Oc;pa(Oe,Aa);var ls=class extends Pt{constructor(){super("basketstats-irt"),this.version(1).stores({teams:"++id, name",players:"++id, name, teamId"}),this.open().then(e=>console.log("DB Opened")).catch(e=>console.log(e.message))}populate(){return Qe(this,null,function*(){let e=yield pt.teams.add({name:"Dru\u017Cyna A"}),n=yield pt.teams.add({name:"Dru\u017Cyna B"});yield pt.players.bulkAdd([{name:"W\u0142odzimierz Zasada",teamId:e},{name:"Kuba W\xF3jcicki",teamId:e},{name:"Piotr Hajdas",teamId:e},{name:"Seweryn Tla\u0142ka",teamId:e},{name:"Hubert Zamora",teamId:e},{name:"Mariusz Kie\u0142kowski",teamId:n},{name:"Artur Majchrzak",teamId:n},{name:"Krzysztof \u015Awiadek",teamId:n},{name:"Marcin Olek",teamId:n},{name:"Wojciech P\u0142awski",teamId:n}])})}},pt=new ls;var Na=(()=>{let e=class e{constructor(i){this.formBuilder=i}saveMatchConfiguration(i){return Qe(this,null,function*(){yield this.saveTeam(i.teamA),yield this.saveTeam(i.teamB)})}saveTeam(i){return Qe(this,null,function*(){let r;i.id?(r=i.id,this.updateTeam(r,i)):r=yield this.addTeam(i),i.players=i.players?.map(s=>s.id?z(N({},s),{teamId:r}):{name:s.name,teamId:r}),i.players&&(yield pt.players.bulkPut(i.players))})}addTeam(i){return Qe(this,null,function*(){return yield pt.teams.add({name:i.name})})}updateTeam(i,r){return Qe(this,null,function*(){return yield pt.teams.update(i,{name:r.name})})}newTeamFormGroup(){return new Ge({id:new me,name:new me(null,[st.required]),players:new jt(Array.from({length:5},()=>this.newPlayerFormGroup()))})}addBenchPlayerForms(i,r){let s=r-5;for(let o=0;o<s;o++)i.controls.players.push(this.newPlayerFormGroup())}newPlayerFormGroup(){return this.formBuilder.group({id:new me,teamId:new me,name:new me(null,[st.required])})}};e.\u0275fac=function(r){return new(r||e)($(po))},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var La=(()=>{let e=class e{constructor(){this.isLoading$=new di(!1)}startLoading(){this.isLoading$.next(!0)}stopLoading(){this.isLoading$.next(!1)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Wu(t,e){if(t&1&&(T(0,"h1",6),ee(1,"Sk\u0142ady"),P(),T(2,"div",7)(3,"div",8),ce(4,"app-team-definition",9),P(),ce(5,"p-divider",10),T(6,"div",8),ce(7,"app-team-definition",9),P()()),t&2){let n=V();k(4),M("form",n.teamAForm),k(3),M("form",n.teamBForm)}}function $u(t,e){if(t&1&&(T(0,"h1",6),ee(1,"Ustawienie"),P(),T(2,"div",7)(3,"div",8),ce(4,"app-team-reorder",11),P(),ce(5,"p-divider",10),T(6,"div",8),ce(7,"app-team-reorder",11),P()()),t&2){let n=V();k(4),M("team",n.teamA),k(3),M("team",n.teamB)}}function Zu(t,e){t&1&&ee(0," 2 ")}function qu(t,e){if(t&1){let n=Ce();T(0,"p-button",12),W("onClick",function(){ae(n);let r=V();return le(r.previousStep())}),P()}t&2&&M("outlined",!0)("rounded",!0)}function Yu(t,e){if(t&1){let n=Ce();T(0,"p-button",13),W("onClick",function(){ae(n);let r=V();return le(r.nextStep())}),P()}t&2&&M("rounded",!0)}function Xu(t,e){if(t&1){let n=Ce();T(0,"p-button",14),W("onClick",function(){ae(n);let r=V();return le(r.saveMatchConfiguration())}),P()}t&2&&M("rounded",!0)}var nf=(()=>{let e=class e{constructor(i,r,s,o,a,l){this.matchPreparationService=i,this.messageService=r,this.activatedRoute=s,this.router=o,this.loaderService=a,this.appRoutes=l,this.teamAForm=this.matchPreparationService.newTeamFormGroup(),this.teamBForm=this.matchPreparationService.newTeamFormGroup(),this.activeIndex=0}ngOnInit(){this.activatedRoute.data.subscribe(({match:i})=>{i&&(this.matchPreparationService.addBenchPlayerForms(this.teamAForm,i.teamA.players.length),this.matchPreparationService.addBenchPlayerForms(this.teamBForm,i.teamB.players.length),i.teamA&&i.teamB&&(this.teamAForm.patchValue(i.teamA),this.teamBForm.patchValue(i.teamB)))}),this.items=[{label:"Sk\u0142ady",command:i=>this.messageService.add({severity:"info",summary:"First Step",detail:i.item.label}),style:{width:"33%"}},{label:"Ustawienie",command:i=>this.messageService.add({severity:"info",summary:"Second Step",detail:i.item.label}),style:{width:"33%"}},{label:"Podsumowanie",command:i=>this.messageService.add({severity:"info",summary:"Third Step",detail:i.item.label}),style:{width:"33%"}}]}onActiveIndexChange(i){this.activeIndex=i}nextStep(){this.activeIndex===0&&(this.teamAForm.controls.name.markAsDirty(),this.teamBForm.controls.name.markAsDirty(),this.teamAForm.controls.players.controls.forEach(i=>i.controls.name.markAsDirty()),this.teamBForm.controls.players.controls.forEach(i=>i.controls.name.markAsDirty()),this.teamAForm.invalid||this.teamBForm.invalid)||this.activeIndex<2&&this.activeIndex++}previousStep(){this.activeIndex>0&&this.activeIndex--}saveMatchConfiguration(){this.loaderService.startLoading(),this.matchPreparationService.saveMatchConfiguration({teamA:this.teamA,teamB:this.teamB}).then(()=>{this.loaderService.stopLoading(),this.router.navigate([this.appRoutes.MATCH,this.appRoutes.PROCESS])})}get teamA(){return this.teamAForm.value}get teamB(){return this.teamBForm.value}};e.\u0275fac=function(r){return new(r||e)(I(Na),I(Ps),I(Ci),I(Di),I(La),I(ks))},e.\u0275cmp=Ae({type:e,selectors:[["app-match-preparation"]],decls:9,vars:7,consts:[[3,"activeIndexChange","model","readonly","activeIndex"],[1,"preparation-container"],[1,"navigation-buttons"],["icon","pi pi-arrow-left","iconPos","left",3,"outlined","rounded","onClick",4,"ngIf"],["label","Dalej","icon","pi pi-arrow-right","iconPos","right",3,"rounded","onClick",4,"ngIf"],["label","Potwierd\u017A","icon","pi pi-check","iconPos","left","severity","success",3,"rounded","onClick",4,"ngIf"],[1,"text-center","mt-3"],[1,"columns--two"],[1,"d-flex","justify-content-center"],[3,"form"],["layout","vertical"],[3,"team"],["icon","pi pi-arrow-left","iconPos","left",3,"onClick","outlined","rounded"],["label","Dalej","icon","pi pi-arrow-right","iconPos","right",3,"onClick","rounded"],["label","Potwierd\u017A","icon","pi pi-check","iconPos","left","severity","success",3,"onClick","rounded"]],template:function(r,s){if(r&1&&(T(0,"p-steps",0),W("activeIndexChange",function(a){return s.onActiveIndexChange(a)}),P(),T(1,"div",1),we(2,Wu,8,2)(3,$u,8,2)(4,Zu,1,0),P(),T(5,"div",2),we(6,qu,1,2,"p-button",3)(7,Yu,1,1,"p-button",4)(8,Xu,1,1,"p-button",5),P()),r&2){let o;M("model",s.items)("readonly",!0)("activeIndex",s.activeIndex),k(2),ys(2,(o=s.activeIndex)===0?2:o===1?3:o===2?4:-1),k(4),M("ngIf",s.activeIndex>0),k(),M("ngIf",s.activeIndex<2),k(),M("ngIf",s.activeIndex==2)}},dependencies:[bt,Os,xi,mo,yo,Zo],styles:[".preparation-container[_ngcontent-%COMP%]{min-height:55vh}.navigation-buttons[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:30px}.navigation-buttons[_ngcontent-%COMP%]   p-button[_ngcontent-%COMP%]:first-of-type{margin-right:10px}@media screen and (max-width: 1024px){p-divider[_ngcontent-%COMP%]{visibility:hidden}}"]});let t=e;return t})();export{_d as a,pt as b,La as c,Md as d,kd as e,Nd as f,Kh as g,nf as h};
