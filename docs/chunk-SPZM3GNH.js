import{c as He,d as ae,f as Y,g as Z,h as se}from"./chunk-IX6G3U3V.js";import{A as $e,E as Xe,f as $,g as X,h as ze,i as Ve,j as je,m as Ne,p as Ue,t as We,u as b,v as Ye,w as Ze}from"./chunk-TOLDVNLI.js";import{$a as c,Ab as f,Ba as _e,Bb as T,Db as Te,Eb as Ee,Gb as ke,Ha as Ce,Ja as l,Jb as M,Ka as u,Lb as De,Mb as Le,Pa as xe,Ra as ve,Ua as Pe,Y as he,Za as _,_a as B,_b as Ae,a as oe,b as re,cb as E,db as be,fb as S,gc as Be,ha as x,hb as w,ib as I,jb as a,k as ue,kb as s,lb as y,nc as N,ob as Me,pa as v,pb as R,pc as k,qa as P,qb as C,qc as U,ra as ge,rb as d,rc as Re,sa as ye,sb as Oe,sc as Fe,tb as Se,ub as F,vb as we,vc as W,wa as fe,wb as Ie,xa as O,xb as V,yb as j}from"./chunk-YXDHR4WX.js";var Ke=(()=>{class e extends We{static \u0275fac=(()=>{let t;return function(o){return(t||(t=ye(e)))(o||e)}})();static \u0275cmp=x({type:e,selectors:[["TimesIcon"]],standalone:!0,features:[Pe,ke],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M8.01186 7.00933L12.27 2.75116C12.341 2.68501 12.398 2.60524 12.4375 2.51661C12.4769 2.42798 12.4982 2.3323 12.4999 2.23529C12.5016 2.13827 12.4838 2.0419 12.4474 1.95194C12.4111 1.86197 12.357 1.78024 12.2884 1.71163C12.2198 1.64302 12.138 1.58893 12.0481 1.55259C11.9581 1.51625 11.8617 1.4984 11.7647 1.50011C11.6677 1.50182 11.572 1.52306 11.4834 1.56255C11.3948 1.60204 11.315 1.65898 11.2488 1.72997L6.99067 5.98814L2.7325 1.72997C2.59553 1.60234 2.41437 1.53286 2.22718 1.53616C2.03999 1.53946 1.8614 1.61529 1.72901 1.74767C1.59663 1.88006 1.5208 2.05865 1.5175 2.24584C1.5142 2.43303 1.58368 2.61419 1.71131 2.75116L5.96948 7.00933L1.71131 11.2675C1.576 11.403 1.5 11.5866 1.5 11.7781C1.5 11.9696 1.576 12.1532 1.71131 12.2887C1.84679 12.424 2.03043 12.5 2.2219 12.5C2.41338 12.5 2.59702 12.424 2.7325 12.2887L6.99067 8.03052L11.2488 12.2887C11.3843 12.424 11.568 12.5 11.7594 12.5C11.9509 12.5 12.1346 12.424 12.27 12.2887C12.4053 12.1532 12.4813 11.9696 12.4813 11.7781C12.4813 11.5866 12.4053 11.403 12.27 11.2675L8.01186 7.00933Z","fill","currentColor"]],template:function(i,o){i&1&&(ge(),a(0,"svg",0),y(1,"path",1),s()),i&2&&(E(o.getClassNames()),B("aria-label",o.ariaLabel)("aria-hidden",o.ariaHidden)("role",o.role))},encapsulation:2})}return e})();var st=["*"],lt=(e,n)=>({showTransitionParams:e,hideTransitionParams:n}),ct=(e,n)=>({value:e,params:n});function pt(e,n){e&1&&Me(0)}function dt(e,n){e&1&&y(0,"TimesIcon",8),e&2&&c("styleClass","p-overlaypanel-close-icon")}function mt(e,n){}function ut(e,n){e&1&&_(0,mt,0,0,"ng-template")}function ht(e,n){if(e&1&&(a(0,"span",9),_(1,ut,1,0,null,3),s()),e&2){let t=d(3);l(),c("ngTemplateOutlet",t.closeIconTemplate)}}function gt(e,n){if(e&1){let t=R();a(0,"button",5),C("click",function(o){v(t);let r=d(2);return P(r.onCloseClick(o))})("keydown.enter",function(){v(t);let o=d(2);return P(o.hide())}),_(1,dt,1,1,"TimesIcon",6)(2,ht,2,1,"span",7),s()}if(e&2){let t=d(2);B("aria-label",t.ariaCloseLabel),l(),c("ngIf",!t.closeIconTemplate),l(),c("ngIf",t.closeIconTemplate)}}function yt(e,n){if(e&1){let t=R();a(0,"div",1),C("click",function(o){v(t);let r=d();return P(r.onOverlayClick(o))})("@animation.start",function(o){v(t);let r=d();return P(r.onAnimationStart(o))})("@animation.done",function(o){v(t);let r=d();return P(r.onAnimationEnd(o))}),a(1,"div",2),C("click",function(o){v(t);let r=d();return P(r.onContentClick(o))})("mousedown",function(o){v(t);let r=d();return P(r.onContentClick(o))}),Se(2),_(3,pt,1,0,"ng-container",3),s(),_(4,gt,3,3,"button",4),s()}if(e&2){let t=d();E(t.styleClass),c("ngClass","p-overlaypanel p-component")("ngStyle",t.style)("@animation",M(13,ct,t.overlayVisible?"open":"close",M(10,lt,t.showTransitionOptions,t.hideTransitionOptions))),B("aria-modal",t.overlayVisible)("aria-label",t.ariaLabel)("aria-labelledBy",t.ariaLabelledBy),l(3),c("ngTemplateOutlet",t.contentTemplate),l(),c("ngIf",t.showCloseIcon)}}var Ge=(()=>{class e{document;platformId;el;renderer;cd;zone;config;overlayService;ariaLabel;ariaLabelledBy;dismissable=!0;showCloseIcon;style;styleClass;appendTo="body";autoZIndex=!0;ariaCloseLabel;baseZIndex=0;focusOnShow=!0;showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)";hideTransitionOptions=".1s linear";onShow=new O;onHide=new O;templates;container;overlayVisible=!1;render=!1;isOverlayAnimationInProgress=!1;selfClick=!1;documentClickListener;target;willHide;scrollHandler;documentResizeListener;contentTemplate;closeIconTemplate;destroyCallback;overlayEventListener;overlaySubscription;constructor(t,i,o,r,p,g,ie,A){this.document=t,this.platformId=i,this.el=o,this.renderer=r,this.cd=p,this.zone=g,this.config=ie,this.overlayService=A}ngAfterContentInit(){this.templates?.forEach(t=>{switch(t.getType()){case"content":this.contentTemplate=t.template;break;case"closeicon":this.closeIconTemplate=t.template;break;default:this.contentTemplate=t.template;break}this.cd.markForCheck()})}bindDocumentClickListener(){if(W(this.platformId)&&!this.documentClickListener&&this.dismissable){let t=b.isIOS()?"touchstart":"click",i=this.el?this.el.nativeElement.ownerDocument:this.document;this.documentClickListener=this.renderer.listen(i,t,o=>{!this.container?.contains(o.target)&&this.target!==o.target&&!this.target.contains(o.target)&&!this.selfClick&&this.hide(),this.selfClick=!1,this.cd.markForCheck()})}}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null,this.selfClick=!1)}toggle(t,i){this.isOverlayAnimationInProgress||(this.overlayVisible?(this.hasTargetChanged(t,i)&&(this.destroyCallback=()=>{this.show(null,i||t.currentTarget||t.target)}),this.hide()):this.show(t,i))}show(t,i){i&&t&&t.stopPropagation(),!this.isOverlayAnimationInProgress&&(this.target=i||t.currentTarget||t.target,this.overlayVisible=!0,this.render=!0,this.cd.markForCheck())}onOverlayClick(t){this.overlayService.add({originalEvent:t,target:this.el.nativeElement}),this.selfClick=!0}onContentClick(t){let i=t.target;this.selfClick=t.offsetX<i.clientWidth&&t.offsetY<i.clientHeight}hasTargetChanged(t,i){return this.target!=null&&this.target!==(i||t.currentTarget||t.target)}appendContainer(){this.appendTo&&(this.appendTo==="body"?this.renderer.appendChild(this.document.body,this.container):b.appendChild(this.container,this.appendTo))}restoreAppend(){this.container&&this.appendTo&&this.renderer.appendChild(this.el.nativeElement,this.container)}align(){this.autoZIndex&&$.set("overlay",this.container,this.baseZIndex+this.config.zIndex.overlay),b.absolutePosition(this.container,this.target);let t=b.getOffset(this.container),i=b.getOffset(this.target),o=this.document.defaultView?.getComputedStyle(this.container).getPropertyValue("border-radius"),r=0;t.left<i.left&&(r=i.left-t.left-parseFloat(o)*2),this.container?.style.setProperty("--overlayArrowLeft",`${r}px`),t.top<i.top&&(b.addClass(this.container,"p-overlaypanel-flipped"),this.showCloseIcon&&this.renderer.setStyle(this.container,"margin-top","-30px"))}onAnimationStart(t){t.toState==="open"&&(this.container=t.element,this.appendContainer(),this.align(),this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener(),this.focusOnShow&&this.focus(),this.overlayEventListener=i=>{this.container&&this.container.contains(i.target)&&(this.selfClick=!0)},this.overlaySubscription=this.overlayService.clickObservable.subscribe(this.overlayEventListener),this.onShow.emit(null)),this.isOverlayAnimationInProgress=!0}onAnimationEnd(t){switch(t.toState){case"void":this.destroyCallback&&(this.destroyCallback(),this.destroyCallback=null),this.overlaySubscription&&this.overlaySubscription.unsubscribe();break;case"close":this.autoZIndex&&$.clear(this.container),this.overlaySubscription&&this.overlaySubscription.unsubscribe(),this.onContainerDestroy(),this.onHide.emit({}),this.render=!1;break}this.isOverlayAnimationInProgress=!1}focus(){let t=b.findSingle(this.container,"[autofocus]");t&&this.zone.runOutsideAngular(()=>{setTimeout(()=>t.focus(),5)})}hide(){this.overlayVisible=!1,this.cd.markForCheck()}onCloseClick(t){this.hide(),t.preventDefault()}onEscapeKeydown(t){this.hide()}onWindowResize(){this.overlayVisible&&!b.isTouchDevice()&&this.hide()}bindDocumentResizeListener(){if(W(this.platformId)&&!this.documentResizeListener){let t=this.document.defaultView;this.documentResizeListener=this.renderer.listen(t,"resize",this.onWindowResize.bind(this))}}unbindDocumentResizeListener(){this.documentResizeListener&&(this.documentResizeListener(),this.documentResizeListener=null)}bindScrollListener(){W(this.platformId)&&(this.scrollHandler||(this.scrollHandler=new Ye(this.target,()=>{this.overlayVisible&&this.hide()})),this.scrollHandler.bindScrollListener())}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}onContainerDestroy(){this.cd.destroyed||(this.target=null),this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindScrollListener()}ngOnDestroy(){this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.container&&this.autoZIndex&&$.clear(this.container),this.cd.destroyed||(this.target=null),this.destroyCallback=null,this.container&&(this.restoreAppend(),this.onContainerDestroy()),this.overlaySubscription&&this.overlaySubscription.unsubscribe()}static \u0275fac=function(i){return new(i||e)(u(Be),u(_e),u(fe),u(xe),u(Ae),u(ve),u(Ve),u(ze))};static \u0275cmp=x({type:e,selectors:[["p-overlayPanel"]],contentQueries:function(i,o,r){if(i&1&&we(r,je,4),i&2){let p;V(p=j())&&(o.templates=p)}},hostAttrs:[1,"p-element"],hostBindings:function(i,o){i&1&&C("keydown.escape",function(p){return o.onEscapeKeydown(p)},!1,Ce)},inputs:{ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy",dismissable:"dismissable",showCloseIcon:"showCloseIcon",style:"style",styleClass:"styleClass",appendTo:"appendTo",autoZIndex:"autoZIndex",ariaCloseLabel:"ariaCloseLabel",baseZIndex:"baseZIndex",focusOnShow:"focusOnShow",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions"},outputs:{onShow:"onShow",onHide:"onHide"},ngContentSelectors:st,decls:1,vars:1,consts:[["role","dialog",3,"ngClass","ngStyle","class","click",4,"ngIf"],["role","dialog",3,"click","ngClass","ngStyle"],[1,"p-overlaypanel-content",3,"click","mousedown"],[4,"ngTemplateOutlet"],["type","button","class","p-overlaypanel-close p-link","pRipple","",3,"click","keydown.enter",4,"ngIf"],["type","button","pRipple","",1,"p-overlaypanel-close","p-link",3,"click","keydown.enter"],[3,"styleClass",4,"ngIf"],["class","p-overlaypanel-close-icon",4,"ngIf"],[3,"styleClass"],[1,"p-overlaypanel-close-icon"]],template:function(i,o){i&1&&(Oe(),_(0,yt,5,16,"div",0)),i&2&&c("ngIf",o.render)},dependencies:()=>[N,k,Re,U,Ze,Ke],styles:[`@layer primeng{.p-overlaypanel{position:absolute;margin-top:10px;top:0;left:0}.p-overlaypanel-flipped{margin-top:0;margin-bottom:10px}.p-overlaypanel-close{display:flex;justify-content:center;align-items:center;overflow:hidden;position:relative}.p-overlaypanel:after,.p-overlaypanel:before{bottom:100%;left:calc(var(--overlayArrowLeft, 0) + 1.25rem);content:" ";height:0;width:0;position:absolute;pointer-events:none}.p-overlaypanel:after{border-width:8px;margin-left:-8px}.p-overlaypanel:before{border-width:10px;margin-left:-10px}.p-overlaypanel-shifted:after,.p-overlaypanel-shifted:before{left:auto;right:1.25em;margin-left:auto}.p-overlaypanel-flipped:after,.p-overlaypanel-flipped:before{bottom:auto;top:100%}.p-overlaypanel.p-overlaypanel-flipped:after{border-bottom-color:transparent}.p-overlaypanel.p-overlaypanel-flipped:before{border-bottom-color:transparent}}
`],encapsulation:2,data:{animation:[He("animation",[Z("void",Y({transform:"scaleY(0.8)",opacity:0})),Z("close",Y({opacity:0})),Z("open",Y({transform:"translateY(0)",opacity:1})),se("void => open",ae("{{showTransitionParams}}")),se("open => close",ae("{{hideTransitionParams}}"))])]},changeDetection:0})}return e})();var ft=(e,n)=>({selection:e,selected:n});function _t(e,n){if(e&1&&y(0,"div"),e&2){let t=n.$index;be("foul ",t<3?"fill":"empty","")}}function Ct(e,n){if(e&1){let t=R();a(0,"div",2),C("click",function(o){let r=v(t).$implicit,p=d();return P(p.selectPlayer(o,r))}),a(1,"div",3),y(2,"div",4)(3,"img",5),s(),a(4,"div",6),y(5,"div",4),a(6,"div",7)(7,"div",8),f(8),s(),a(9,"div",9),w(10,_t,1,3,"div",10,S),s()()()()}if(e&2){let t=n.$implicit,i=n.$index,o=d();E(i<5?"court-player":"court-player bench-player"),c("ngClass",M(8,ft,o.needPlayerSelection&&!o.selectedPlayerId,t.id===o.selectedPlayerId)),l(3),F("alt","Player ",t.id," avatar"),l(5),Te("#",i+1," | ",t.name,""),l(2),I("iiiii")}}var qe=(()=>{let n=class n{constructor(i){this.messageService=i,this.needPlayerSelection=!1,this.selectedPlayer=new O}ngOnInit(){}selectPlayer(i,o){this.needPlayerSelection&&(this.selectedPlayerId=o?.id,this.selectedPlayer.emit(o))}};n.\u0275fac=function(o){return new(o||n)(u(X))},n.\u0275cmp=x({type:n,selectors:[["app-on-court-players"]],viewQuery:function(o,r){if(o&1&&Ie(Ge,5),o&2){let p;V(p=j())&&(r.playerStatPanels=p)}},inputs:{players:"players",needPlayerSelection:"needPlayerSelection"},outputs:{selectedPlayer:"selectedPlayer"},decls:3,vars:0,consts:[[1,"court-players-box"],[3,"class","ngClass"],[3,"click","ngClass"],[1,"player-avatar"],[1,"shadow-box"],["src","https://picsum.photos/55/55","width","55","height","55",3,"alt"],[1,"player-general"],[1,"player-name-box"],[1,"player-name"],[1,"fouls"],[3,"class"]],template:function(o,r){o&1&&(a(0,"div",0),w(1,Ct,12,11,"div",1,S),s()),o&2&&(l(),I(r.players))},dependencies:[N],styles:["[_nghost-%COMP%]{width:calc((100% - var(--court-panel-box-xxl-width)) / 2);text-align:center}.reverse[_nghost-%COMP%]   .court-players-box[_ngcontent-%COMP%]{align-items:flex-start}.reverse[_nghost-%COMP%]   .court-players-box[_ngcontent-%COMP%]   .court-player[_ngcontent-%COMP%]{flex-direction:row-reverse}.reverse[_nghost-%COMP%]   .court-players-box[_ngcontent-%COMP%]   .court-player[_ngcontent-%COMP%]   .player-avatar[_ngcontent-%COMP%]{top:-15px;right:33px;left:unset}.reverse[_nghost-%COMP%]   .court-players-box[_ngcontent-%COMP%]   .court-player[_ngcontent-%COMP%]   .player-avatar[_ngcontent-%COMP%]   .shadow-box[_ngcontent-%COMP%]{left:4px}.reverse[_nghost-%COMP%]   .court-players-box[_ngcontent-%COMP%]   .court-player[_ngcontent-%COMP%]   .player-general[_ngcontent-%COMP%]{align-items:flex-end;padding:5px 35px 5px 0}.reverse[_nghost-%COMP%]   .court-players-box[_ngcontent-%COMP%]   .court-player[_ngcontent-%COMP%]   .player-general[_ngcontent-%COMP%]   .shadow-box[_ngcontent-%COMP%]{left:4px}.reverse[_nghost-%COMP%]   .court-players-box[_ngcontent-%COMP%]   .court-player[_ngcontent-%COMP%]   .player-general[_ngcontent-%COMP%]   .player-name-box[_ngcontent-%COMP%]{align-items:flex-end}.reverse[_nghost-%COMP%]   .court-players-box[_ngcontent-%COMP%]   .court-player[_ngcontent-%COMP%]   .player-general[_ngcontent-%COMP%]   .player-name[_ngcontent-%COMP%]{text-align:end}.reverse[_nghost-%COMP%]   .court-players-box[_ngcontent-%COMP%]   .court-player[_ngcontent-%COMP%]   .player-general[_ngcontent-%COMP%]   .fouls[_ngcontent-%COMP%]{justify-content:flex-end}.court-players-box[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;align-items:flex-end;padding:4px 5px 0;height:100%}.court-players-box[_ngcontent-%COMP%]   .court-player[_ngcontent-%COMP%]{display:flex;padding:4px 8px;border-radius:12px;width:90%;margin-bottom:25px;position:relative;background-color:var(--box-background-color);cursor:pointer;height:20%}.court-players-box[_ngcontent-%COMP%]   .court-player.selection[_ngcontent-%COMP%]{transition:background-color 1s;animation:_ngcontent-%COMP%_pulse-box-shadow 2s infinite}.court-players-box[_ngcontent-%COMP%]   .court-player.selection[_ngcontent-%COMP%]:hover, .court-players-box[_ngcontent-%COMP%]   .court-player.selected[_ngcontent-%COMP%]{background-color:var(--primary-color-pale)}.court-players-box[_ngcontent-%COMP%]   .court-player[_ngcontent-%COMP%]:last-of-type{margin-bottom:5px}.court-players-box[_ngcontent-%COMP%]   .court-player[_ngcontent-%COMP%]   .player-avatar[_ngcontent-%COMP%]{position:absolute;top:-15px;left:-15px}.court-players-box[_ngcontent-%COMP%]   .court-player[_ngcontent-%COMP%]   .player-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;border-radius:50%}.court-players-box[_ngcontent-%COMP%]   .court-player[_ngcontent-%COMP%]   .player-avatar[_ngcontent-%COMP%]   .shadow-box[_ngcontent-%COMP%]{width:54px;height:54px;border-radius:50%}.court-players-box[_ngcontent-%COMP%]   .court-player[_ngcontent-%COMP%]   .player-general[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;padding:5px 0 5px 35px;width:100%}.court-players-box[_ngcontent-%COMP%]   .court-player[_ngcontent-%COMP%]   .player-general[_ngcontent-%COMP%]   .shadow-box[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:12px;z-index:-1}.court-players-box[_ngcontent-%COMP%]   .court-player[_ngcontent-%COMP%]   .player-general[_ngcontent-%COMP%]   .player-name-box[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:flex-start}.court-players-box[_ngcontent-%COMP%]   .court-player[_ngcontent-%COMP%]   .player-general[_ngcontent-%COMP%]   .player-name[_ngcontent-%COMP%]{text-align:start;text-wrap:nowrap;max-width:95%;text-overflow:ellipsis;overflow:hidden}.court-players-box[_ngcontent-%COMP%]   .court-player[_ngcontent-%COMP%]   .player-general[_ngcontent-%COMP%]   .fouls[_ngcontent-%COMP%]{display:flex}.court-players-box[_ngcontent-%COMP%]   .court-player[_ngcontent-%COMP%]   .player-general[_ngcontent-%COMP%]   .fouls[_ngcontent-%COMP%]   .foul[_ngcontent-%COMP%]{height:10px;width:10px;border:1px solid;border-radius:2px;margin-right:5px}.court-players-box[_ngcontent-%COMP%]   .court-player[_ngcontent-%COMP%]   .player-general[_ngcontent-%COMP%]   .fouls[_ngcontent-%COMP%]   .foul.fill[_ngcontent-%COMP%]{background-color:red}.court-players-box[_ngcontent-%COMP%]   .court-player[_ngcontent-%COMP%]   .player-general[_ngcontent-%COMP%]   .fouls[_ngcontent-%COMP%]   .foul.empty[_ngcontent-%COMP%]{background-color:#fff}@keyframes _ngcontent-%COMP%_pulse-box-shadow{0%,to{box-shadow:inset 0 0 5px #0000;-webkit-box-shadow:inset 0 0 5px 0 rgba(0,0,0,0);-moz-box-shadow:inset 0 0 5px 0 rgba(0,0,0,0)}50%{box-shadow:inset 0 0 15px 5px var(--primary-color);-webkit-box-shadow:inset 0 0 15px 5px var(--primary-color);-moz-box-shadow:inset 0 0 15px 5px var(--primary-color)}}"]});let e=n;return e})();function ce(e,n){return parseFloat(e.toFixed(n))}var D=function(e){return e.FULL_COURT="fullCourt",e.LEFT_SIDE="leftSide",e.RIGHT_SIDE="rightSide",e}(D||{});var Je=(e,n)=>({"left.%":e,"top.%":n});function vt(e,n){if(e&1&&y(0,"i",7),e&2){let t=d();c("ngStyle",M(1,Je,t.clickedX,t.clickedY))}}function Pt(e,n){if(e&1&&(a(0,"div",8)(1,"span"),f(2),s()()),e&2){let t=d();l(2),T(t.actionMessage)}}var et=(()=>{let n=class n{constructor(){this.operations=[],this.shotMade=new O,this.clickedX=null,this.clickedY=null}courtClicked(i){let o=document.getElementById(D.FULL_COURT),r=o.getBoundingClientRect().width,p=o.getBoundingClientRect().height,g=o.getBoundingClientRect().left,ie=o.getBoundingClientRect().top,A=i.target.id,it=i.clientX-g,ot=i.clientY-ie,rt=Math.max(Math.min(ce(it/r*100,4),100),0),at=Math.max(Math.min(ce(ot/p*100,4),100),0);this.clickedX=rt,this.clickedY=at;let me={value:0,x:this.clickedX,y:this.clickedY};A===D.LEFT_SIDE||A===D.RIGHT_SIDE?this.shotMade.emit(re(oe({},me),{value:2})):A===D.FULL_COURT&&this.shotMade.emit(re(oe({},me),{value:3}))}resetCourtSelection(i){this.clickedX=null,this.clickedY=null}};n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=x({type:n,selectors:[["app-court-panel"]],inputs:{operations:"operations",actionMessage:"actionMessage"},outputs:{shotMade:"shotMade"},decls:7,vars:8,consts:[[1,"court-view-box",3,"mousedown","mouseup"],["id","fullCourt","src","assets/images/court_panel_full.png","alt","Court full view","height","727","priority","",1,"full-court"],["id","leftSide","src","assets/images/left_inner_court.png","alt","Court left inner side","height","568","priority","",1,"left-court-side"],["id","rightSide","src","assets/images/right_inner_court.png","alt","Court right inner side","height","568","priority","",1,"right-court-side"],["class","pi pi-times-circle stat-point",3,"ngStyle",4,"ngIf"],[1,"position-absolute",3,"hidden","ngStyle","operations"],["class","stat-message",4,"ngIf"],[1,"pi","pi-times-circle","stat-point",3,"ngStyle"],[1,"stat-message"]],template:function(o,r){o&1&&(a(0,"div",0),C("mousedown",function(g){return r.courtClicked(g)})("mouseup",function(g){return r.resetCourtSelection(g)}),y(1,"img",1)(2,"img",2)(3,"img",3),_(4,vt,1,4,"i",4),y(5,"app-operation-dial",5),_(6,Pt,3,1,"div",6),s()),o&2&&(l(4),c("ngIf",r.clickedX&&r.clickedY),l(),c("hidden",!r.clickedX||!r.clickedY)("ngStyle",M(5,Je,r.clickedX,r.clickedY))("operations",r.operations),l(),c("ngIf",r.actionMessage))},dependencies:[k,U,Xe],styles:[".court-view-box[_ngcontent-%COMP%]{position:relative;max-width:var(--court-panel-box-xxl-width);max-height:var(--court-panel-box-xxl-height);cursor:crosshair;-webkit-box-shadow:0px 0px 8px 1px var(--shadow-color);-moz-box-shadow:0px 0px 8px 1px var(--shadow-color);box-shadow:0 0 8px 1px var(--shadow-color)}.court-view-box[_ngcontent-%COMP%]   .full-court[_ngcontent-%COMP%], .court-view-box[_ngcontent-%COMP%]   .left-court-side[_ngcontent-%COMP%], .court-view-box[_ngcontent-%COMP%]   .right-court-side[_ngcontent-%COMP%]{filter:brightness(var(--brightness))}.court-view-box[_ngcontent-%COMP%]   .left-court-side[_ngcontent-%COMP%]{position:absolute;top:50%;left:0;transform:translateY(calc(-50% - 1px));border-top-right-radius:284px;border-bottom-right-radius:284px}.court-view-box[_ngcontent-%COMP%]   .right-court-side[_ngcontent-%COMP%]{position:absolute;top:50%;right:0;transform:translateY(calc(-50% - 1px));border-top-left-radius:284px;border-bottom-left-radius:284px}.court-view-box[_ngcontent-%COMP%]   .stat-point[_ngcontent-%COMP%]{position:absolute;transform:translate(-50%,-50%);font-size:2rem;color:red}.court-view-box[_ngcontent-%COMP%]   .stat-message[_ngcontent-%COMP%]{position:absolute;left:50%;background-color:#ffffff50;top:0;transform:translate(-50%);padding:18px 25px 10px;border-bottom-left-radius:15px;border-bottom-right-radius:15px;font-size:1.2rem}"]});let e=n;return e})();var h=function(e){return e["2PMISSED"]="2PMISSED",e["2PMADE"]="2PMADE",e["3PMISSED"]="3PMISSED",e["3PMADE"]="3PMADE",e.FTMISSED="FTMISSED",e.FTMADE="FTMADE",e.AST="AST",e.OREB="OREB",e.DREB="DREB",e.BLK="BLK",e.STL="STL",e.TO="TO",e.PF="PF",e}(h||{}),m=function(e){return e.MADE="MADE",e.MISSED="MISSED",e.MADE_WITH_FOUL="MADE_WITH_FOUL",e.MISSED_WITH_FOUL="MISSED_WITH_FOUL",e.BLOCKED="BLOCKED",e}(m||{}),tt;tt||(tt={});var K=class{constructor(n){this.type=n.type,this.playerId=n.playerId,this.teamId=n.teamId,this.relatedStat=n.relatedStat}};var L=class{setType(n){return this.type=n,this}setPlayerId(n){return this.playerId=n,this}setTeamId(n){return this.teamId=n,this}setRelatedStat(n){return this.relatedStat=n,this}build(){return new K(this)}};var pe=class{constructor(){this.state={actionStep:0,statBuilder:new L,needPlayerSelection:!1,shotValue:0,isStatReady:!1}}},Q=class extends pe{setStatType(){this.state.shotValue===2?this.state.statBuilder.setType(this.twoPointStatType):this.state.statBuilder.setType(this.threePointStatType)}},G=class extends Q{constructor(n){super(),this.state.shotValue=n,this.state.actionStep=1,this.state.actionMessage="Wybierz rzucaj\u0105cego",this.state.needPlayerSelection=!0}nextStep(n){switch(this.state.actionStep){case 1:return n?this.finishStat(n):this.state;default:return this.state}}finishStat(n){return this.state.statBuilder.setPlayerId(n.playerId).setTeamId(n.teamId),this.state.isStatReady=!0,this.state}},q=class extends G{constructor(n){super(n),this.twoPointStatType=h["2PMADE"],this.threePointStatType=h["3PMADE"],this.state.action=m.MADE,this.setStatType()}},J=class extends G{constructor(n){super(n),this.twoPointStatType=h["2PMISSED"],this.threePointStatType=h["3PMISSED"],this.state.action=m.MISSED,this.setStatType()}},ee=class extends Q{constructor(n){super(),this.state.shotValue=n,this.state.actionStep=1,this.state.actionMessage="Wybierz rzucaj\u0105cego",this.state.needPlayerSelection=!0}nextStep(n){switch(this.state.actionStep){case 1:return n?this.setShooter(n):this.state;case 2:return n?this.finishStat(n):this.state;default:return this.state}}setShooter(n){return this.state.statBuilder.setPlayerId(n.playerId).setTeamId(n.teamId),this.state.actionStep=2,this.setRelatedActionMessage(),this.state}finishStat(n){return this.setRelatedStat(n),this.state.isStatReady=!0,this.state}},te=class extends ee{constructor(n){super(n),this.twoPointStatType=h["2PMISSED"],this.threePointStatType=h["3PMISSED"],this.state.action=m.MISSED,this.setStatType()}setRelatedActionMessage(){this.state.actionMessage="Wybierz blokuj\u0105cego"}setRelatedStat(n){let t=new L;return t.setType(h.BLK).setPlayerId(n.playerId).setTeamId(n.teamId),this.state.statBuilder.setRelatedStat(t.build()),this.state}},de=class extends ee{setRelatedActionMessage(){this.state.actionMessage="Wybierz fauluj\u0105cego"}setRelatedStat(n){let t=new L;return t.setType(h.PF).setPlayerId(n.playerId).setTeamId(n.teamId),this.state.statBuilder.setRelatedStat(t.build()),this.state}},z=class extends de{constructor(n){super(n),this.twoPointStatType=h["2PMADE"],this.threePointStatType=h["3PMADE"],this.state.action=m.MADE,this.setStatType()}},ne=class extends z{constructor(n){super(n),this.twoPointStatType=h["2PMISSED"],this.threePointStatType=h["3PMISSED"],this.state.action=m.MISSED,this.setStatType()}};var nt=(()=>{let n=class n{constructor(){this.$matchStats=new ue([])}pushMatchStat(i){this.$matchStats.next([...this.$matchStats.value,i])}getStatStrategy(i,o){switch(i){case m.MADE:return new q(o);case m.MISSED:return new J(o);case m.MADE_WITH_FOUL:return new z(o);case m.MISSED_WITH_FOUL:return new ne(o);case m.BLOCKED:return new te(o)}}};n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})();function Ot(e,n){if(e&1&&(a(0,"div",13)(1,"div",14),y(2,"img",15)(3,"div",16),s(),a(4,"div",17)(5,"h2",18),f(6),s()()()),e&2){let t=n.ngIf;l(2),F("alt","Team ",t.name," logo"),l(4),T(t.name)}}function St(e,n){if(e&1&&(a(0,"div",19)(1,"div",14),y(2,"img",15)(3,"div",16),s(),a(4,"div",17)(5,"h2",18),f(6),s()()()),e&2){let t=n.ngIf;l(2),F("alt","Team ",t.name," logo"),l(4),T(t.name)}}function wt(e,n){if(e&1&&(a(0,"div"),f(1),s()),e&2){let t=n.$implicit,i=d();l(),Ee(" ",t.type," | ",i.getPlayerName(t.playerId)," ### relatedStat: ",t.relatedStat==null?null:t.relatedStat.type," | ",i.getPlayerName(t.relatedStat==null?null:t.relatedStat.playerId)," ")}}function It(e,n){if(e&1&&(a(0,"p"),f(1),s()),e&2){let t=n.$implicit;l(),T(t.name)}}function Tt(e,n){if(e&1&&(a(0,"p"),f(1),s()),e&2){let t=n.$implicit;l(),T(t.name)}}var En=(()=>{let n=class n{constructor(i,o,r,p,g){this.activatedRoute=i,this.router=o,this.matchProcessService=r,this.messageService=p,this.appRoutes=g,this.players=[],this.needPlayerSelection=!1,this.shotSpec={value:0,x:0,y:0},this.operations=[{icon:"pi-check",operation:()=>{this.actionMade(m.MADE)},tooltipMessage:"Trafiony"},{icon:"pi-check-circle",operation:()=>{this.actionMade(m.MADE_WITH_FOUL)},tooltipMessage:"Trafiony z faulem"},{icon:"pi-times",operation:()=>{this.actionMade(m.MISSED)},tooltipMessage:"Nietrafiony"},{icon:"pi-times-circle",operation:()=>{this.actionMade(m.MISSED_WITH_FOUL)},tooltipMessage:"Nietrafiony z faulem"},{icon:"pi-circle-fill",operation:()=>{this.actionMade(m.BLOCKED)},tooltipMessage:"Zablokowany"}],this.StatType=h}ngOnInit(){this.activatedRoute.data.subscribe(({match:i})=>{i||this.router.navigate([this.appRoutes.MATCH,this.appRoutes.PREPARE]),this.match=i,this.players=[...this.match.teamA.players??[],...this.match.teamB.players??[]]})}actionMade(i){this.statStrategy=this.matchProcessService.getStatStrategy(i,this.shotSpec.value),this.applyAction()}applyAction(i){let o=this.statStrategy?.nextStep(i?{playerId:i.id,teamId:i.teamId}:null);console.log("ACTION STATE ",o),this.needPlayerSelection=!!o?.needPlayerSelection,this.actionMessage=o?.actionMessage,o?.isStatReady&&(this.matchProcessService.pushMatchStat(o.statBuilder.build()),this.resetAction())}setShotSpec(i){this.shotSpec=i}resetAction(){this.statStrategy=void 0,this.needPlayerSelection=!1,this.statMade=null,this.actionMessage=void 0}getPlayerName(i){return i?this.players.find(o=>o.id===i)?.name:"-"}get teamAOnCourtPlayers(){return this.match?.teamA.players.slice(0,5)}get teamBOnCourtPlayers(){return this.match?.teamB.players.slice(0,5)}get teamABenchPlayers(){return this.match?.teamA.players.slice(5,12)}get teamBBenchPlayers(){return this.match?.teamB.players.slice(5,12)}};n.\u0275fac=function(o){return new(o||n)(u(Ne),u(Ue),u(nt),u(X),u($e))},n.\u0275cmp=x({type:n,selectors:[["app-match-process"]],decls:30,vars:10,consts:[[1,"general-box","container"],["class","team-box",4,"ngIf"],[1,"score-box"],[1,"score","left"],[1,"score","right"],["class","team-box reverse",4,"ngIf"],[1,"court-panel-box"],[3,"selectedPlayer","players","needPlayerSelection"],[3,"shotMade","operations","actionMessage"],[1,"reverse",3,"selectedPlayer","players","needPlayerSelection"],[1,"summary-table","container"],[1,"row"],[1,"col"],[1,"team-box"],[1,"team-logo-box"],["src","https://picsum.photos/80/80","width","80","height","80",1,"team-logo",3,"alt"],[1,"shadow-box"],[1,"team-name"],[1,"m-0"],[1,"team-box","reverse"]],template:function(o,r){o&1&&(a(0,"div",0),_(1,Ot,7,3,"div",1),a(2,"div",2)(3,"span",3),f(4,"199"),s(),a(5,"span"),f(6,":"),s(),a(7,"span",4),f(8,"99"),s()(),_(9,St,7,3,"div",5),s(),a(10,"div",6)(11,"app-on-court-players",7),C("selectedPlayer",function(g){return r.applyAction(g)}),s(),a(12,"app-court-panel",8),C("shotMade",function(g){return r.setShotSpec(g)}),s(),a(13,"app-on-court-players",9),C("selectedPlayer",function(g){return r.applyAction(g)}),s()(),a(14,"div"),w(15,wt,2,4,"div",null,S),De(17,"async"),s(),a(18,"div",10)(19,"div",11)(20,"div",12)(21,"p"),f(22,"TEAM A BENCH"),s(),w(23,It,2,1,"p",null,S),s(),a(25,"div",12)(26,"p"),f(27,"TEAM B BENCH"),s(),w(28,Tt,2,1,"p",null,S),s()()()),o&2&&(l(),c("ngIf",r.match==null?null:r.match.teamA),l(8),c("ngIf",r.match==null?null:r.match.teamB),l(2),c("players",r.teamAOnCourtPlayers)("needPlayerSelection",r.needPlayerSelection),l(),c("operations",r.operations)("actionMessage",r.actionMessage),l(),c("players",r.teamBOnCourtPlayers)("needPlayerSelection",r.needPlayerSelection),l(2),I(Le(17,8,r.matchProcessService.$matchStats)),l(8),I(r.teamABenchPlayers),l(5),I(r.teamBBenchPlayers))},dependencies:[k,qe,et,Fe],styles:[".general-box[_ngcontent-%COMP%]{display:flex;margin-bottom:6px}.general-box[_ngcontent-%COMP%]   .team-box[_ngcontent-%COMP%]{display:flex;width:40%;margin:0 64px}.general-box[_ngcontent-%COMP%]   .team-box.reverse[_ngcontent-%COMP%]{flex-direction:row-reverse}.general-box[_ngcontent-%COMP%]   .team-box.reverse[_ngcontent-%COMP%]   .shadow-box[_ngcontent-%COMP%]{left:unset;right:-4px}.general-box[_ngcontent-%COMP%]   .team-box[_ngcontent-%COMP%]   .team-logo-box[_ngcontent-%COMP%]{position:relative}.general-box[_ngcontent-%COMP%]   .team-box[_ngcontent-%COMP%]   .team-logo-box[_ngcontent-%COMP%]   .team-logo[_ngcontent-%COMP%]{border-radius:50%;position:relative;z-index:1}.general-box[_ngcontent-%COMP%]   .team-box[_ngcontent-%COMP%]   .team-logo-box[_ngcontent-%COMP%]   .shadow-box[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%}.general-box[_ngcontent-%COMP%]   .team-box[_ngcontent-%COMP%]   .team-name[_ngcontent-%COMP%]{display:flex;align-items:flex-start;padding:0 15px}.general-box[_ngcontent-%COMP%]   .score-box[_ngcontent-%COMP%]{width:20%;display:flex;align-items:center;justify-content:center;font-size:2rem;font-weight:600}.general-box[_ngcontent-%COMP%]   .score-box[_ngcontent-%COMP%]   .score[_ngcontent-%COMP%]{min-width:60px;display:flex}.general-box[_ngcontent-%COMP%]   .score-box[_ngcontent-%COMP%]   .score.left[_ngcontent-%COMP%]{margin-right:10px;justify-content:flex-end}.general-box[_ngcontent-%COMP%]   .score-box[_ngcontent-%COMP%]   .score.right[_ngcontent-%COMP%]{margin-left:10px}.court-panel-box[_ngcontent-%COMP%]{display:flex;justify-content:center}@media screen and (max-width: 1400px){.court-panel-box[_ngcontent-%COMP%]{transform:scale(.8)}}@media screen and (max-width: 1200px){.court-panel-box[_ngcontent-%COMP%]{transform:scale(.8)}}"]});let e=n;return e})();export{Ke as a,En as b};
